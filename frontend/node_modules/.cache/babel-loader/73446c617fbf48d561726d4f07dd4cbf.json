{"remainingRequest":"/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/babel-loader/lib/index.js!/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/shengrui/Desktop/system_framework-main/frontend/src/components/BehaviormodeView/BehaviormodeView.js?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shengrui/Desktop/system_framework-main/frontend/src/components/BehaviormodeView/BehaviormodeView.js","mtime":1729690042587},{"path":"/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1729690872023},{"path":"/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/babel-loader/lib/index.js","mtime":1729690872396},{"path":"/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/eslint-loader/index.js","mtime":1729690872072}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmZpbGwiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuc29ydCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0LmVudHJpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0IGRhdGFTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZGF0YVNlcnZpY2UuanMiOwppbXBvcnQgcGlwZVNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9waXBlU2VydmljZS5qcyI7CmltcG9ydCB7IHNsaWRlckJvdHRvbSwgc2xpZGVyTGVmdCB9IGZyb20gJ2QzLXNpbXBsZS1zbGlkZXInOwppbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7CmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7CmltcG9ydCB7IGJpbiwgcmFuZ2UgfSBmcm9tICdkMyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQmVoYXZpb3Jtb2RlVmlldycsCiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHt9LAogIGNvbXB1dGVkOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YV9ncm91cDE6ICcyMDIwTUhPVCcsCiAgICAgIGRhdGFfZ3JvdXAyOiAnMjAyME1IU1cnLAogICAgICBzdHJva2VfY29sb3I6ICIjRDFCMjREIiwKICAgICAgLy/mnaHnirblm77ngrnlh7vkuYvlkI5iZWhhdmlvciB2aWV35Lya55u45bqU5Yqg5rex77yM6L+Z5piv54K55Ye75LmL5ZCO6auY5Lqu55qE6aKc6ImyCiAgICAgIG5vcm1hbF9jb2xvcjogJyMyZjNlNDYnLAogICAgICAvL25vcm1hbCBjb2xvcgogICAgICBib3VuZGluZ2JveF9jb2xvcjogJyNkOWQ5ZDknLAogICAgICAvL+WklumdoueahOmVv+aWueW9ouahhuahhuaYr+S7gOS5iOminOiJsgogICAgICBkaXN0cmlidXRpb25fY29sb3I6ICcjQzlDQkQxJywKICAgICAgYm94X2NvbG9yOiAnI0M5Q0JEMScsCiAgICAgIG1lZGlhbl9jb2xvcjogJyM0MDQwNDInLAogICAgICBudW1iZXJfY29sb3I6ICd3aGl0ZScsCiAgICAgIC8v5bGV546w55m+5YiG5q+U55qE6IOM5pmv5piv5LuA5LmI6aKc6ImyCiAgICAgIHNsaWRlcl9jb2xvcjogJyNDOUNCRDEnLAogICAgICBiYWNrZ3JvdW5kX2NvbG9yOiAnd2hpdGUnLAogICAgICB3b3JzZV9kaXN0cmlidXRpb25fY29sb3I6ICcjNDMyODE4JywKICAgICAgYWN0aXZlX2s6IDUsCiAgICAgIHBhc3NpdmVfazogNSwKICAgICAgYWN0aXZlX3g6IDMwLAogICAgICAvL2FjdGl2ZeeahOWIhuW4g+S7juWTqumHjOW8gOWni+eUuwogICAgICBhY3RpdmVfeTogMzAwLAogICAgICBwYXNzaXZlX3g6IDMwLAogICAgICBwYXNzaXZlX3k6IDUzMCwKICAgICAgYm94cGxvdDogMCwKICAgICAgbWluX21heF9saXN0OiB7CiAgICAgICAgIkZyZShwb3N0KSI6IFswLCAyMF0sCiAgICAgICAgImludGVydmFsIjogWzAsIDE0XSwKICAgICAgICAic291Z2h0IElTIjogWzAsIDNdLAogICAgICAgICJzb3VnaHQgRVMiOiBbMCwgM10sCiAgICAgICAgInRveGljaXR5IjogWzAsIDFdLAogICAgICAgICJUaW1lKHJlc3BvbnNlKSI6IFsxLCAzXSwKICAgICAgICAicmVjZWl2ZWQgSVMiOiBbMCwgM10sCiAgICAgICAgInJlY2VpdmVkIEVTIjogWzAsIDNdLAogICAgICAgICJOdW0ocmVzcG9uc2UpIjogWzAsIDNdCiAgICAgIH0sCiAgICAgIHhfZGV2aWF0aW9uOiB7CiAgICAgICAgIkZyZShwb3N0KSI6IDIsCiAgICAgICAgImludGVydmFsIjogNywKICAgICAgICAic291Z2h0IElTIjogMSwKICAgICAgICAic291Z2h0IEVTIjogMiwKICAgICAgICAidG94aWNpdHkiOiA3LAogICAgICAgICJOdW0ocmVzcG9uc2UpIjogLTcsCiAgICAgICAgIlRpbWUocmVzcG9uc2UpIjogMCwKICAgICAgICAicmVjZWl2ZWQgSVMiOiAxMCwKICAgICAgICAicmVjZWl2ZWQgRVMiOiA1CiAgICAgIH0KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZGF0YV9ncm91cDE6IGZ1bmN0aW9uIGRhdGFfZ3JvdXAxKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgJCgnLmNsdXN0ZXJkaXN0cmlidXRpb24nKS5yZW1vdmUoKTsKICAgICAgJCgnLmRlcHJlc3Npb25kaXN0cmlidXRpb24nKS5yZW1vdmUoKTsKICAgICAgJCgnLnByb2dyZXNzaW9ub3ZlcnZpZXcnKS5yZW1vdmUoKTsKICAgICAgJCgnLnByb2dyZXNzaW9uc3RhZ2UnKS5yZW1vdmUoKTsKICAgICAgJCgiLnBhdHRlcm5yZXN1bHQiKS5yZW1vdmUoKTsKICAgICAgJCgiLnBhdHRlcm4iKS5yZW1vdmUoKTsKICAgICAgJCgiLnBhdGgiKS5yZW1vdmUoKTsKICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgiLnN0YWdldmlld2JvZHkiKS5hcHBlbmQoInN2ZyIpLmF0dHIoIndpZHRoIiwgOTAwKS5hdHRyKCJoZWlnaHQiLCAyODApLmF0dHIoImNsYXNzIiwgInByb2dyZXNzaW9uc3RhZ2UiKTsKICAgICAgZGF0YVNlcnZpY2UudHJhbnNtaXRfZGVwcmVzc2lvbihbX3RoaXMuZGF0YV9ncm91cDEsIF90aGlzLmRhdGFfZ3JvdXAyXSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpcy5kcmF3RGVwcmVzc2lvbkRpc3RyaWJ1dGlvbihkYXRhKTsKICAgICAgfSk7CiAgICAgIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X2soW190aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMiwgX3RoaXMuYWN0aXZlX2ssIF90aGlzLnBhc3NpdmVfa10sIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMuZHJhd0NsdXN0ZXJEaXN0cmlidXRpb24oMCwgZGF0YVswXSwgX3RoaXMuYWN0aXZlX3gsIF90aGlzLmFjdGl2ZV95KTsKCiAgICAgICAgX3RoaXMuZHJhd0NsdXN0ZXJEaXN0cmlidXRpb24oMSwgZGF0YVsxXSwgX3RoaXMucGFzc2l2ZV94LCBfdGhpcy5wYXNzaXZlX3kpOwoKICAgICAgICBkYXRhU2VydmljZS50cmFuc21pdF9zZWdtZW50KFtfdGhpcy5kYXRhX2dyb3VwMSwgX3RoaXMuZGF0YV9ncm91cDJdLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICBwaXBlU2VydmljZS5lbWl0U2VnbWVudChtc2cpOwogICAgICAgIH0pOwogICAgICAgIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X3N0YWdlX3N1bW1hcml6YXRpb24oW190aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMl0sIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIC8vY29uc29sZS5sb2coInRyYW5zbWl0X3N0YWdlX3N1bW1hcml6YXRpb24iLCBtc2cpCiAgICAgICAgICBwaXBlU2VydmljZS5lbWl0U3RhZ2UoW190aGlzLmFjdGl2ZV9rLCBfdGhpcy5wYXNzaXZlX2ssIG1zZ10pOwogICAgICAgIH0pOwogICAgICAgIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X3BhdHRlcm4oW190aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMl0sIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIHBpcGVTZXJ2aWNlLmVtaXRQYXR0ZXJuKG1zZyk7CiAgICAgICAgfSk7CiAgICAgICAgZGF0YVNlcnZpY2UudHJhbnNtaXRfcGF0aChbX3RoaXMuZGF0YV9ncm91cDEsIF90aGlzLmRhdGFfZ3JvdXAyXSwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgcGlwZVNlcnZpY2UuZW1pdFBhdGgobXNnKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZGF0YV9ncm91cDI6IGZ1bmN0aW9uIGRhdGFfZ3JvdXAyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgJCgnLmNsdXN0ZXJkaXN0cmlidXRpb24nKS5yZW1vdmUoKTsKICAgICAgJCgnLmRlcHJlc3Npb25kaXN0cmlidXRpb24nKS5yZW1vdmUoKTsKICAgICAgJCgnLnByb2dyZXNzaW9ub3ZlcnZpZXcnKS5yZW1vdmUoKTsKICAgICAgJCgnLnByb2dyZXNzaW9uc3RhZ2UnKS5yZW1vdmUoKTsKICAgICAgJCgiLnBhdHRlcm5yZXN1bHQiKS5yZW1vdmUoKTsKICAgICAgJCgiLnBhdHRlcm4iKS5yZW1vdmUoKTsKICAgICAgJCgiLnBhdGgiKS5yZW1vdmUoKTsKICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgiLnN0YWdldmlld2JvZHkiKS5hcHBlbmQoInN2ZyIpLmF0dHIoIndpZHRoIiwgOTAwKS5hdHRyKCJoZWlnaHQiLCAyODApLmF0dHIoImNsYXNzIiwgInByb2dyZXNzaW9uc3RhZ2UiKTsKICAgICAgZGF0YVNlcnZpY2UudHJhbnNtaXRfZGVwcmVzc2lvbihbX3RoaXMuZGF0YV9ncm91cDEsIF90aGlzLmRhdGFfZ3JvdXAyXSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpcy5kcmF3RGVwcmVzc2lvbkRpc3RyaWJ1dGlvbihkYXRhKTsKICAgICAgfSk7CiAgICAgIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X2soW190aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMiwgX3RoaXMuYWN0aXZlX2ssIF90aGlzLnBhc3NpdmVfa10sIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMuZHJhd0NsdXN0ZXJEaXN0cmlidXRpb24oMCwgZGF0YVswXSwgX3RoaXMuYWN0aXZlX3gsIF90aGlzLmFjdGl2ZV95KTsKCiAgICAgICAgX3RoaXMuZHJhd0NsdXN0ZXJEaXN0cmlidXRpb24oMSwgZGF0YVsxXSwgX3RoaXMucGFzc2l2ZV94LCBfdGhpcy5wYXNzaXZlX3kpOwoKICAgICAgICBkYXRhU2VydmljZS50cmFuc21pdF9zZWdtZW50KFtfdGhpcy5kYXRhX2dyb3VwMSwgX3RoaXMuZGF0YV9ncm91cDJdLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICBwaXBlU2VydmljZS5lbWl0U2VnbWVudChtc2cpOwogICAgICAgIH0pOwogICAgICAgIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X3N0YWdlX3N1bW1hcml6YXRpb24oW190aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMl0sIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIC8vY29uc29sZS5sb2coInRyYW5zbWl0X3N0YWdlX3N1bW1hcml6YXRpb24iLCBtc2cpCiAgICAgICAgICBwaXBlU2VydmljZS5lbWl0U3RhZ2UoW190aGlzLmFjdGl2ZV9rLCBfdGhpcy5wYXNzaXZlX2ssIG1zZ10pOwogICAgICAgIH0pOwogICAgICAgIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X3BhdHRlcm4oW190aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMl0sIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIHBpcGVTZXJ2aWNlLmVtaXRQYXR0ZXJuKG1zZyk7CiAgICAgICAgfSk7CiAgICAgICAgZGF0YVNlcnZpY2UudHJhbnNtaXRfcGF0aChbX3RoaXMuZGF0YV9ncm91cDEsIF90aGlzLmRhdGFfZ3JvdXAyXSwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgcGlwZVNlcnZpY2UuZW1pdFBhdGgobXNnKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYm94cGxvdDogZnVuY3Rpb24gYm94cGxvdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpcy5ib3hwbG90ID09IDEpIHsKICAgICAgICAkKCIuYm94cGxvdCIpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICQoIi5kaXN0cmlidXRpb24uYm94cGxvdCIpLmF0dHIoInZpc2liaWxpdHkiLCAidmlzaWJsZSIpOwogICAgICB9IGVsc2UgewogICAgICAgICQoIi5ib3hwbG90IikuYXR0cigiZmlsbCIsIF90aGlzLmJhY2tncm91bmRfY29sb3IpOwogICAgICAgICQoIi5kaXN0cmlidXRpb24uYm94cGxvdCIpLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgIH0KICAgIH0sCiAgICBhY3RpdmVfazogZnVuY3Rpb24gYWN0aXZlX2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAkKCIua3ZhbHVlLjAiKS50ZXh0KF90aGlzLmFjdGl2ZV9rKTsKICAgICAgZGF0YVNlcnZpY2UudHJhbnNtaXRfayhbX3RoaXMuZGF0YV9ncm91cDEsIF90aGlzLmRhdGFfZ3JvdXAyLCBfdGhpcy5hY3RpdmVfaywgX3RoaXMucGFzc2l2ZV9rXSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAkKCIuZGlzdHJpYnV0aW9uLmNvbnRlbnQuMCIpLnJlbW92ZSgpOwogICAgICAgICQoIi5kaXN0cmlidXRpb24uYm91bmRpbmdib3guMCIpLnJlbW92ZSgpOwogICAgICAgICQoIi5kaXN0cmlidXRpb24uYXhpcyIpLnJlbW92ZSgpOyAvLyQoIi5wYXNzaXZlLmNsdXN0ZXIubmFtZSIpLnJlbW92ZSgpCgogICAgICAgICQoIi5hY3RpdmUuY2x1c3Rlci5uYW1lIikucmVtb3ZlKCk7CgogICAgICAgIF90aGlzLmRyYXdDbHVzdGVyRGlzdHJpYnV0aW9uKDAsIGRhdGFbMF0sIF90aGlzLmFjdGl2ZV94LCBfdGhpcy5hY3RpdmVfeSk7IC8vIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X3NlZ21lbnQoIjEiLCAobXNnKSA9PiB7CiAgICAgICAgLy8gICAgIF90aGlzLnBpcGVTZXJ2aWNlLmVtaXRTZWdtZW50KG1zZykKICAgICAgICAvLyB9KQogICAgICAgIC8vIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X3N0YWdlX3N1bW1hcml6YXRpb24oIjEiLCAobXNnKSA9PiB7CiAgICAgICAgLy8gICAgIF90aGlzLnBpcGVTZXJ2aWNlLmVtaXRTdGFnZShbX3RoaXMuYWN0aXZlX2ssIF90aGlzLnBhc3NpdmVfaywgbXNnXSkKICAgICAgICAvLyB9KQoKICAgICAgfSk7CiAgICB9LAogICAgcGFzc2l2ZV9rOiBmdW5jdGlvbiBwYXNzaXZlX2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vY29uc29sZS5sb2coInBhc3NpdmUiLCBfdGhpcy5wYXNzaXZlX2spCgoKICAgICAgJCgiLmt2YWx1ZS4xIikudGV4dChfdGhpcy5wYXNzaXZlX2spOwogICAgICBkYXRhU2VydmljZS50cmFuc21pdF9rKFtfdGhpcy5kYXRhX2dyb3VwMSwgX3RoaXMuZGF0YV9ncm91cDIsIF90aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMiwgX3RoaXMuYWN0aXZlX2ssIF90aGlzLnBhc3NpdmVfa10sIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgJCgiLmRpc3RyaWJ1dGlvbi5jb250ZW50LjEiKS5yZW1vdmUoKTsKICAgICAgICAkKCIuZGlzdHJpYnV0aW9uLmJvdW5kaW5nYm94LjEiKS5yZW1vdmUoKTsKICAgICAgICAkKCIuZGlzdHJpYnV0aW9uLmF4aXMiKS5yZW1vdmUoKTsKICAgICAgICAkKCIucGFzc2l2ZS5jbHVzdGVyLm5hbWUiKS5yZW1vdmUoKTsgLy8kKCIuYWN0aXZlLmNsdXN0ZXIubmFtZSIpLnJlbW92ZSgpCgogICAgICAgIF90aGlzLmRyYXdDbHVzdGVyRGlzdHJpYnV0aW9uKDEsIGRhdGFbMV0sIF90aGlzLnBhc3NpdmVfeCwgX3RoaXMucGFzc2l2ZV95KTsgLy8gZGF0YVNlcnZpY2UudHJhbnNtaXRfc2VnbWVudCgiMSIsIChtc2cpID0+IHsKICAgICAgICAvLyAgICAgX3RoaXMucGlwZVNlcnZpY2UuZW1pdFNlZ21lbnQobXNnKQogICAgICAgIC8vIH0pCiAgICAgICAgLy8gZGF0YVNlcnZpY2UudHJhbnNtaXRfc3RhZ2Vfc3VtbWFyaXphdGlvbigiMSIsIChtc2cpID0+IHsKICAgICAgICAvLyAgICAgX3RoaXMucGlwZVNlcnZpY2UuZW1pdFN0YWdlKFtfdGhpcy5hY3RpdmVfaywgX3RoaXMucGFzc2l2ZV9rLCBtc2ddKQogICAgICAgIC8vIH0pCgogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLmRyYXdMZWdlbmQoKTsKCiAgICBfdGhpcy5kcmF3S0lucHV0KCk7CgogICAgcGlwZVNlcnZpY2Uub25EYXRhc2V0KGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIF90aGlzLmRhdGFfZ3JvdXAxID0gZGF0YVswXTsKICAgICAgX3RoaXMuZGF0YV9ncm91cDIgPSBkYXRhWzFdOwogICAgfSk7CiAgICBkYXRhU2VydmljZS50cmFuc21pdF9kZXByZXNzaW9uKFtfdGhpcy5kYXRhX2dyb3VwMSwgX3RoaXMuZGF0YV9ncm91cDJdLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICBfdGhpcy5kcmF3RGVwcmVzc2lvbkRpc3RyaWJ1dGlvbihkYXRhKTsKICAgIH0pOwogICAgZGF0YVNlcnZpY2UudHJhbnNtaXRfayhbX3RoaXMuZGF0YV9ncm91cDEsIF90aGlzLmRhdGFfZ3JvdXAyLCBfdGhpcy5hY3RpdmVfaywgX3RoaXMucGFzc2l2ZV9rXSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgX3RoaXMuZHJhd0NsdXN0ZXJEaXN0cmlidXRpb24oMCwgZGF0YVswXSwgX3RoaXMuYWN0aXZlX3gsIF90aGlzLmFjdGl2ZV95KTsKCiAgICAgIF90aGlzLmRyYXdDbHVzdGVyRGlzdHJpYnV0aW9uKDEsIGRhdGFbMV0sIF90aGlzLnBhc3NpdmVfeCwgX3RoaXMucGFzc2l2ZV95KTsKCiAgICAgIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X3NlZ21lbnQoW190aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMl0sIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBwaXBlU2VydmljZS5lbWl0U2VnbWVudChtc2cpOwogICAgICB9KTsKICAgICAgZGF0YVNlcnZpY2UudHJhbnNtaXRfc3RhZ2Vfc3VtbWFyaXphdGlvbihbX3RoaXMuZGF0YV9ncm91cDEsIF90aGlzLmRhdGFfZ3JvdXAyXSwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIC8vY29uc29sZS5sb2coInRyYW5zbWl0X3N0YWdlX3N1bW1hcml6YXRpb24iLCBtc2cpCiAgICAgICAgcGlwZVNlcnZpY2UuZW1pdFN0YWdlKFtfdGhpcy5hY3RpdmVfaywgX3RoaXMucGFzc2l2ZV9rLCBtc2ddKTsKICAgICAgfSk7CiAgICAgIGRhdGFTZXJ2aWNlLnRyYW5zbWl0X3BhdHRlcm4oW190aGlzLmRhdGFfZ3JvdXAxLCBfdGhpcy5kYXRhX2dyb3VwMl0sIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBwaXBlU2VydmljZS5lbWl0UGF0dGVybihtc2cpOwogICAgICB9KTsKICAgICAgZGF0YVNlcnZpY2UudHJhbnNtaXRfcGF0aChbX3RoaXMuZGF0YV9ncm91cDEsIF90aGlzLmRhdGFfZ3JvdXAyXSwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIHBpcGVTZXJ2aWNlLmVtaXRQYXRoKG1zZyk7CiAgICAgIH0pOwogICAgfSk7CiAgICAkKCIuYWN0aXZlLiIgKyBfdGhpcy5hY3RpdmVfaykuY3NzKCJmaWxsIiwgInJlZCIpOwogICAgJCgiLnBhc3NpdmUuIiArIF90aGlzLnBhc3NpdmVfaykuY3NzKCJmaWxsIiwgInJlZCIpOwogICAgcGlwZVNlcnZpY2Uub25BUChmdW5jdGlvbiAoYXBfbGlzdCkgewogICAgICBmb3IgKHZhciBpID0gMTsgaSA8IF90aGlzLmFjdGl2ZV9rICsgMTsgaSsrKSB7CiAgICAgICAgaWYgKGFwX2xpc3QuaW5jbHVkZXMoJ2EnICsgaSkpIHsKICAgICAgICAgICQoJy5iZy5hJyArIGkpLmF0dHIoInZpc2liaWxpdHkiLCAidmlzYWJsZSIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAkKCcuYmcuYScgKyBpKS5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IF90aGlzLnBhc3NpdmVfayArIDE7IF9pKyspIHsKICAgICAgICBpZiAoYXBfbGlzdC5pbmNsdWRlcygncCcgKyBfaSkpIHsKICAgICAgICAgICQoJy5iZy5wJyArIF9pKS5hdHRyKCJ2aXNpYmlsaXR5IiwgInZpc2FibGUiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCgnLmJnLnAnICsgX2kpLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRyYXdMZWdlbmQ6IGZ1bmN0aW9uIGRyYXdMZWdlbmQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCIuYmVoYXZpb3J2aWV3aGVhZGVyIikuYXBwZW5kKCJzdmciKS5hdHRyKCJ3aWR0aCIsIDExMCkuYXR0cigiaGVpZ2h0IiwgMjApOwogICAgICB2YXIgZ19sZWdlbmQgPSBzdmcuYXBwZW5kKCdnJyk7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAxMykuYXR0cigieSIsIDMpLmF0dHIoIndpZHRoIiwgMTApLmF0dHIoImhlaWdodCIsIDEwKS5hdHRyKCJmaWxsIiwgX3RoaXMuYmFja2dyb3VuZF9jb2xvcikuYXR0cigic3Ryb2tlIiwgImJsYWNrIikub24oImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmJveHBsb3QgPSAxIC0gX3RoaXMuYm94cGxvdDsKICAgICAgfSkuYXR0cigiY2xhc3MiLCAiYm94cGxvdCIpOwogICAgICBnX2xlZ2VuZC5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgMjcpLmF0dHIoInkiLCAxMikuYXR0cigiZm9udC1zaXplIiwgMTMpLnRleHQoImJveHBsb3QiKTsKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJjaXJjbGUiKS5hdHRyKCJjeCIsIDEwNCkuYXR0cigiY3kiLCA3KS5hdHRyKCJyIiwgNSkuYXR0cigiZmlsbCIsICJ3aGl0ZSIpLmF0dHIoInN0cm9rZSIsICJyZWQiKTsKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIDEwMSkuYXR0cigieSIsIDEwKS5hdHRyKCJmb250LXNpemUiLCA4KS50ZXh0KCI/IikuYXR0cigiZmlsbCIsICIjYmM0YjUxIik7CiAgICB9LAogICAgZ2V0TWF4T2ZBcnJheTogZnVuY3Rpb24gZ2V0TWF4T2ZBcnJheShudW1BcnJheSkgewogICAgICByZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCwgbnVtQXJyYXkpOwogICAgfSwKICAgIGdldE1pbk9mQXJyYXk6IGZ1bmN0aW9uIGdldE1pbk9mQXJyYXkobnVtQXJyYXkpIHsKICAgICAgcmV0dXJuIE1hdGgubWluLmFwcGx5KG51bGwsIG51bUFycmF5KTsKICAgIH0sCiAgICBkcmF3RGVwcmVzc2lvbkRpc3RyaWJ1dGlvbjogZnVuY3Rpb24gZHJhd0RlcHJlc3Npb25EaXN0cmlidXRpb24oZGF0YSkgewogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgd2lkdGggPSAyNzA7CiAgICAgIHZhciBoZWlnaHQgPSAxNzA7CiAgICAgIHZhciBzdmdfZGVwcmVzc2lvbiA9IGQzLnNlbGVjdCgiLnN2ZyIpLmFwcGVuZCgnZycpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwgMzApIikuYXR0cigiY2xhc3MiLCAiZGVwcmVzc2lvbmRpc3RyaWJ1dGlvbiIpOwogICAgICB2YXIgc3ZnX3RpdGxlID0gZDMuc2VsZWN0KCIuc3ZnIikuYXBwZW5kKCdnJykuYXR0cigiY2xhc3MiLCAiZGVwcmVzc2lvbmRpc3RyaWJ1dGlvbiIpOwogICAgICBzdmdfdGl0bGUuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIDUpLmF0dHIoInkiLCAyMCkuYXR0cigiZm9udC1zaXplIiwgMTUpLnRleHQoImRlcHJlc3Npb24iKTsgLy8g6L+b6KGM6aKR546H57uf6K6hCgogICAgICB2YXIgZnJlcTEgPSB7fTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YVswXS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBkYXRhWzBdW2ldOwogICAgICAgIGZyZXExW2tleV0gPSAoZnJlcTFba2V5XSB8fCAwKSArIDE7CiAgICAgIH0KCiAgICAgIHZhciBmcmVxMiA9IHt9OwoKICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgZGF0YVsxXS5sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgdmFyIF9rZXkgPSBkYXRhWzFdW19pMl07CiAgICAgICAgZnJlcTJbX2tleV0gPSAoZnJlcTJbX2tleV0gfHwgMCkgKyAxOwogICAgICB9IC8vIOWwhumikeeOh+e7n+iuoee7k+aenOi9rOaNouS4uuaVsOe7hAoKCiAgICAgIHZhciBkYXRhQXJyYXkxID0gT2JqZWN0LmVudHJpZXMoZnJlcTEpLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBbK2RbMF0sIGRbMV1dOwogICAgICB9KTsKICAgICAgdmFyIGRhdGFBcnJheTIgPSBPYmplY3QuZW50cmllcyhmcmVxMikubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIFsrZFswXSwgZFsxXV07CiAgICAgIH0pOwogICAgICB2YXIgYmluID0gMC4zOwogICAgICBkYXRhQXJyYXkxLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07CiAgICAgIH0pOwogICAgICBkYXRhQXJyYXkyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07CiAgICAgIH0pOwogICAgICBkYXRhQXJyYXkxID0gZGF0YUFycmF5MS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VycikgewogICAgICAgIHZhciBsYXN0QmluID0gYWNjLmxlbmd0aCA+IDAgPyBhY2NbYWNjLmxlbmd0aCAtIDFdWzBdIDogbnVsbDsKCiAgICAgICAgaWYgKGxhc3RCaW4gIT09IG51bGwgJiYgY3VyclswXSA8PSBsYXN0QmluICsgYmluKSB7CiAgICAgICAgICBhY2NbYWNjLmxlbmd0aCAtIDFdWzFdICs9IGN1cnJbMV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFjYy5wdXNoKFtNYXRoLmZsb29yKGN1cnJbMF0gLyBiaW4pICogYmluLCBjdXJyWzFdXSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYWNjOwogICAgICB9LCBbXSk7CiAgICAgIGRhdGFBcnJheTIgPSBkYXRhQXJyYXkyLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBjdXJyKSB7CiAgICAgICAgdmFyIGxhc3RCaW4gPSBhY2MubGVuZ3RoID4gMCA/IGFjY1thY2MubGVuZ3RoIC0gMV1bMF0gOiBudWxsOwoKICAgICAgICBpZiAobGFzdEJpbiAhPT0gbnVsbCAmJiBjdXJyWzBdIDw9IGxhc3RCaW4gKyBiaW4pIHsKICAgICAgICAgIGFjY1thY2MubGVuZ3RoIC0gMV1bMV0gKz0gY3VyclsxXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWNjLnB1c2goW01hdGguZmxvb3IoY3VyclswXSAvIGJpbikgKiBiaW4sIGN1cnJbMV1dKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0sIFtdKTsKICAgICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMC44NSwgZDMubWF4KGRhdGFBcnJheTEubGVuZ3RoID4gZGF0YUFycmF5Mi5sZW5ndGggPyBkYXRhQXJyYXkxIDogZGF0YUFycmF5MiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZFswXTsKICAgICAgfSldKS5yYW5nZShbMjAsIHdpZHRoXSk7CiAgICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIGQzLm1heChkYXRhQXJyYXkxLCBmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkWzFdOwogICAgICB9KV0pLnJhbmdlKFtoZWlnaHQsIDBdKTsKICAgICAgdmFyIGFyZWExID0gZDMuYXJlYSgpLngoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4geChkWzBdKTsKICAgICAgfSkueTAoaGVpZ2h0KS55MShmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiB5KGRbMV0pOwogICAgICB9KS5jdXJ2ZShkMy5jdXJ2ZUJhc2lzKTsKICAgICAgdmFyIGFyZWEyID0gZDMuYXJlYSgpLngoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4geChkWzBdKTsKICAgICAgfSkueTAoaGVpZ2h0KS55MShmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiB5KGRbMV0pOwogICAgICB9KS5jdXJ2ZShkMy5jdXJ2ZUJhc2lzKTsgLy8g57uY5Yi25Yy65Z+f5Zu+CgogICAgICBzdmdfZGVwcmVzc2lvbi5hcHBlbmQoImRlZnMiKS5hcHBlbmQoInBhdHRlcm4iKS5hdHRyKCJpZCIsICJkaWFnb25hbC1zdHJpcGUiKS5hdHRyKCJwYXR0ZXJuVW5pdHMiLCAidXNlclNwYWNlT25Vc2UiKS5hdHRyKCJ3aWR0aCIsIDUpLmF0dHIoImhlaWdodCIsIDUpLmFwcGVuZCgicGF0aCIpLmF0dHIoImQiLCAiTS0xLDEgbDIsLTIgTTAsNSBsNSwtNSBNOSwxMSBsMiwtMiIpLmF0dHIoInN0cm9rZSIsIF90aGlzLndvcnNlX2Rpc3RyaWJ1dGlvbl9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMSk7CiAgICAgIHN2Z19kZXByZXNzaW9uLmFwcGVuZCgicGF0aCIpLmRhdHVtKGRhdGFBcnJheTEpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpLmF0dHIoImQiLCBhcmVhMSkuYXR0cigib3BhY2l0eSIsIDAuNSkuYXR0cigic3Ryb2tlIiwgImJsYWNrIik7CiAgICAgIHN2Z19kZXByZXNzaW9uLmFwcGVuZCgicGF0aCIpLmRhdHVtKGRhdGFBcnJheTIpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpLmF0dHIoImQiLCBhcmVhMikuYXR0cigib3BhY2l0eSIsIDAuNSkuYXR0cigic3Ryb2tlIiwgImJsYWNrIikuYXR0cigiZmlsbCIsICJ1cmwoI2RpYWdvbmFsLXN0cmlwZSkiKTsgLy8g57uY5Yi2bGVnZW5kCgogICAgICB2YXIgc3ZnX2xlZ2VuZCA9IHN2Z19kZXByZXNzaW9uLmFwcGVuZCgnZycpOwogICAgICBzdmdfbGVnZW5kLmFwcGVuZCgncmVjdCcpLmF0dHIoIngiLCAyMzApLmF0dHIoInkiLCAxMCkuYXR0cigiaGVpZ2h0IiwgMTApLmF0dHIoIndpZHRoIiwgMTApLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpLmF0dHIoInN0cm9rZSIsICJibGFjayIpLmF0dHIoIm9wYWNpdHkiLCAwLjUpOwogICAgICBzdmdfbGVnZW5kLmFwcGVuZCgndGV4dCcpLmF0dHIoIngiLCAyNDUpLmF0dHIoInkiLCAxOCkuYXR0cigiZm9udC1zaXplIiwgMTIpLnRleHQoImdyb3VwMSIpOwogICAgICBzdmdfbGVnZW5kLmFwcGVuZCgncmVjdCcpLmF0dHIoIngiLCAyMzApLmF0dHIoInkiLCAzMCkuYXR0cigiaGVpZ2h0IiwgMTApLmF0dHIoIndpZHRoIiwgMTApLmF0dHIoImZpbGwiLCAidXJsKCNkaWFnb25hbC1zdHJpcGUpIik7CiAgICAgIHN2Z19sZWdlbmQuYXBwZW5kKCdyZWN0JykuYXR0cigieCIsIDIzMCkuYXR0cigieSIsIDMwKS5hdHRyKCJoZWlnaHQiLCAxMCkuYXR0cigid2lkdGgiLCAxMCkuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcikuYXR0cigic3Ryb2tlIiwgImJsYWNrIikuYXR0cigib3BhY2l0eSIsIDAuNSk7CiAgICAgIHN2Z19sZWdlbmQuYXBwZW5kKCd0ZXh0JykuYXR0cigieCIsIDI0NSkuYXR0cigieSIsIDM4KS5hdHRyKCJmb250LXNpemUiLCAxMikudGV4dCgiZ3JvdXAyIik7CiAgICAgIHZhciB4dCA9IDM7CiAgICAgIHN2Z19sZWdlbmQuYXBwZW5kKCdyZWN0JykuYXR0cigieCIsIDI0MSAtIHh0KS5hdHRyKCJ5IiwgMjAwKS5hdHRyKCJoZWlnaHQiLCAxMCkuYXR0cigid2lkdGgiLCAyNykuYXR0cigiZmlsbCIsICdub25lJykuYXR0cigic3Ryb2tlIiwgImJsYWNrIikuYXR0cigib3BhY2l0eSIsIDAuNSk7CiAgICAgIHN2Z19sZWdlbmQuYXBwZW5kKCdyZWN0JykuYXR0cigieCIsIDI1NCAtIHh0KS5hdHRyKCJ5IiwgMjAwKS5hdHRyKCJoZWlnaHQiLCAxMCkuYXR0cigid2lkdGgiLCAyKS5hdHRyKCJmaWxsIiwgJ2JsYWNrJykuYXR0cigic3Ryb2tlIiwgImJsYWNrIikuYXR0cigib3BhY2l0eSIsIDAuNCk7CiAgICAgIHN2Z19sZWdlbmQuYXBwZW5kKCd0ZXh0JykuYXR0cigieCIsIDIyMCAtIHh0KS5hdHRyKCJ5IiwgMjEwKS5hdHRyKCJmb250LXNpemUiLCAxMikudGV4dCgibG93Iik7CiAgICAgIHN2Z19sZWdlbmQuYXBwZW5kKCd0ZXh0JykuYXR0cigieCIsIDI3MCAtIHh0KS5hdHRyKCJ5IiwgMjEwKS5hdHRyKCJmb250LXNpemUiLCAxMikudGV4dCgiaGlnaCIpOwogICAgICB2YXIgZm9ybWF0SyA9IGQzLmZvcm1hdCgiZCIpOyAvLyDmt7vliqAgWCDovbQKCiAgICAgIHN2Z19kZXByZXNzaW9uLmFwcGVuZCgiZyIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwiICsgaGVpZ2h0ICsgIikiKS5jYWxsKGQzLmF4aXNCb3R0b20oeCkudGlja3MoNSkpOyAvLyDmt7vliqAgWSDovbQKCiAgICAgIHN2Z19kZXByZXNzaW9uLmFwcGVuZCgiZyIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMjUsIDApIikuY2FsbChkMy5heGlzTGVmdCh5KS50aWNrcyg1KS50aWNrRm9ybWF0KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGZvcm1hdEsoZCAvIDEwMDApICsgJ2snOwogICAgICB9KSk7CiAgICB9LAogICAgZHJhd0VhY2hCb3hwbG90OiBmdW5jdGlvbiBkcmF3RWFjaEJveHBsb3QoZmxhZywgZGF0YSwgc3ZnLCB5X3N0YXJ0LCB5MSwgeWhlaWdodCwgeHNjYWxlLCB4d2lkdGgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsgLy8g5pWw5o2u5qC85byP5Li656ysbuS4quexu+WIq++8jOaoquWdkOagh+WIhuW4g+S7jnhfc3RhcnTliLB4X2VuZO+8jOeEtuWQjueUu+WHuumHjOmdouavj+S4qmF0dHJpYnV0ZeeahOWIhuW4gwogICAgICAvLyBkYXRh6KGo56S66L+Z5LiA5Liq57G75Yir55qE5omA5pyJ5pWw5o2uCgoKICAgICAgdmFyIGtleSA9IE9iamVjdC5rZXlzKGRhdGFbMF0pOwoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AodCkgewogICAgICAgIC8v5YaZ5q+P5LiA5LiqYXR0cmlidXRl55qE5ZCN5a2XCiAgICAgICAgaWYgKGZsYWcgPT0gMCkgewogICAgICAgICAgc3ZnLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCB4c2NhbGUodCkgKyBfdGhpcy54X2RldmlhdGlvbltrZXlbdF1dKS5hdHRyKCJ5IiwgeV9zdGFydCAtIDIwKS5hdHRyKCJmb250LXNpemUiLCAxMSkudGV4dChrZXlbdF0pLmF0dHIoIm9wYWNpdHkiLCAwLjMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdmcuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIHhzY2FsZSh0KSArIF90aGlzLnhfZGV2aWF0aW9uW2tleVt0XV0pLmF0dHIoInkiLCB5X3N0YXJ0IC0gMjApLmF0dHIoImZvbnQtc2l6ZSIsIDEwKS50ZXh0KGtleVt0XSkuYXR0cigib3BhY2l0eSIsIDAuMyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgaGVpZ2h0ID0geWhlaWdodCAtIDU7CiAgICAgICAgdmFyIGRhdGFfdGVtcCA9IGRhdGEubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIHJldHVybiBvYmpba2V5W3RdXTsKICAgICAgICB9KTsgLy/lr7nkuo7ov4flpKfnmoTlgLzlpITnkIbmjonvvIzorr7nva7kuIDkuKrkuIrpmZAKCiAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBkYXRhX3RlbXAubGVuZ3RoOyBwKyspIHsKICAgICAgICAgIGlmIChkYXRhX3RlbXBbcF0gPiBfdGhpcy5taW5fbWF4X2xpc3Rba2V5W3RdXVsxXSkgewogICAgICAgICAgICBkYXRhX3RlbXBbcF0gPSBfdGhpcy5taW5fbWF4X2xpc3Rba2V5W3RdXVsxXTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGRhdGFfc29ydGVkID0gZGF0YV90ZW1wLnNvcnQoZDMuYXNjZW5kaW5nKTsKICAgICAgICBxMSA9IGQzLnF1YW50aWxlKGRhdGFfc29ydGVkLCAuMjUpOwogICAgICAgIG1lZGlhbiA9IGQzLnF1YW50aWxlKGRhdGFfc29ydGVkLCAuNSk7CiAgICAgICAgcTMgPSBkMy5xdWFudGlsZShkYXRhX3NvcnRlZCwgLjc1KTsKCiAgICAgICAgaWYgKG1lZGlhbiA9PSBxMSB8fCBtZWRpYW4gPT0gcTMpIHsKICAgICAgICAgIG1lZGlhbiA9IChxMSArIHEzKSAvIDI7CiAgICAgICAgfQoKICAgICAgICBpbnRlclF1YW50aWxlUmFuZ2UgPSBxMyAtIHExOwogICAgICAgIG1pbiA9IHExIC0gMS41ICogaW50ZXJRdWFudGlsZVJhbmdlOwogICAgICAgIG1heCA9IHExICsgMS41ICogaW50ZXJRdWFudGlsZVJhbmdlOyAvLyAqKioqKioqKioqKuS4jeiDvei2hei/h+acgOWkp+acgOWwj+iMg+WbtCoqKioqKioqKioqKioqKioqCgogICAgICAgIGlmIChtaW4gPCBfdGhpcy5taW5fbWF4X2xpc3Rba2V5W3RdXVswXSkgewogICAgICAgICAgLy/mnIDlsI/lgLzkuI3kvJrkuLrotJ8KICAgICAgICAgIG1pbiA9IF90aGlzLm1pbl9tYXhfbGlzdFtrZXlbdF1dWzBdOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1heCA+IF90aGlzLm1pbl9tYXhfbGlzdFtrZXlbdF1dWzFdKSB7CiAgICAgICAgICBtYXggPSBfdGhpcy5taW5fbWF4X2xpc3Rba2V5W3RdXVsxXTsKICAgICAgICB9IC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKCiAgICAgICAgY2VudGVyID0geTEgKyBoZWlnaHQgLyAyOyAvL+S4reW/g+e6v+W6lOivpeeUu+WcqOWTqumHjAoKICAgICAgICB4c2NhbGVfdGVtcCA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW3hzY2FsZSh0KSArIDYsIHhzY2FsZSh0KSArIHh3aWR0aCAtIDZdKS5kb21haW4oW190aGlzLm1pbl9tYXhfbGlzdFtrZXlbdF1dWzBdLCBfdGhpcy5taW5fbWF4X2xpc3Rba2V5W3RdXVsxXV0pOyAvLyDlpoLmnpzov5nkuKrlgLzmmK/mnInmhI/kuYnnmoTvvIzljbNxMSwgbWVkaWFuLCBxMywgbWF4ICE9IC0x77yM5YiZ55S755uS5Zu+CiAgICAgICAgLy/lh7rnjrBtYXgsIG1pbuWQjOS4gOS4quWAvO+8jOS4uuS6hueci+W+l+abtOa4healmu+8jOiuqeWFtui3neemu+S4ujIKCiAgICAgICAgeDFfbGluZSA9IHhzY2FsZV90ZW1wKG1pbik7CiAgICAgICAgeDJfbGluZSA9IHhzY2FsZV90ZW1wKG1heCk7CgogICAgICAgIGlmIChtYXggLSBtaW4gPCBfdGhpcy5taW5fbWF4X2xpc3Rba2V5W3RdXVsxXSAqIDAuMSkgewogICAgICAgICAgaWYgKG1pbiA9PSBfdGhpcy5taW5fbWF4X2xpc3Rba2V5W3RdXVswXSkgewogICAgICAgICAgICB4Ml9saW5lID0geHNjYWxlX3RlbXAobWF4KSArIDI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB4MV9saW5lID0geHNjYWxlX3RlbXAobWluKSAtIDI7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBnX2JveHBsb3RfY29udHJvbCA9IHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCJ3aWR0aCIsIDEwMCkuYXR0cigiaGVpZ2h0IiwgMjAwKS5hdHRyKCJjbGFzcyIsICJkaXN0cmlidXRpb24gYm94cGxvdCAiICsgZmxhZykuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKTsKICAgICAgICBnX2JveHBsb3QgPSBzdmcuYXBwZW5kKCdnJykuYXR0cigid2lkdGgiLCAxMDApLmF0dHIoImhlaWdodCIsIDIwMCkuYXR0cigiY2xhc3MiLCAiZGlzdHJpYnV0aW9uIGNvbnRlbnQgIiArIGZsYWcpOwoKICAgICAgICBpZiAobWF4ICE9IC0xKSB7CiAgICAgICAgICAvLyBzaG93IG1lZGlhbiBob3Jpem9udGFsIGxpbmVzCiAgICAgICAgICBnX2JveHBsb3Quc2VsZWN0QWxsKCJ0b3RvIikuZGF0YShbeHNjYWxlX3RlbXAobWVkaWFuKV0pLmVudGVyKCkuYXBwZW5kKCJsaW5lIikuYXR0cigieDEiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZDsKICAgICAgICAgIH0pLmF0dHIoIngyIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgICB9KS5hdHRyKCJ5MSIsIHkxKS5hdHRyKCJ5MiIsIHkxICsgaGVpZ2h0KS5hdHRyKCJzdHJva2UiLCBfdGhpcy5tZWRpYW5fY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIDMpLmF0dHIoIm9wYWNpdHkiLCAwLjUpOyAvL+WFiOeUu+S4reW/g+eahOe6vwoKICAgICAgICAgIGdfYm94cGxvdF9jb250cm9sLmFwcGVuZCgibGluZSIpLmF0dHIoIngxIiwgeDFfbGluZSkuYXR0cigieDIiLCB4Ml9saW5lKS5hdHRyKCJ5MSIsIGNlbnRlcikuYXR0cigieTIiLCBjZW50ZXIpLmF0dHIoInN0cm9rZSIsIF90aGlzLmJvdW5kaW5nYm94X2NvbG9yKTsgLy8gU2hvdyB0aGUgYm94CgogICAgICAgICAgZ19ib3hwbG90X2NvbnRyb2wuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhzY2FsZV90ZW1wKHExKSkuYXR0cigieSIsIHkxICsgaGVpZ2h0IC8gMykuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0IC8gMykuYXR0cigid2lkdGgiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh4c2NhbGVfdGVtcChxMykgLSB4c2NhbGVfdGVtcChxMSkgPT0gMCkgewogICAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiB4c2NhbGVfdGVtcChxMykgLSB4c2NhbGVfdGVtcChxMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmF0dHIoInN0cm9rZSIsIF90aGlzLmJvdW5kaW5nYm94X2NvbG9yKS5zdHlsZSgiZmlsbCIsIF90aGlzLmJveF9jb2xvcik7IC8vIHNob3cgbWluIGFuZCBtYXggaG9yaXpvbnRhbCBsaW5lcwoKICAgICAgICAgIGdfYm94cGxvdF9jb250cm9sLnNlbGVjdEFsbCgidG90byIpLmRhdGEoW3gxX2xpbmUsIHgyX2xpbmVdKS5lbnRlcigpLmFwcGVuZCgibGluZSIpLmF0dHIoIngxIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgICB9KS5hdHRyKCJ4MiIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIHJldHVybiBkOwogICAgICAgICAgfSkuYXR0cigieTEiLCB5MSArIGhlaWdodCAvIDMpLmF0dHIoInkyIiwgeTEgKyBoZWlnaHQgLyAzICogMikuYXR0cigic3Ryb2tlIiwgX3RoaXMuYm91bmRpbmdib3hfY29sb3IpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBnX2JveHBsb3QuYXBwZW5kKCJsaW5lIikuYXR0cigieDEiLCB4c2NhbGUodCkgKyA2KS5hdHRyKCJ4MiIsIHhzY2FsZSh0KSArIHh3aWR0aCAtIDYpLmF0dHIoInkxIiwgY2VudGVyKS5hdHRyKCJ5MiIsIGNlbnRlcikuYXR0cigic3Ryb2tlIiwgX3RoaXMuYm91bmRpbmdib3hfY29sb3IpLmF0dHIoInN0cm9rZS1kYXNoYXJyYXkiLCAiMywgNSIpOwogICAgICAgIH0gLy8g55S75qGGCgoKICAgICAgICBzdmcuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhzY2FsZSh0KSkuYXR0cigieSIsIHkxKS5hdHRyKCJ3aWR0aCIsIHh3aWR0aCAtIDIpLmF0dHIoImhlaWdodCIsIGhlaWdodCkuYXR0cigib3BhY2l0eSIsIDAuMikuc3R5bGUoInN0cm9rZSIsIF90aGlzLm5vcm1hbF9jb2xvcikuc3R5bGUoImZpbGwiLCAibm9uZSIpLmF0dHIoImNsYXNzIiwgImRpc3RyaWJ1dGlvbiBib3VuZGluZ2JveCAiICsgZmxhZyk7CiAgICAgIH07CgogICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGtleS5sZW5ndGg7IHQrKykgewogICAgICAgIHZhciBkYXRhX3NvcnRlZDsKICAgICAgICB2YXIgcTE7CiAgICAgICAgdmFyIG1lZGlhbjsKICAgICAgICB2YXIgcTM7CiAgICAgICAgdmFyIGludGVyUXVhbnRpbGVSYW5nZTsKICAgICAgICB2YXIgbWluOwogICAgICAgIHZhciBtYXg7CiAgICAgICAgdmFyIGNlbnRlcjsKICAgICAgICB2YXIgeHNjYWxlX3RlbXA7CiAgICAgICAgdmFyIHgxX2xpbmU7CiAgICAgICAgdmFyIHgyX2xpbmU7CiAgICAgICAgdmFyIGdfYm94cGxvdF9jb250cm9sOwogICAgICAgIHZhciBnX2JveHBsb3Q7CgogICAgICAgIF9sb29wKHQpOwogICAgICB9CiAgICB9LAogICAgZHJhd0VhY2hEaXN0cmlidXRpb246IGZ1bmN0aW9uIGRyYXdFYWNoRGlzdHJpYnV0aW9uKGZsYWcsIGRhdGEsIHN2ZywgeV9zdGFydCwgeTEsIHloZWlnaHQsIHhzY2FsZSwgeHdpZHRoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vIOaVsOaNruagvOW8j+S4uuesrG7kuKrnsbvliKvvvIzmqKrlnZDmoIfliIbluIPku454X3N0YXJ05YiweF9lbmTvvIznhLblkI7nlLvlh7rph4zpnaLmr4/kuKphdHRyaWJ1dGXnmoTliIbluIMKCgogICAgICB2YXIga2V5ID0gT2JqZWN0LmtleXMoZGF0YVswXSk7IC8vY29uc29sZS5sb2coa2V5KQoKICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMih0KSB7CiAgICAgICAgLy/lhpnmr4/kuIDkuKphdHRyaWJ1dGXnmoTlkI3lrZcKICAgICAgICBpZiAoZmxhZyA9PSAwKSB7CiAgICAgICAgICBzdmcuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIHhzY2FsZSh0KSArICgxMCAtIGtleVt0XS5sZW5ndGgpIC8gMC41ICsgOCkuYXR0cigieSIsIHlfc3RhcnQgLSAyMCkuYXR0cigiZm9udC1zaXplIiwgNykudGV4dChrZXlbdF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdmcuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIHhzY2FsZSh0KSArICgxMCAtIGtleVt0XS5sZW5ndGgpIC8gMC41ICsgMTUpLmF0dHIoInkiLCB5X3N0YXJ0IC0gMjApLmF0dHIoImZvbnQtc2l6ZSIsIDcpLnRleHQoa2V5W3RdKTsKICAgICAgICB9CgogICAgICAgIHZhciBoZWlnaHQgPSB5aGVpZ2h0IC0gNTsKICAgICAgICB2YXIgZGF0YV90ZW1wID0gZGF0YS5tYXAoZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgcmV0dXJuIG9ialtrZXlbdF1dOwogICAgICAgIH0pOyAvL2NvbnNvbGUubG9nKGtleVt0XSwgX3RoaXMuZ2V0TWluT2ZBcnJheShkYXRhX3RlbXApLCBfdGhpcy5nZXRNYXhPZkFycmF5KGRhdGFfdGVtcCkpCgogICAgICAgIHggPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbX3RoaXMubWluX21heF9saXN0W2tleVt0XV1bMF0sIF90aGlzLm1pbl9tYXhfbGlzdFtrZXlbdF1dWzFdXSkucmFuZ2UoW3hzY2FsZSh0KSArIDUsIHhzY2FsZSh0KSArIHh3aWR0aCAtIDVdKTsKICAgICAgICBiaW5zID0gZDMuaGlzdG9ncmFtKCkuZG9tYWluKHguZG9tYWluKCkpLnRocmVzaG9sZHMoeC50aWNrcygzMCkpKGRhdGFfdGVtcCk7CiAgICAgICAgbWF4ID0gZDMubWF4KGJpbnMsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gZC55OwogICAgICAgIH0pOwogICAgICAgIHkgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgLjFdKS5yYW5nZShbeTEsIHkxICsgMzBdKTsKICAgICAgICB5Rm9ySGlzdG9ncmFtID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIGQzLm1heChiaW5zLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIGQubGVuZ3RoOwogICAgICAgIH0pXSkucmFuZ2UoW2hlaWdodCwgMF0pOyAvLyDlnKjmr4/kuKphdHRyaWJ1dGXkuIvnlLvlnZDmoIfovbQKCiAgICAgICAgYXhpcyA9IGQzLmF4aXNUb3AoeCkudGlja3MoMykudGlja1NpemVPdXRlcigzKS50aWNrU2l6ZUlubmVyKDEpOwogICAgICAgIHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIiArICh5X3N0YXJ0IC0gMTApICsgIikiKS5jYWxsKGF4aXMpLnN0eWxlKCJmb250LXNpemUiLCAiNXB4IikuYXR0cigiY2xhc3MiLCAiZGlzdHJpYnV0aW9uIGF4aXMiKTsKCiAgICAgICAgdmFyIF9sb29wMyA9IGZ1bmN0aW9uIF9sb29wMyhwKSB7CiAgICAgICAgICBzdmcuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHgoYmluc1twXS54MCkpLmF0dHIoInkiLCB5Rm9ySGlzdG9ncmFtKGJpbnNbcF0ubGVuZ3RoKSArIHkxKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKS5hdHRyKCJ3aWR0aCIsIHgoYmluc1swXS54MSkgLSB4KGJpbnNbMF0ueDApKS5hdHRyKCJoZWlnaHQiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gaGVpZ2h0IC0geUZvckhpc3RvZ3JhbShiaW5zW3BdLmxlbmd0aCk7CiAgICAgICAgICB9KS5hdHRyKCJjbGFzcyIsICJkaXN0cmlidXRpb24gY29udGVudCIpOwogICAgICAgIH07CgogICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgYmlucy5sZW5ndGg7IHArKykgewogICAgICAgICAgX2xvb3AzKHApOwogICAgICAgIH0KCiAgICAgICAgc3ZnLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4c2NhbGUodCkpLmF0dHIoInkiLCB5MSkuYXR0cigid2lkdGgiLCB4d2lkdGggLSAyKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpLmF0dHIoIm9wYWNpdHkiLCAwLjMpLnN0eWxlKCJzdHJva2UiLCBfdGhpcy5ub3JtYWxfY29sb3IpLnN0eWxlKCJmaWxsIiwgIm5vbmUiKS5hdHRyKCJjbGFzcyIsICJkaXN0cmlidXRpb24gYm91bmRpbmdib3giKTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwga2V5Lmxlbmd0aDsgdCsrKSB7CiAgICAgICAgdmFyIHg7CiAgICAgICAgdmFyIGJpbnM7CiAgICAgICAgdmFyIG1heDsKICAgICAgICB2YXIgeTsKICAgICAgICB2YXIgeUZvckhpc3RvZ3JhbTsKICAgICAgICB2YXIgYXhpczsKCiAgICAgICAgX2xvb3AyKHQpOwogICAgICB9CiAgICB9LAogICAgZHJhd0NsdXN0ZXJEaXN0cmlidXRpb246IGZ1bmN0aW9uIGRyYXdDbHVzdGVyRGlzdHJpYnV0aW9uKGZsYWcsIGRhdGEsIHhfc3RhcnQsIHlfc3RhcnQpIHsKICAgICAgdmFyIGF0dHJpYnV0ZV9udW1iZXIgPSBkYXRhWzBdWzBdLmxlbmd0aDsKICAgICAgdmFyIGNsdXN0ZXJfbnVtYmVyID0gZGF0YS5sZW5ndGg7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN2Z19kaXN0cmlidXRpb24gPSBkMy5zZWxlY3QoIi5zdmciKS5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJjbHVzdGVyZGlzdHJpYnV0aW9uIik7CiAgICAgIHZhciBhdHRyaWJ1dGVzID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZV9udW1iZXI7IGkrKykgewogICAgICAgIGF0dHJpYnV0ZXMucHVzaChpKTsKICAgICAgfQoKICAgICAgdmFyIHhzY2FsZSA9IGQzLnNjYWxlQmFuZCgpLnJhbmdlKFt4X3N0YXJ0IC0gMTAsIHhfc3RhcnQgKyAyNDBdKS5kb21haW4oYXR0cmlidXRlcyk7CiAgICAgIHZhciBjbHVzdGVycyA9IFtdOwoKICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgY2x1c3Rlcl9udW1iZXI7IF9pMysrKSB7CiAgICAgICAgY2x1c3RlcnMucHVzaChfaTMpOwogICAgICB9CgogICAgICB2YXIgeXNjYWxlID0gZDMuc2NhbGVCYW5kKCkucmFuZ2UoW3lfc3RhcnQgLSAxNSwgeV9zdGFydCArIDE3MF0pLmRvbWFpbihjbHVzdGVycyk7CiAgICAgIHZhciBwZW9wbGVfc3VtID0gMDsKCiAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IGNsdXN0ZXJfbnVtYmVyOyBfaTQrKykgewogICAgICAgIHBlb3BsZV9zdW0gPSBwZW9wbGVfc3VtICsgZGF0YVtfaTRdLmxlbmd0aDsKICAgICAgfSAvLyDlhpnkuIrmgLvkurrmlbAKCgogICAgICBpZiAoZmxhZyA9PSAwKSB7CiAgICAgICAgc3ZnX2Rpc3RyaWJ1dGlvbi5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydCArIDE3NSkuYXR0cigieSIsIDIwKS5hdHRyKCJmb250LXNpemUiLCAxNSkudGV4dCgic3VtIDogIiArIHBlb3BsZV9zdW0pLmF0dHIoImNsYXNzIiwgImFjdGl2ZSBjbHVzdGVyIG5hbWUiKTsKICAgICAgfQoKICAgICAgaWYgKGZsYWcgPT0gMCkgewogICAgICAgIC8v5Li75YqoCiAgICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgY2x1c3Rlcl9udW1iZXI7IF9pNSsrKSB7CiAgICAgICAgICAvL+WGmWNsdXN0ZXLnmoTluo/lj7cKICAgICAgICAgIC8vY29uc29sZS5sb2coeF9zdGFydCwgeXNjYWxlW2ldLCBjbHVzdGVycykKICAgICAgICAgIHN2Z19kaXN0cmlidXRpb24uYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfc3RhcnQgLSAyOSkuYXR0cigieSIsIHlzY2FsZShfaTUpIC0gMykuYXR0cigiaGVpZ2h0IiwgeXNjYWxlKDEpIC0geXNjYWxlKDApIC0gMTApLmF0dHIoIndpZHRoIiwgMjk2KS5hdHRyKCJjbGFzcyIsICJiZyBhIiArIChfaTUgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcikuYXR0cigib3BhY2l0eSIsIDAuMDgpLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgICAgICBzdmdfZGlzdHJpYnV0aW9uLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCB4X3N0YXJ0IC0gMjgpLmF0dHIoInkiLCB5c2NhbGUoX2k1KSArIDEwMCAvIGNsdXN0ZXJfbnVtYmVyIC8gMiArIDUpLmF0dHIoImZvbnQtc2l6ZSIsIDEzKS50ZXh0KCJwIiArIChfaTUgKyAxKSkuYXR0cigiY2xhc3MiLCAiYWN0aXZlIGNsdXN0ZXIgbmFtZSIpOwogICAgICAgICAgdmFyIGRhdGFfdGVtcCA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YVtfaTVdLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGRhdGFfdGVtcC5wdXNoKHsKICAgICAgICAgICAgICAiRnJlKHBvc3QpIjogZGF0YVtfaTVdW2pdWzBdLAogICAgICAgICAgICAgICJpbnRlcnZhbCI6IGRhdGFbX2k1XVtqXVsxXSwKICAgICAgICAgICAgICAic291Z2h0IElTIjogZGF0YVtfaTVdW2pdWzJdLAogICAgICAgICAgICAgICJzb3VnaHQgRVMiOiBkYXRhW19pNV1bal1bM10sCiAgICAgICAgICAgICAgInRveGljaXR5IjogZGF0YVtfaTVdW2pdWzRdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSAvLyDmiorov5nkuKrnu4TnmoTkurrmlbDmlL7lnKjmnIDlkI7pnaIKCgogICAgICAgICAgc3ZnX2Rpc3RyaWJ1dGlvbi5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydCArIDI0OCkuYXR0cigieSIsIDI4MCkuYXR0cigiZm9udC1zaXplIiwgMTApLnRleHQoIiUiKS5hdHRyKCJjbGFzcyIsICJhY3RpdmUgY2x1c3RlciBuYW1lIik7CiAgICAgICAgICBzdmdfZGlzdHJpYnV0aW9uLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X3N0YXJ0ICsgMjQwKS5hdHRyKCJ5IiwgeXNjYWxlKF9pNSkgKyAxMDAgLyBjbHVzdGVyX251bWJlciAvIDIgLSA2KS5hdHRyKCJ3aWR0aCIsIDI1KS5hdHRyKCJoZWlnaHQiLCAxMikuYXR0cigiZmlsbCIsIF90aGlzLm51bWJlcl9jb2xvcikuc3R5bGUoInN0cm9rZSIsICJub25lIikuc3R5bGUoIm9wYWNpdHkiLCAwLjUpLmF0dHIoImNsYXNzIiwgImFjdGl2ZSBjbHVzdGVyIG5hbWUiKTsKICAgICAgICAgIHN2Z19kaXN0cmlidXRpb24uYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIHhfc3RhcnQgKyAyNDApLmF0dHIoInkiLCB5c2NhbGUoX2k1KSArIDEwMCAvIGNsdXN0ZXJfbnVtYmVyIC8gMiArIDQpLmF0dHIoImZvbnQtc2l6ZSIsIDEwKS50ZXh0KChkYXRhX3RlbXAubGVuZ3RoIC8gcGVvcGxlX3N1bSkudG9GaXhlZCgzKSkuYXR0cigiY2xhc3MiLCAiYWN0aXZlIGNsdXN0ZXIgbmFtZSIpOwoKICAgICAgICAgIF90aGlzLmRyYXdFYWNoQm94cGxvdCgwLCBkYXRhX3RlbXAsIHN2Z19kaXN0cmlidXRpb24sIHlfc3RhcnQsIHlzY2FsZShfaTUpLCAxMzAgLyBjbHVzdGVyX251bWJlciwgeHNjYWxlLCAyNTAgLyBhdHRyaWJ1dGVfbnVtYmVyKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgX2k2ID0gMDsgX2k2IDwgY2x1c3Rlcl9udW1iZXI7IF9pNisrKSB7CiAgICAgICAgICAvL+WGmWNsdXN0ZXLnmoTluo/lj7cKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHhfc3RhcnQsIHlzY2FsZVtpXSwgY2x1c3RlcnMpCiAgICAgICAgICBzdmdfZGlzdHJpYnV0aW9uLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X3N0YXJ0IC0gMjgpLmF0dHIoInkiLCB5c2NhbGUoX2k2KSAtIDMpLmF0dHIoImhlaWdodCIsIHlzY2FsZSgxKSAtIHlzY2FsZSgwKSAtIDEwKS5hdHRyKCJ3aWR0aCIsIDMwMCkuYXR0cigiY2xhc3MiLCAiYmcgcCIgKyAoX2k2ICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpLmF0dHIoIm9wYWNpdHkiLCAwLjA4KS5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpOwogICAgICAgICAgc3ZnX2Rpc3RyaWJ1dGlvbi5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydCAtIDI4KS5hdHRyKCJ5IiwgeXNjYWxlKF9pNikgKyAxMDAgLyBjbHVzdGVyX251bWJlciAvIDIgKyA1KS5hdHRyKCJmb250LXNpemUiLCAxMykudGV4dCgiciIgKyAoX2k2ICsgMSkpOwogICAgICAgICAgdmFyIF9kYXRhX3RlbXAgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBfaiA9IDA7IF9qIDwgZGF0YVtfaTZdLmxlbmd0aDsgX2orKykgewogICAgICAgICAgICBfZGF0YV90ZW1wLnB1c2goewogICAgICAgICAgICAgICJOdW0ocmVzcG9uc2UpIjogZGF0YVtfaTZdW19qXVszXSwKICAgICAgICAgICAgICAiVGltZShyZXNwb25zZSkiOiBkYXRhW19pNl1bX2pdWzBdLAogICAgICAgICAgICAgICJyZWNlaXZlZCBJUyI6IGRhdGFbX2k2XVtfal1bMV0sCiAgICAgICAgICAgICAgInJlY2VpdmVkIEVTIjogZGF0YVtfaTZdW19qXVsyXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gLy/liqDkuIrkurrmlbDmr5TkvosKCgogICAgICAgICAgc3ZnX2Rpc3RyaWJ1dGlvbi5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydCArIDI0OCkuYXR0cigieSIsIDUxMCkuYXR0cigiZm9udC1zaXplIiwgMTApLnRleHQoIiUiKS5hdHRyKCJjbGFzcyIsICJwYXNzaXZlIGNsdXN0ZXIgbmFtZSIpOwogICAgICAgICAgc3ZnX2Rpc3RyaWJ1dGlvbi5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9zdGFydCArIDI0MCkuYXR0cigieSIsIHlzY2FsZShfaTYpICsgMTAwIC8gY2x1c3Rlcl9udW1iZXIgLyAyIC0gNikuYXR0cigid2lkdGgiLCAyNSkuYXR0cigiaGVpZ2h0IiwgMTIpLmF0dHIoImZpbGwiLCBfdGhpcy5udW1iZXJfY29sb3IpLnN0eWxlKCJzdHJva2UiLCAibm9uZSIpLnN0eWxlKCJvcGFjaXR5IiwgMC41KS5hdHRyKCJjbGFzcyIsICJwYXNzaXZlIGNsdXN0ZXIgbmFtZSIpOwogICAgICAgICAgc3ZnX2Rpc3RyaWJ1dGlvbi5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydCArIDI0MCkuYXR0cigieSIsIHlzY2FsZShfaTYpICsgMTAwIC8gY2x1c3Rlcl9udW1iZXIgLyAyICsgNCkuYXR0cigiZm9udC1zaXplIiwgMTApLnRleHQoKF9kYXRhX3RlbXAubGVuZ3RoIC8gcGVvcGxlX3N1bSkudG9GaXhlZCgzKSkuYXR0cigiY2xhc3MiLCAicGFzc2l2ZSBjbHVzdGVyIG5hbWUiKTsKCiAgICAgICAgICBfdGhpcy5kcmF3RWFjaEJveHBsb3QoMSwgX2RhdGFfdGVtcCwgc3ZnX2Rpc3RyaWJ1dGlvbiwgeV9zdGFydCwgeXNjYWxlKF9pNiksIDEzMCAvIGNsdXN0ZXJfbnVtYmVyLCB4c2NhbGUsIDI1MCAvIGF0dHJpYnV0ZV9udW1iZXIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGRyYXdUaXRsZTogZnVuY3Rpb24gZHJhd1RpdGxlKGZsYWcsIHRleHQsIHN2ZywgeF9zdGFydCwgeV9zdGFydCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOyAvL+WQjeWtlwoKCiAgICAgIHN2Zy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChmbGFnID09IDApIHsKICAgICAgICAgIHJldHVybiB4X3N0YXJ0IC0gMTM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB4X3N0YXJ0IC0gMTU7CiAgICAgICAgfQogICAgICB9KS5hdHRyKCJ5IiwgeV9zdGFydCArIDMpLmF0dHIoImZvbnQtc2l6ZSIsIDE1KS50ZXh0KHRleHQpOyAvLyDkuK3pl7TliqDkuIDkuKrlhpLlj7cKCiAgICAgIHN2Zy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChmbGFnID09IDApIHsKICAgICAgICAgIHJldHVybiB4X3N0YXJ0ICsgNDY7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB4X3N0YXJ0ICsgNDI7CiAgICAgICAgfQogICAgICB9KS5hdHRyKCJ5IiwgeV9zdGFydCArIDMpLmF0dHIoImZvbnQtc2l6ZSIsIDE1KS50ZXh0KCI6Iik7IC8v546w5Zyo6YCJ5oup55qEa+WAvOaYr+WkmuWwkQoKICAgICAgc3ZnLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCB4X3N0YXJ0ICsgNTApLmF0dHIoInkiLCB5X3N0YXJ0ICsgNCkuYXR0cigiZm9udC1zaXplIiwgMTUpLnRleHQoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChmbGFnID09IDApIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5hY3RpdmVfazsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIF90aGlzLnBhc3NpdmVfazsKICAgICAgICB9CiAgICAgIH0pLmF0dHIoImNsYXNzIiwgImt2YWx1ZSAiICsgZmxhZyk7CiAgICAgIHZhciBzbGlkZXIgPSBzbGlkZXJCb3R0b20oKS50aWNrcygwKS5taW4oMSkubWF4KDEwKS5zdGVwKDEpLndpZHRoKDE1MCkuaGFuZGxlKGQzLnN5bWJvbCgpLnR5cGUoZDMuc3ltYm9sQ2lyY2xlKS5zaXplKDEwMCkoKSkuZGlzcGxheVZhbHVlKGZhbHNlKS5vbignb25jaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAoZmxhZyA9PSAwKSB7CiAgICAgICAgICBfdGhpcy5hY3RpdmVfayA9IHZhbHVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5wYXNzaXZlX2sgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0pLmRlZmF1bHQoNSkuZmlsbChbX3RoaXMuc2xpZGVyX2NvbG9yXSk7CiAgICAgIHZhciBnID0gc3ZnLmFwcGVuZCgnZycpLmF0dHIoJ3RyYW5zZm9ybScsICJ0cmFuc2xhdGUoOTAsIiArIHlfc3RhcnQgKyAiKSIpOwogICAgICBnLmNhbGwoc2xpZGVyKTsKICAgIH0sCiAgICBkcmF3S0lucHV0OiBmdW5jdGlvbiBkcmF3S0lucHV0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN2Z19zZWxlY3QgPSBkMy5zZWxlY3QoIi5iZWhhdmlvcnZpZXdib2R5IikuYXBwZW5kKCJzdmciKS5hdHRyKCJ3aWR0aCIsIDMwMCkuYXR0cigiaGVpZ2h0IiwgNzUwKS5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJzdmciKTsgLy8g6YCJ5oup5Li75Yqo6KGM5Li655qE57G75Yir5pWw55uuCgogICAgICBfdGhpcy5kcmF3VGl0bGUoMCwgInByb2FjdGl2ZSIsIHN2Z19zZWxlY3QsIDIwLCAyNTApOyAvLyDpgInmi6nooqvliqjooYzkuLrnmoTnsbvliKvmlbDnm64KCgogICAgICBfdGhpcy5kcmF3VGl0bGUoMSwgInJlYWN0aXZlIiwgc3ZnX3NlbGVjdCwgMjAsIDQ4MCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/shengrui/Desktop/system_framework-main/frontend/src/components/BehaviormodeView/BehaviormodeView.js"],"names":["dataService","pipeService","sliderBottom","sliderLeft","d3","$","bin","range","name","components","props","computed","data","data_group1","data_group2","stroke_color","normal_color","boundingbox_color","distribution_color","box_color","median_color","number_color","slider_color","background_color","worse_distribution_color","active_k","passive_k","active_x","active_y","passive_x","passive_y","boxplot","min_max_list","x_deviation","watch","_this","remove","svg","select","append","attr","transmit_depression","drawDepressionDistribution","transmit_k","drawClusterDistribution","transmit_segment","msg","emitSegment","transmit_stage_summarization","emitStage","transmit_pattern","emitPattern","transmit_path","emitPath","text","mounted","drawLegend","drawKInput","onDataset","css","onAP","ap_list","i","includes","methods","g_legend","on","getMaxOfArray","numArray","Math","max","apply","getMinOfArray","min","console","log","width","height","svg_depression","svg_title","freq1","length","key","freq2","dataArray1","Object","entries","map","d","dataArray2","sort","a","b","reduce","acc","curr","lastBin","push","floor","x","scaleLinear","domain","y","area1","area","y0","y1","curve","curveBasis","area2","datum","svg_legend","xt","formatK","format","call","axisBottom","ticks","axisLeft","tickFormat","drawEachBoxplot","flag","y_start","yheight","xscale","xwidth","keys","t","data_temp","obj","p","data_sorted","ascending","q1","quantile","median","q3","interQuantileRange","center","xscale_temp","x1_line","x2_line","g_boxplot_control","g_boxplot","selectAll","enter","style","drawEachDistribution","bins","histogram","thresholds","yForHistogram","axis","axisTop","tickSizeOuter","tickSizeInner","x0","x1","x_start","attribute_number","cluster_number","svg_distribution","attributes","scaleBand","clusters","yscale","people_sum","j","toFixed","drawTitle","slider","step","handle","symbol","type","symbolCircle","size","displayValue","value","default","fill","g","svg_select"],"mappings":"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","sourcesContent":["import dataService from '../../service/dataService.js'\nimport pipeService from '../../service/pipeService.js'\nimport { sliderBottom, sliderLeft } from 'd3-simple-slider'\nimport * as d3 from 'd3'\nimport $ from 'jquery'\nimport { bin, range } from 'd3'\n\nexport default {\n    name: 'BehaviormodeView',\n    components: {\n    },\n    props: {\n    },\n    computed: {\n    },\n    data() {\n        return {\n            data_group1: '2020MHOT',\n            data_group2: '2020MHSW',\n            stroke_color: \"#D1B24D\", //条状图点击之后behavior view会相应加深，这是点击之后高亮的颜色\n            normal_color: '#2f3e46', //normal color\n            boundingbox_color: '#d9d9d9', //外面的长方形框框是什么颜色\n            distribution_color: '#C9CBD1',\n            box_color: '#C9CBD1',\n            median_color: '#404042',\n            number_color: 'white', //展现百分比的背景是什么颜色\n            slider_color: '#C9CBD1',\n            background_color: 'white',\n            worse_distribution_color: '#432818',\n            active_k: 5,\n            passive_k: 5,\n            active_x: 30, //active的分布从哪里开始画\n            active_y: 300,\n            passive_x: 30,\n            passive_y: 530,\n            boxplot: 0,\n            min_max_list: { \"Fre(post)\": [0, 20], \"interval\": [0, 14], \"sought IS\": [0, 3], \"sought ES\": [0, 3], \"toxicity\": [0, 1], \"Time(response)\": [1, 3], \"received IS\": [0, 3], \"received ES\": [0, 3], \"Num(response)\": [0, 3] },\n            x_deviation: { \"Fre(post)\": 2, \"interval\": 7, \"sought IS\": 1, \"sought ES\": 2, \"toxicity\": 7, \"Num(response)\": -7, \"Time(response)\": 0, \"received IS\": 10, \"received ES\": 5 },\n        }\n    },\n    watch: {\n        data_group1: function() {\n            const _this = this\n            $('.clusterdistribution').remove()\n            $('.depressiondistribution').remove()\n            $('.progressionoverview').remove()\n            $('.progressionstage').remove()\n            $(\".patternresult\").remove()\n            $(\".pattern\").remove()\n            $(\".path\").remove()\n            const svg = d3.select(\".stageviewbody\")\n                .append(\"svg\")\n                .attr(\"width\", 900)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"progressionstage\")\n            dataService.transmit_depression([_this.data_group1, _this.data_group2], (data) => {\n                _this.drawDepressionDistribution(data)\n            })\n            dataService.transmit_k([_this.data_group1, _this.data_group2, _this.active_k, _this.passive_k], (data) => {\n                _this.drawClusterDistribution(0, data[0], _this.active_x, _this.active_y)\n                _this.drawClusterDistribution(1, data[1], _this.passive_x, _this.passive_y)\n                dataService.transmit_segment([_this.data_group1, _this.data_group2], (msg) => {\n                    pipeService.emitSegment(msg)\n                })\n                dataService.transmit_stage_summarization([_this.data_group1, _this.data_group2], (msg) => {\n                    //console.log(\"transmit_stage_summarization\", msg)\n                    pipeService.emitStage([_this.active_k, _this.passive_k, msg])\n                })\n                dataService.transmit_pattern([_this.data_group1, _this.data_group2], (msg) => {\n                    pipeService.emitPattern(msg)\n                })\n                dataService.transmit_path([_this.data_group1, _this.data_group2], (msg) => {\n                    pipeService.emitPath(msg)\n                })\n            })\n        },\n        data_group2: function(){\n            const _this = this\n            $('.clusterdistribution').remove()\n            $('.depressiondistribution').remove()\n            $('.progressionoverview').remove()\n            $('.progressionstage').remove()\n            $(\".patternresult\").remove()\n            $(\".pattern\").remove()\n            $(\".path\").remove()\n            const svg = d3.select(\".stageviewbody\")\n                .append(\"svg\")\n                .attr(\"width\", 900)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"progressionstage\")\n            dataService.transmit_depression([_this.data_group1, _this.data_group2], (data) => {\n                _this.drawDepressionDistribution(data)\n            })\n            dataService.transmit_k([_this.data_group1, _this.data_group2, _this.active_k, _this.passive_k], (data) => {\n                _this.drawClusterDistribution(0, data[0], _this.active_x, _this.active_y)\n                _this.drawClusterDistribution(1, data[1], _this.passive_x, _this.passive_y)\n                dataService.transmit_segment([_this.data_group1, _this.data_group2], (msg) => {\n                    pipeService.emitSegment(msg)\n                })\n                dataService.transmit_stage_summarization([_this.data_group1, _this.data_group2], (msg) => {\n                    //console.log(\"transmit_stage_summarization\", msg)\n                    pipeService.emitStage([_this.active_k, _this.passive_k, msg])\n                })\n                dataService.transmit_pattern([_this.data_group1, _this.data_group2], (msg) => {\n                    pipeService.emitPattern(msg)\n                })\n                dataService.transmit_path([_this.data_group1, _this.data_group2], (msg) => {\n                    pipeService.emitPath(msg)\n                })\n            })\n        },\n        boxplot: function () {\n            const _this = this\n            if (_this.boxplot == 1) {\n                $(\".boxplot\").attr(\"fill\", _this.distribution_color)\n                $(\".distribution.boxplot\").attr(\"visibility\", \"visible\")\n            } else {\n                $(\".boxplot\").attr(\"fill\", _this.background_color)\n                $(\".distribution.boxplot\").attr(\"visibility\", \"hidden\")\n            }\n        },\n        active_k: function () {\n            const _this = this\n            $(\".kvalue.0\").text(_this.active_k)\n            dataService.transmit_k([_this.data_group1, _this.data_group2, _this.active_k, _this.passive_k], (data) => {\n                $(\".distribution.content.0\").remove()\n                $(\".distribution.boundingbox.0\").remove()\n                $(\".distribution.axis\").remove()\n                //$(\".passive.cluster.name\").remove()\n                $(\".active.cluster.name\").remove()\n                _this.drawClusterDistribution(0, data[0], _this.active_x, _this.active_y)\n                // dataService.transmit_segment(\"1\", (msg) => {\n                //     _this.pipeService.emitSegment(msg)\n                // })\n                // dataService.transmit_stage_summarization(\"1\", (msg) => {\n                //     _this.pipeService.emitStage([_this.active_k, _this.passive_k, msg])\n                // })\n            })\n        },\n        passive_k: function () {\n            const _this = this\n            //console.log(\"passive\", _this.passive_k)\n            $(\".kvalue.1\").text(_this.passive_k)\n            dataService.transmit_k([_this.data_group1, _this.data_group2, _this.data_group1, _this.data_group2, _this.active_k, _this.passive_k], (data) => {\n                $(\".distribution.content.1\").remove()\n                $(\".distribution.boundingbox.1\").remove()\n                $(\".distribution.axis\").remove()\n                $(\".passive.cluster.name\").remove()\n                //$(\".active.cluster.name\").remove()\n                _this.drawClusterDistribution(1, data[1], _this.passive_x, _this.passive_y)\n                // dataService.transmit_segment(\"1\", (msg) => {\n                //     _this.pipeService.emitSegment(msg)\n                // })\n                // dataService.transmit_stage_summarization(\"1\", (msg) => {\n                //     _this.pipeService.emitStage([_this.active_k, _this.passive_k, msg])\n                // })\n            })\n        },\n    },\n    mounted: function () {\n        const _this = this\n        _this.drawLegend()\n        _this.drawKInput()\n        pipeService.onDataset(function(data){\n            _this.data_group1 = data[0]\n            _this.data_group2 = data[1]\n        })\n        dataService.transmit_depression([_this.data_group1, _this.data_group2], (data) => {\n            _this.drawDepressionDistribution(data)\n        })\n        dataService.transmit_k([_this.data_group1, _this.data_group2, _this.active_k, _this.passive_k], (data) => {\n            _this.drawClusterDistribution(0, data[0], _this.active_x, _this.active_y)\n            _this.drawClusterDistribution(1, data[1], _this.passive_x, _this.passive_y)\n            dataService.transmit_segment([_this.data_group1, _this.data_group2], (msg) => {\n                pipeService.emitSegment(msg)\n            })\n            dataService.transmit_stage_summarization([_this.data_group1, _this.data_group2], (msg) => {\n                //console.log(\"transmit_stage_summarization\", msg)\n                pipeService.emitStage([_this.active_k, _this.passive_k, msg])\n            })\n            dataService.transmit_pattern([_this.data_group1, _this.data_group2], (msg) => {\n                pipeService.emitPattern(msg)\n            })\n            dataService.transmit_path([_this.data_group1, _this.data_group2], (msg) => {\n                pipeService.emitPath(msg)\n            })\n        })\n        $(\".active.\" + _this.active_k).css(\"fill\", \"red\")\n        $(\".passive.\" + _this.passive_k).css(\"fill\", \"red\")\n        pipeService.onAP(function (ap_list) {\n            for (let i = 1; i < _this.active_k + 1; i++) {\n                if (ap_list.includes(('a' + i))) {\n                    $('.bg.a' + i).attr(\"visibility\", \"visable\")\n                } else {\n                    $('.bg.a' + i).attr(\"visibility\", \"hidden\")\n                }\n\n            }\n            for (let i = 1; i < _this.passive_k + 1; i++) {\n                if (ap_list.includes(('p' + i))) {\n                    $('.bg.p' + i).attr(\"visibility\", \"visable\")\n                } else {\n                    $('.bg.p' + i).attr(\"visibility\", \"hidden\")\n                }\n\n            }\n        })\n    },\n    methods: {\n        drawLegend() {\n            const _this = this\n            const svg = d3.select(\".behaviorviewheader\")\n                .append(\"svg\")\n                .attr(\"width\", 110)\n                .attr(\"height\", 20)\n\n            let g_legend = svg.append('g')\n\n            g_legend.append(\"rect\")\n                .attr(\"x\", 13)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.background_color)\n                .attr(\"stroke\", \"black\")\n                .on(\"click\", function () {\n                    _this.boxplot = 1 - _this.boxplot\n                })\n                .attr(\"class\", \"boxplot\")\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 27)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 13)\n                .text(\"boxplot\")\n            \n            g_legend.append(\"circle\")\n                .attr(\"cx\", 104)\n                .attr(\"cy\", 7)\n                .attr(\"r\", 5)\n                .attr(\"fill\", \"white\")\n                .attr(\"stroke\", \"red\")\n            \n            g_legend.append(\"text\")\n                .attr(\"x\", 101)\n                .attr(\"y\", 10)\n                .attr(\"font-size\", 8)\n                .text(\"?\")\n                .attr(\"fill\", \"#bc4b51\")\n        },\n        getMaxOfArray(numArray) {\n            return Math.max.apply(null, numArray);\n        },\n        getMinOfArray(numArray) {\n            return Math.min.apply(null, numArray);\n        },\n        drawDepressionDistribution(data) {\n            console.log(data)\n            const _this = this\n            const width = 270\n            const height = 170\n            const svg_depression = d3.select(\".svg\").append('g').attr(\"transform\", \"translate(0, 30)\").attr(\"class\", \"depressiondistribution\")\n\n            const svg_title = d3.select(\".svg\").append('g').attr(\"class\", \"depressiondistribution\")\n\n            svg_title.append(\"text\")\n                .attr(\"x\", 5)\n                .attr(\"y\", 20)\n                .attr(\"font-size\", 15)\n                .text(\"depression\")\n\n            // 进行频率统计\n            const freq1 = {};\n            for (let i = 0; i < data[0].length; i++) {\n                const key = data[0][i];\n                freq1[key] = (freq1[key] || 0) + 1;\n            }\n            const freq2 = {};\n            for (let i = 0; i < data[1].length; i++) {\n                const key = data[1][i];\n                freq2[key] = (freq2[key] || 0) + 1;\n            }\n            // 将频率统计结果转换为数组\n            let dataArray1 = Object.entries(freq1).map(d => [+d[0], d[1]]);\n            let dataArray2 = Object.entries(freq2).map(d => [+d[0], d[1]]);\n\n            const bin = 0.3\n\n            dataArray1.sort((a, b) => a[0] - b[0])\n            dataArray2.sort((a, b) => a[0] - b[0])\n\n            dataArray1 = dataArray1.reduce((acc, curr) => {\n                const lastBin = acc.length > 0 ? acc[acc.length - 1][0] : null;\n                if (lastBin !== null && curr[0] <= lastBin + bin) {\n                    acc[acc.length - 1][1] += curr[1];\n                } else {\n                    acc.push([Math.floor(curr[0] / bin) * bin, curr[1]]);\n                }\n                return acc;\n            }, []);\n\n            dataArray2 = dataArray2.reduce((acc, curr) => {\n                const lastBin = acc.length > 0 ? acc[acc.length - 1][0] : null;\n                if (lastBin !== null && curr[0] <= lastBin + bin) {\n                    acc[acc.length - 1][1] += curr[1];\n                } else {\n                    acc.push([Math.floor(curr[0] / bin) * bin, curr[1]]);\n                }\n                return acc;\n            }, []);\n\n            let x = d3.scaleLinear().domain([0.85, d3.max(dataArray1.length > dataArray2.length ? dataArray1 : dataArray2, d => d[0])]).range([20, width]);\n            let y = d3.scaleLinear().domain([0, d3.max(dataArray1, d => d[1])]).range([height, 0]);\n\n            let area1 = d3.area().x(d => x(d[0])).y0(height).y1(d => y(d[1])).curve(d3.curveBasis);\n            let area2 = d3.area().x(d => x(d[0])).y0(height).y1(d => y(d[1])).curve(d3.curveBasis);\n\n            // 绘制区域图\n            svg_depression.append(\"defs\")\n                .append(\"pattern\")\n                .attr(\"id\", \"diagonal-stripe\")\n                .attr(\"patternUnits\", \"userSpaceOnUse\")\n                .attr(\"width\", 5)\n                .attr(\"height\", 5)\n                .append(\"path\")\n                .attr(\"d\", \"M-1,1 l2,-2 M0,5 l5,-5 M9,11 l2,-2\")\n                .attr(\"stroke\", _this.worse_distribution_color)\n                .attr(\"stroke-width\", 1)\n\n            svg_depression.append(\"path\")\n                .datum(dataArray1)\n                .attr(\"fill\", _this.distribution_color)\n                .attr(\"d\", area1)\n                .attr(\"opacity\", 0.5)\n                .attr(\"stroke\", \"black\")\n\n            svg_depression.append(\"path\")\n                .datum(dataArray2)\n                .attr(\"fill\", _this.distribution_color)\n                .attr(\"d\", area2)\n                .attr(\"opacity\", 0.5)\n                .attr(\"stroke\", \"black\")\n                .attr(\"fill\", \"url(#diagonal-stripe)\")\n\n\n            // 绘制legend\n            let svg_legend = svg_depression.append('g')\n            svg_legend.append('rect')\n                .attr(\"x\", 230)\n                .attr(\"y\", 10)\n                .attr(\"height\", 10)\n                .attr(\"width\", 10)\n                .attr(\"fill\", _this.distribution_color)\n                .attr(\"stroke\", \"black\")\n                .attr(\"opacity\", 0.5)\n\n            svg_legend.append('text')\n                .attr(\"x\", 245)\n                .attr(\"y\", 18)\n                .attr(\"font-size\", 12)\n                .text(\"group1\")\n\n            svg_legend.append('rect')\n                .attr(\"x\", 230)\n                .attr(\"y\", 30)\n                .attr(\"height\", 10)\n                .attr(\"width\", 10)\n                .attr(\"fill\", \"url(#diagonal-stripe)\")\n\n            svg_legend.append('rect')\n                .attr(\"x\", 230)\n                .attr(\"y\", 30)\n                .attr(\"height\", 10)\n                .attr(\"width\", 10)\n                .attr(\"fill\", _this.distribution_color)\n                .attr(\"stroke\", \"black\")\n                .attr(\"opacity\", 0.5)\n\n            svg_legend.append('text')\n                .attr(\"x\", 245)\n                .attr(\"y\", 38)\n                .attr(\"font-size\", 12)\n                .text(\"group2\")\n            let xt = 3\n            svg_legend.append('rect')\n                .attr(\"x\", 241 - xt)\n                .attr(\"y\", 200)\n                .attr(\"height\", 10)\n                .attr(\"width\", 27)\n                .attr(\"fill\", 'none')\n                .attr(\"stroke\", \"black\")\n                .attr(\"opacity\", 0.5)\n            \n            svg_legend.append('rect')\n                .attr(\"x\", 254 - xt)\n                .attr(\"y\", 200)\n                .attr(\"height\", 10)\n                .attr(\"width\", 2)\n                .attr(\"fill\", 'black')\n                .attr(\"stroke\", \"black\")\n                .attr(\"opacity\", 0.4)\n\n            svg_legend.append('text')\n                .attr(\"x\", 220 - xt)\n                .attr(\"y\", 210)\n                .attr(\"font-size\", 12)\n                .text(\"low\")\n            \n            svg_legend.append('text')\n                .attr(\"x\", 270 - xt)\n                .attr(\"y\", 210)\n                .attr(\"font-size\", 12)\n                .text(\"high\")\n\n            var formatK = d3.format(\"d\")\n\n            // 添加 X 轴\n            svg_depression.append(\"g\")\n                .attr(\"transform\", \"translate(0,\" + height + \")\")\n                .call(d3.axisBottom(x).ticks(5));\n\n            // 添加 Y 轴\n            svg_depression.append(\"g\").attr(\"transform\", \"translate(25, 0)\")\n                .call(d3.axisLeft(y).ticks(5).tickFormat(function (d) {\n                    return formatK(d / 1000) + 'k'\n                }))\n        },\n        drawEachBoxplot(flag, data, svg, y_start, y1, yheight, xscale, xwidth) {\n            const _this = this\n            // 数据格式为第n个类别，横坐标分布从x_start到x_end，然后画出里面每个attribute的分布\n            // data表示这一个类别的所有数据\n            let key = Object.keys(data[0])\n            for (let t = 0; t < key.length; t++) {\n                //写每一个attribute的名字\n                if (flag == 0) {\n                    svg.append(\"text\")\n                        .attr(\"x\", xscale(t) + _this.x_deviation[key[t]])\n                        .attr(\"y\", y_start - 20)\n                        .attr(\"font-size\", 11)\n                        .text(key[t])\n                        .attr(\"opacity\", 0.3)\n                } else {\n                    svg.append(\"text\")\n                        .attr(\"x\", xscale(t) + _this.x_deviation[key[t]])\n                        .attr(\"y\", y_start - 20)\n                        .attr(\"font-size\", 10)\n                        .text(key[t])\n                        .attr(\"opacity\", 0.3)\n                }\n\n                let height = yheight - 5\n                let data_temp = data.map(obj => { return obj[key[t]] })\n\n                //对于过大的值处理掉，设置一个上限\n                for (let p = 0; p < data_temp.length; p++) {\n                    if (data_temp[p] > _this.min_max_list[key[t]][1]) {\n                        data_temp[p] = _this.min_max_list[key[t]][1]\n                    }\n                }\n\n                var data_sorted = data_temp.sort(d3.ascending)\n                var q1 = d3.quantile(data_sorted, .25)\n                var median = d3.quantile(data_sorted, .5)\n                var q3 = d3.quantile(data_sorted, .75)\n                if (median == q1 || median == q3) {\n                    median = (q1 + q3) / 2\n                }\n                var interQuantileRange = q3 - q1\n                var min = q1 - 1.5 * interQuantileRange\n                var max = q1 + 1.5 * interQuantileRange\n\n                // ***********不能超过最大最小范围*****************\n                if (min < _this.min_max_list[key[t]][0]) { //最小值不会为负\n                    min = _this.min_max_list[key[t]][0]\n                }\n                if (max > _this.min_max_list[key[t]][1]) {\n                    max = _this.min_max_list[key[t]][1]\n                }\n                // *********************************************\n\n                var center = y1 + height / 2//中心线应该画在哪里\n\n                var xscale_temp = d3.scaleLinear()\n                    .range([xscale(t) + 6, xscale(t) + xwidth - 6])\n                    .domain([_this.min_max_list[key[t]][0], _this.min_max_list[key[t]][1]])\n\n                // 如果这个值是有意义的，即q1, median, q3, max != -1，则画盒图\n\n                //出现max, min同一个值，为了看得更清楚，让其距离为2\n                var x1_line = xscale_temp(min)\n                var x2_line = xscale_temp(max)\n                if (max - min < _this.min_max_list[key[t]][1] * 0.1) {\n                    if (min == _this.min_max_list[key[t]][0]) {\n                        x2_line = xscale_temp(max) + 2\n                    } else {\n                        x1_line = xscale_temp(min) - 2\n                    }\n                }\n\n                var g_boxplot_control = svg.append('g')\n                    .attr(\"width\", 100)\n                    .attr(\"height\", 200)\n                    .attr(\"class\", \"distribution boxplot \" + flag)\n                    .attr(\"visibility\", \"hidden\")\n\n                var g_boxplot = svg.append('g')\n                    .attr(\"width\", 100)\n                    .attr(\"height\", 200)\n                    .attr(\"class\", \"distribution content \" + flag)\n\n                if (max != -1) {\n                    // show median horizontal lines\n                    g_boxplot.selectAll(\"toto\")\n                        .data([xscale_temp(median)])\n                        .enter()\n                        .append(\"line\")\n                        .attr(\"x1\", function (d) { return d })\n                        .attr(\"x2\", function (d) { return d })\n                        .attr(\"y1\", y1)\n                        .attr(\"y2\", y1 + height)\n                        .attr(\"stroke\", _this.median_color)\n                        .attr(\"stroke-width\", 3)\n                        .attr(\"opacity\", 0.5)\n                    //先画中心的线\n                    g_boxplot_control.append(\"line\")\n                        .attr(\"x1\", x1_line)\n                        .attr(\"x2\", x2_line)\n                        .attr(\"y1\", center)\n                        .attr(\"y2\", center)\n                        .attr(\"stroke\", _this.boundingbox_color)\n\n                    // Show the box\n                    g_boxplot_control.append(\"rect\")\n                        .attr(\"x\", xscale_temp(q1))\n                        .attr(\"y\", y1 + height / 3)\n                        .attr(\"height\", height / 3)\n                        .attr(\"width\", function () {\n                            if (xscale_temp(q3) - xscale_temp(q1) == 0) {\n                                return 2\n                            } else {\n                                return xscale_temp(q3) - xscale_temp(q1)\n                            }\n                        })\n                        .attr(\"stroke\", _this.boundingbox_color)\n                        .style(\"fill\", _this.box_color)\n\n                    // show min and max horizontal lines\n                    g_boxplot_control.selectAll(\"toto\")\n                        .data([x1_line, x2_line])\n                        .enter()\n                        .append(\"line\")\n                        .attr(\"x1\", function (d) { return d })\n                        .attr(\"x2\", function (d) { return d })\n                        .attr(\"y1\", y1 + height / 3)\n                        .attr(\"y2\", y1 + height / 3 * 2)\n                        .attr(\"stroke\", _this.boundingbox_color)\n                } else {\n                    g_boxplot.append(\"line\")\n                        .attr(\"x1\", xscale(t) + 6)\n                        .attr(\"x2\", xscale(t) + xwidth - 6)\n                        .attr(\"y1\", center)\n                        .attr(\"y2\", center)\n                        .attr(\"stroke\", _this.boundingbox_color)\n                        .attr(\"stroke-dasharray\", \"3, 5\")\n                }\n\n                // 画框\n                svg.append(\"rect\")\n                    .attr(\"x\", xscale(t))\n                    .attr(\"y\", y1)\n                    .attr(\"width\", xwidth - 2)\n                    .attr(\"height\", height)\n                    .attr(\"opacity\", 0.2)\n                    .style(\"stroke\", _this.normal_color)\n                    .style(\"fill\", \"none\")\n                    .attr(\"class\", \"distribution boundingbox \" + flag)\n            }\n        },\n        drawEachDistribution(flag, data, svg, y_start, y1, yheight, xscale, xwidth) {\n            const _this = this\n            // 数据格式为第n个类别，横坐标分布从x_start到x_end，然后画出里面每个attribute的分布\n            let key = Object.keys(data[0])\n            //console.log(key)\n            for (let t = 0; t < key.length; t++) {\n                //写每一个attribute的名字\n                if (flag == 0) {\n                    svg.append(\"text\")\n                        .attr(\"x\", xscale(t) + (10 - key[t].length) / 0.5 + 8)\n                        .attr(\"y\", y_start - 20)\n                        .attr(\"font-size\", 7)\n                        .text(key[t])\n                } else {\n                    svg.append(\"text\")\n                        .attr(\"x\", xscale(t) + (10 - key[t].length) / 0.5 + 15)\n                        .attr(\"y\", y_start - 20)\n                        .attr(\"font-size\", 7)\n                        .text(key[t])\n                }\n\n                let height = yheight - 5\n                let data_temp = data.map(obj => { return obj[key[t]] })\n                //console.log(key[t], _this.getMinOfArray(data_temp), _this.getMaxOfArray(data_temp))\n                var x = d3.scaleLinear().domain([_this.min_max_list[key[t]][0], _this.min_max_list[key[t]][1]]).range([xscale(t) + 5, xscale(t) + xwidth - 5])\n                var bins = d3.histogram().domain(x.domain()).thresholds(x.ticks(30))(data_temp)\n                var max = d3.max(bins, function (d) { return d.y })\n                var y = d3.scaleLinear().domain([0, .1]).range([y1, y1 + 30])\n                var yForHistogram = d3.scaleLinear()\n                    .domain([0, d3.max(bins, function (d) {\n                        return d.length\n                    })])\n                    .range([height, 0])\n\n                // 在每个attribute下画坐标轴\n                var axis = d3.axisTop(x).ticks(3).tickSizeOuter(3).tickSizeInner(1)\n                svg.append(\"g\")\n                    .attr(\"transform\", \"translate(0,\" + (y_start - 10) + \")\")\n                    .call(axis)\n                    .style(\"font-size\", \"5px\")\n                    .attr(\"class\", \"distribution axis\")\n\n                for (let p = 0; p < bins.length; p++) {\n                    svg.append(\"rect\")\n                        .attr(\"x\", x(bins[p].x0))\n                        .attr(\"y\", yForHistogram(bins[p].length) + y1)\n                        .attr(\"fill\", _this.distribution_color)\n                        .attr(\"width\", x(bins[0].x1) - x(bins[0].x0))\n                        .attr(\"height\", function (d) {\n                            return height - yForHistogram(bins[p].length)\n                        })\n                        .attr(\"class\", \"distribution content\")\n                }\n                svg.append(\"rect\")\n                    .attr(\"x\", xscale(t))\n                    .attr(\"y\", y1)\n                    .attr(\"width\", xwidth - 2)\n                    .attr(\"height\", height)\n                    .attr(\"opacity\", 0.3)\n                    .style(\"stroke\", _this.normal_color)\n                    .style(\"fill\", \"none\")\n                    .attr(\"class\", \"distribution boundingbox\")\n            }\n        },\n        drawClusterDistribution(flag, data, x_start, y_start) {\n            let attribute_number = data[0][0].length\n            let cluster_number = data.length\n            const _this = this\n            const svg_distribution = d3.select(\".svg\").append(\"g\").attr(\"class\", \"clusterdistribution\")\n\n            var attributes = [];\n            for (let i = 0; i < attribute_number; i++) {\n                attributes.push(i);\n            }\n\n            const xscale = d3.scaleBand()\n                .range([x_start - 10, x_start + 240])\n                .domain(attributes)\n\n            var clusters = [];\n            for (let i = 0; i < cluster_number; i++) {\n                clusters.push(i);\n            }\n\n            const yscale = d3.scaleBand()\n                .range([y_start - 15, y_start + 170])\n                .domain(clusters)\n\n            var people_sum = 0\n            for (let i = 0; i < cluster_number; i++) {\n                people_sum = people_sum + data[i].length\n            }\n\n            // 写上总人数\n            if (flag == 0) {\n                svg_distribution.append(\"text\")\n                    .attr(\"x\", x_start + 175)\n                    .attr(\"y\", 20)\n                    .attr(\"font-size\", 15)\n                    .text(\"sum : \" + people_sum)\n                    .attr(\"class\", \"active cluster name\")\n            }\n\n            if (flag == 0) {\n                //主动\n                for (let i = 0; i < cluster_number; i++) {\n                    //写cluster的序号\n                    //console.log(x_start, yscale[i], clusters)\n                    svg_distribution.append(\"rect\")\n                        .attr(\"x\", x_start - 29)\n                        .attr(\"y\", yscale(i) - 3)\n                        .attr(\"height\", yscale(1) - yscale(0) - 10)\n                        .attr(\"width\", 296)\n                        .attr(\"class\", \"bg a\" + (i + 1))\n                        .attr(\"fill\", _this.stroke_color)\n                        .attr(\"opacity\", 0.08)\n                        .attr(\"visibility\", \"hidden\")\n\n                    svg_distribution.append(\"text\")\n                        .attr(\"x\", x_start - 28)\n                        .attr(\"y\", yscale(i) + 100 / cluster_number / 2 + 5)\n                        .attr(\"font-size\", 13)\n                        .text(\"p\" + (i + 1))\n                        .attr(\"class\", \"active cluster name\")\n\n                    let data_temp = []\n                    for (let j = 0; j < data[i].length; j++) {\n                        data_temp.push({\n                            \"Fre(post)\": data[i][j][0],\n                            \"interval\": data[i][j][1],\n                            \"sought IS\": data[i][j][2],\n                            \"sought ES\": data[i][j][3],\n                            \"toxicity\": data[i][j][4]\n                        })\n                    }\n                    // 把这个组的人数放在最后面\n                    svg_distribution.append(\"text\")\n                        .attr(\"x\", x_start + 248)\n                        .attr(\"y\", 280)\n                        .attr(\"font-size\", 10)\n                        .text(\"%\")\n                        .attr(\"class\", \"active cluster name\")\n\n                    svg_distribution.append(\"rect\")\n                        .attr(\"x\", x_start + 240)\n                        .attr(\"y\", yscale(i) + 100 / cluster_number / 2 - 6)\n                        .attr(\"width\", 25)\n                        .attr(\"height\", 12)\n                        .attr(\"fill\", _this.number_color)\n                        .style(\"stroke\", \"none\")\n                        .style(\"opacity\", 0.5)\n                        .attr(\"class\", \"active cluster name\")\n\n                    svg_distribution.append(\"text\")\n                        .attr(\"x\", x_start + 240)\n                        .attr(\"y\", yscale(i) + 100 / cluster_number / 2 + 4)\n                        .attr(\"font-size\", 10)\n                        .text((data_temp.length / people_sum).toFixed(3))\n                        .attr(\"class\", \"active cluster name\")\n\n                    _this.drawEachBoxplot(0, data_temp, svg_distribution, y_start, yscale(i), 130 / cluster_number, xscale, 250 / attribute_number)\n                }\n            } else {\n                for (let i = 0; i < cluster_number; i++) {\n                    //写cluster的序号\n                    // console.log(x_start, yscale[i], clusters)\n                    svg_distribution.append(\"rect\")\n                        .attr(\"x\", x_start - 28)\n                        .attr(\"y\", yscale(i) - 3)\n                        .attr(\"height\", yscale(1) - yscale(0) - 10)\n                        .attr(\"width\", 300)\n                        .attr(\"class\", \"bg p\" + (i + 1))\n                        .attr(\"fill\", _this.stroke_color)\n                        .attr(\"opacity\", 0.08)\n                        .attr(\"visibility\", \"hidden\")\n\n                    svg_distribution.append(\"text\")\n                        .attr(\"x\", x_start - 28)\n                        .attr(\"y\", yscale(i) + 100 / cluster_number / 2 + 5)\n                        .attr(\"font-size\", 13)\n                        .text(\"r\" + (i + 1))\n\n                    let data_temp = []\n                    for (let j = 0; j < data[i].length; j++) {\n                        data_temp.push({\n                            \"Num(response)\": data[i][j][3],\n                            \"Time(response)\": data[i][j][0],\n                            \"received IS\": data[i][j][1],\n                            \"received ES\": data[i][j][2],\n                        })\n                    }\n\n                    //加上人数比例\n                    svg_distribution.append(\"text\")\n                        .attr(\"x\", x_start + 248)\n                        .attr(\"y\", 510)\n                        .attr(\"font-size\", 10)\n                        .text(\"%\")\n                        .attr(\"class\", \"passive cluster name\")\n\n                    svg_distribution.append(\"rect\")\n                        .attr(\"x\", x_start + 240)\n                        .attr(\"y\", yscale(i) + 100 / cluster_number / 2 - 6)\n                        .attr(\"width\", 25)\n                        .attr(\"height\", 12)\n                        .attr(\"fill\", _this.number_color)\n                        .style(\"stroke\", \"none\")\n                        .style(\"opacity\", 0.5)\n                        .attr(\"class\", \"passive cluster name\")\n\n                    svg_distribution.append(\"text\")\n                        .attr(\"x\", x_start + 240)\n                        .attr(\"y\", yscale(i) + 100 / cluster_number / 2 + 4)\n                        .attr(\"font-size\", 10)\n                        .text((data_temp.length / people_sum).toFixed(3))\n                        .attr(\"class\", \"passive cluster name\")\n                    _this.drawEachBoxplot(1, data_temp, svg_distribution, y_start, yscale(i), 130 / cluster_number, xscale, 250 / attribute_number)\n                }\n            }\n        },\n        drawTitle(flag, text, svg, x_start, y_start) {\n            const _this = this\n            //名字\n\n            svg.append(\"text\")\n                .attr(\"x\", function () {\n                    if (flag == 0) {\n                        return x_start - 13\n                    } else {\n                        return x_start - 15\n                    }\n                })\n                .attr(\"y\", y_start + 3)\n                .attr(\"font-size\", 15)\n                .text(text)\n\n            // 中间加一个冒号\n            svg.append(\"text\")\n                .attr(\"x\", function(){\n                    if (flag == 0) {\n                        return x_start + 46\n                    } else {\n                        return x_start + 42\n                    }\n                })\n                .attr(\"y\", y_start + 3)\n                .attr(\"font-size\", 15)\n                .text(\":\")\n\n            //现在选择的k值是多少\n\n            svg.append(\"text\")\n                .attr(\"x\", x_start + 50)\n                .attr(\"y\", y_start + 4)\n                .attr(\"font-size\", 15)\n                .text(function () {\n                    if (flag == 0) {\n                        return _this.active_k\n                    } else {\n                        return _this.passive_k\n                    }\n                })\n                .attr(\"class\", \"kvalue \" + flag)\n\n            const slider = sliderBottom()\n                .ticks(0)\n                .min(1).max(10)\n                .step(1).width(150)\n                .handle(d3.symbol().type(d3.symbolCircle).size(100)())\n                .displayValue(false)\n                .on('onchange', (value) => {\n                    if (flag == 0) {\n                        _this.active_k = value\n                    } else {\n                        _this.passive_k = value\n                    }\n                })\n                .default(5)\n                .fill([_this.slider_color])\n\n            const g = svg\n                .append('g')\n                .attr('transform', \"translate(90,\" + (y_start) + \")\");\n\n            g.call(slider)\n        },\n        drawKInput() {\n            const _this = this\n            const svg_select = d3.select(\".behaviorviewbody\")\n                .append(\"svg\")\n                .attr(\"width\", 300)\n                .attr(\"height\", 750)\n                .append(\"g\")\n                .attr(\"class\", \"svg\")\n\n            // 选择主动行为的类别数目\n            _this.drawTitle(0, \"proactive\", svg_select, 20, 250)\n            // 选择被动行为的类别数目\n            _this.drawTitle(1, \"reactive\", svg_select, 20, 480)\n        }\n    }\n\n}"]}]}