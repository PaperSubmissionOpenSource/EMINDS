{"remainingRequest":"/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/babel-loader/lib/index.js!/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/shengrui/Desktop/system_framework-main/frontend/src/components/StageView/StageView.js?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shengrui/Desktop/system_framework-main/frontend/src/components/StageView/StageView.js","mtime":1693190549782},{"path":"/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1729690872023},{"path":"/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/babel-loader/lib/index.js","mtime":1729690872396},{"path":"/Users/shengrui/Desktop/system_framework-main/frontend/node_modules/eslint-loader/index.js","mtime":1729690872072}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9zaGVuZ3J1aS9EZXNrdG9wL3N5c3RlbV9mcmFtZXdvcmstbWFpbi9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0LnZhbHVlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5tYXRjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc2V0IjsKaW1wb3J0IHsgbGlua0hvcml6b250YWwsIHN2ZyB9IGZyb20gJ2QzJzsKaW1wb3J0IGRhdGFTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZGF0YVNlcnZpY2UuanMiOwppbXBvcnQgcGlwZVNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9waXBlU2VydmljZS5qcyI7CmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTdGFnZVZpZXcnLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7fSwKICBjb21wdXRlZDoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRleHRfY29sb3I6ICJibGFjayIsCiAgICAgIGNvbXBhcmlzb25fY29sb3I6ICcjODY4Qjk4JywKICAgICAgLy/mr5TovoPnmoTml7blgJnlvojkuI3lkIznmoTlhYPntKDkvJrooqvpq5jkuq7lh7rmnaUKICAgICAgY2lyY2xlX2NvbG9yOiAnIzlhOGM5OCcsCiAgICAgIC8v5ZyG5ZyI55qE6aKc6ImyCiAgICAgIGxpbmVfY29sb3I6ICcjZDhkYmUyJywKICAgICAgLy/mnIDlt6bovrnnur/nmoTpopzoibIKICAgICAgc3Ryb2tlX2NvbG9yOiAiI0NFQkI3RCIsCiAgICAgIC8v5p2h54q25Zu+54K55Ye75LmL5ZCOYmVoYXZpb3Igdmlld+S8muebuOW6lOWKoOa3se+8jOi/meaYr+eCueWHu+S5i+WQjueahOminOiJsgogICAgICBjb3JfdGVtcG9yYWxfY29sb3I6ICcjQ0VCQjdEJywKICAgICAgLy/lsZXnjrDlpJrnu7TluqbmlbDmja50ZW1wb3JhbOS/oeaBr+eahOiDjOaZrwogICAgICBub3RoaWdobGlnaHRfY29sb3I6ICJibGFjayIsCiAgICAgIC8v5q+P5Liqc3RhZ2XmnIDlpKfnmoTlpJbmoYYKICAgICAgaGlnaGxpZ2h0X2NvbG9yOiAnI0NFQkI3RCcsCiAgICAgIC8vcGF0dGVybiB2aWV354K55Ye75LmL5ZCO54K55Ye755qE5YWD57Sg5Lya6KKraGlnaGxpZ2h0LOS5n+WwseaYr+avj+S4qnN0YWdl6IOM5pmv6Imy5Lya6KKr5pS55Y+YCiAgICAgIGRpc3RyaWJ1dGlvbl9jb2xvcjogJyNDOUNCRDEnLAogICAgICBub3JtYWxfY29sb3I6ICcjMmYzZTQ2JywKICAgICAgc3RhZ2VfbmFtZTogJyNkNmNjYzInLAogICAgICBjb3JfY29sb3I6ICcjQzlDQkQxJywKICAgICAgYmFja2dyb3VuZF9jb2xvcjogJ3doaXRlJywKICAgICAgY291bnQ6IDAsCiAgICAgIC8vY29sb3JfbGlzdDogWyIjQjZCNkM2IiwgIiNBREI5QzEiLCAiI0FGQjVBNCIsICIjRUZFOEJEIiwgIiNlOWQxYjQiLCAiI2QyYWFhMyJdLAogICAgICBjb2xvcl9saXN0OiBbIiM3NjhmODkiLCAiI2FkYjQ5ZiIsICIjRUZFOEJEIiwgIiNlOWQxYjQiLCAiI2RkYmNhYiIsICIjZDJhYWEzIl0sCiAgICAgIC8vIGNvbG9yX2xpc3Q6IFsiI0I1QjVDNSIsICIjRTJDOUIzIiwgIiNFQ0MwQzAiLCAiI0NBRDVDMyIsICIjOUNCOENEIiwgIiNFM0M2QTkiXSwKICAgICAgc3RhZ2Vfc3RhcnQ6IDAsCiAgICAgIHN0YWdlX2ludGVydmFsOiAwLAogICAgICBzdGFnZV95X3N0YXJ0OiAwLAogICAgICBzdGFnZV9udW1iZXI6IDYsCiAgICAgIHRlbXBvcmFsOiAwLAogICAgICBoaWdobGlnaHRfbGlzdDogW10sCiAgICAgIGFjdGl2ZV9wYXNzaXZlOiBbXSwKICAgICAgc3RhZ2VzdGF0aXN0aWNzOiB7fSwKICAgICAgaGlnaGxpZ2h0X2NsYXNzOiBbXSwKICAgICAgbGFzdF9oaWdobGlnaHRfY2xhc3M6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGFjdGl2ZV9wYXNzaXZlOiBmdW5jdGlvbiBhY3RpdmVfcGFzc2l2ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHBpcGVTZXJ2aWNlLmVtaXRBUChfdGhpcy5hY3RpdmVfcGFzc2l2ZSk7CiAgICB9LAogICAgdGVtcG9yYWw6IGZ1bmN0aW9uIHRlbXBvcmFsKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLnRlbXBvcmFsID09IDEpIHsKICAgICAgICAkKCcudGVtcG9yYWwnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ3Zpc2FibGUnKTsKICAgICAgICAkKCcubm9uLXRlbXBvcmFsJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTsKICAgICAgICAkKCcudGVtcG9yYWwtY2xpY2snKS5hdHRyKCdmaWxsJywgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkKCcubm9uLXRlbXBvcmFsJykuYXR0cigndmlzaWJpbGl0eScsICd2aXNhYmxlJyk7CiAgICAgICAgJCgnLnRlbXBvcmFsJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTsKICAgICAgICAkKCcudGVtcG9yYWwtY2xpY2snKS5hdHRyKCdmaWxsJywgX3RoaXMuYmFja2dyb3VuZF9jb2xvcik7CiAgICAgIH0KICAgIH0sCiAgICBoaWdobGlnaHRfbGlzdDogZnVuY3Rpb24gaGlnaGxpZ2h0X2xpc3QoKSB7CiAgICAgIC8vY29uc29sZS5sb2codGhpcy5oaWdobGlnaHRfbGlzdCkKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMubGFzdF9oaWdobGlnaHRfY2xhc3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAkKF90aGlzLmxhc3RfaGlnaGxpZ2h0X2NsYXNzW2ldKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgfQoKICAgICAgdmFyIGRldmlhdGlvbl90aHJlc2hvbGQgPSAwLjAxOwogICAgICBfdGhpcy5oaWdobGlnaHRfY2xhc3MgPSBbXTsKICAgICAgdmFyIHN0YWdlX2hpZ2hsaWdodCA9IG5ldyBTZXQoKTsKCiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBfdGhpcy5zdGFnZV9udW1iZXI7IF9pKyspIHsKICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2xpc3QuaW5jbHVkZXMoX2kudG9TdHJpbmcoKSkpIHsKICAgICAgICAgICQoJy5zdGFnZV9iYWNrZ3JvdW5kMScgKyBfaS50b1N0cmluZygpKS5hdHRyKCJmaWxsIiwgX3RoaXMuaGlnaGxpZ2h0X2NvbG9yKS5hdHRyKCJvcGFjaXR5IiwgMC4xKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCgnLnN0YWdlX2JhY2tncm91bmQxJyArIF9pLnRvU3RyaW5nKCkpLmF0dHIoImZpbGwiLCAid2hpdGUiKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIF90aGlzLmxhc3RfaGlnaGxpZ2h0X2NsYXNzID0gX3RoaXMuaGlnaGxpZ2h0X2NsYXNzOwoKICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgX3RoaXMuaGlnaGxpZ2h0X2xpc3QubGVuZ3RoOyBfaTIrKykgewogICAgICAgIHN0YWdlX2hpZ2hsaWdodC5hZGQoX3RoaXMuaGlnaGxpZ2h0X2xpc3RbX2kyXSk7CiAgICAgIH0KCiAgICAgIHZhciB0eXBlcyA9IE9iamVjdC5rZXlzKF90aGlzLnN0YWdlc3RhdGlzdGljc1swXSk7CgogICAgICBpZiAoc3RhZ2VfaGlnaGxpZ2h0LnNpemUgPj0gMikgewogICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0eXBlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgICAgdmFyIHQgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgdmFyIHR5cGVzMiA9IE9iamVjdC5rZXlzKF90aGlzLnN0YWdlc3RhdGlzdGljc1swXVt0XSk7CgogICAgICAgICAgICBmb3IgKHZhciBfaTMgPSAwLCBfdHlwZXMgPSB0eXBlczI7IF9pMyA8IF90eXBlcy5sZW5ndGg7IF9pMysrKSB7CiAgICAgICAgICAgICAgdmFyIHQyID0gX3R5cGVzW19pM107CiAgICAgICAgICAgICAgdmFyIHRlbXBfYXJyID0gW107CiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTsKICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7CiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBzdGFnZV9oaWdobGlnaHRbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9zdGFnZSA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICAgICAgdGVtcF9hcnIucHVzaChfdGhpcy5zdGFnZXN0YXRpc3RpY3NbX3N0YWdlXVt0XVt0Ml0gLyBfdGhpcy5kaWN0U3VtKF90aGlzLnN0YWdlc3RhdGlzdGljc1tfc3RhZ2VdW3RdKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoX3RoaXMuY2FsY3VsYXRlVmFyaWFuY2UodGVtcF9hcnIpID49IGRldmlhdGlvbl90aHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgIC8v6LaF6L+H6ZiI5YC85bCx6auY5LquCiAgICAgICAgICAgICAgICB2YXIgayA9ICdkJzsKCiAgICAgICAgICAgICAgICBpZiAodCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgIGsgPSAnYSc7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHQgPT0gMikgewogICAgICAgICAgICAgICAgICBrID0gJ3AnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7CiAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBzdGFnZV9oaWdobGlnaHRbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RhZ2UgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrICsgKHBhcnNlSW50KHQyKSArIDEpKQogICAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgayArIChwYXJzZUludCh0MikgKyAxKSkuYXR0cignZmlsbCcsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrICsgJzInICsgKHBhcnNlSW50KHQyKSArIDEpKS5hdHRyKCdmaWxsJywgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZ2hsaWdodF9jbGFzcy5wdXNoKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsgKyAocGFyc2VJbnQodDIpICsgMSkpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5oaWdobGlnaHRfY2xhc3MucHVzaCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsgKyAnMicgKyAocGFyc2VJbnQodDIpICsgMSkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHsKICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgiLnN0YWdldmlld2JvZHkiKS5hcHBlbmQoInN2ZyIpLmF0dHIoIndpZHRoIiwgOTAwKS5hdHRyKCJoZWlnaHQiLCAyODApLmF0dHIoImNsYXNzIiwgInByb2dyZXNzaW9uc3RhZ2UiKTsKCiAgICBfdGhpcy5kcmF3TGVnZW5kKF90aGlzLnN0YWdlX251bWJlcik7IC8v6ZyA6KaB5Lyg6YCSc3RhZ2UgbnVtYmVy55qE5YC8CgoKICAgIHZhciBkcmFnID0gZDMuZHJhZygpLm9uKCdzdGFydCcsIGZ1bmN0aW9uICgpIHsKICAgICAgZDMuc2VsZWN0KHRoaXMpLnJhaXNlKCkuY2xhc3NlZCgiYWN0aXZlIiwgdHJ1ZSk7CiAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfSkub24oJ2RyYWcnLCBmdW5jdGlvbiAoZXZlbnQsIGQpIHsKICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIGQzLmV2ZW50LnggKyAiLCIgKyBkMy5ldmVudC55ICsgIikiKTsKICAgIH0pLm9uKCdlbmQnLCBmdW5jdGlvbiAoZXZlbnQsIGQpIHsKICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoImFjdGl2ZSIsIGZhbHNlKTsKICAgICAgdmFyIGFsbEdFbGVtZW50cyA9IGQzLnNlbGVjdEFsbCgiLnN0YWdlX2RyYWciKTsKICAgICAgdmFyIGFsbEdDb29yZHMgPSBhbGxHRWxlbWVudHMubm9kZXMoKS5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgeDogcGFyc2VJbnQoZC5nZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIpLm1hdGNoKC8oXGQrKS9nKVswXSksCiAgICAgICAgICB5OiBwYXJzZUludChkLmdldEF0dHJpYnV0ZSgidHJhbnNmb3JtIikubWF0Y2goLyhcZCspL2cpWzFdKQogICAgICAgIH07CiAgICAgIH0pOyAvLyDlsIZzdGFnZeWFg+e0oOagueaNrnjlnZDmoIfov5vooYzmjpLluo8KCiAgICAgIHZhciBzb3J0ZWRHRWxlbWVudHMgPSBhbGxHRWxlbWVudHMubm9kZXMoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJ0cmFuc2Zvcm0iKS5tYXRjaCgvKFxkKykvZylbMF0pIC0gcGFyc2VJbnQoYi5nZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIpLm1hdGNoKC8oXGQrKS9nKVswXSk7CiAgICAgIH0pOyAvLyDmm7TmlrDmr4/kuKpzdGFnZeWFg+e0oOeahOS9jee9ruS7peWPjeaYoOWFtumhuuW6jwoKICAgICAgc29ydGVkR0VsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGdFbGVtZW50LCBpKSB7CiAgICAgICAgdmFyIHggPSBpICogX3RoaXMuc3RhZ2VfaW50ZXJ2YWwgKyBfdGhpcy5zdGFnZV9zdGFydDsgLy8g6K6+572u5q+P5Liqc3RhZ2XlhYPntKDnmoR45Z2Q5qCHCgogICAgICAgIHZhciB5ID0gX3RoaXMuc3RhZ2VfeV9zdGFydDsgLy8g5L+d55WZeeWdkOaghwoKICAgICAgICBkMy5zZWxlY3QoZ0VsZW1lbnQpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIHggKyAiLCIgKyB5ICsgIikiKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHBpcGVTZXJ2aWNlLm9uU3RhZ2UoZnVuY3Rpb24gKG1zZykgewogICAgICB2YXIgZGF0YSA9IG1zZ1syXTsKICAgICAgdmFyIGFjdGl2ZV9rX21zZyA9IG1zZ1swXTsKICAgICAgdmFyIHBhc3NpdmVfa19tc2cgPSBtc2dbMV07CiAgICAgIGRhdGEgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOyAvL2NvbnNvbGUubG9nKCcqKioqKipvblN0YWdlKioqKioqJywgZGF0YSkKICAgICAgLy8gKioqKirph43mlrBtYXAqKioqKgoKICAgICAgdmFyIGRhdGFfbWFwID0ge307CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLnN0YWdlX251bWJlcjsgaSsrKSB7CiAgICAgICAgZGF0YV9tYXBbaV0gPSBkYXRhW190aGlzLnN0YWdlTWFwKGkpXTsKICAgICAgICBjb25zb2xlLmxvZygnKioqKioqb25TdGFnZSoqKioqKicsIF90aGlzLnN0YWdlTWFwKGkpLCBpLCBkYXRhW190aGlzLnN0YWdlTWFwKGkpXSwgZGF0YV9tYXBbaV0pOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZygnKioqKioqb25TdGFnZSoqKioqKicsIGRhdGEsIGRhdGFfbWFwKTsKCiAgICAgIF90aGlzLmRyYXdTdGFnZShhY3RpdmVfa19tc2csIHBhc3NpdmVfa19tc2csIGRhdGFfbWFwKTsKCiAgICAgIGQzLnNlbGVjdEFsbCgiLnN0YWdlX2RyYWciKS5jYWxsKGRyYWcpOwogICAgfSk7CiAgICBwaXBlU2VydmljZS5vbkNsaWNrUGF0aChmdW5jdGlvbiAoZGF0YSkgewogICAgICB2YXIgbGlzdF90ZW1wID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFbMF0ubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAofmxpc3RfdGVtcC5pbmNsdWRlcyhkYXRhWzBdW2ldKSkgewogICAgICAgICAgbGlzdF90ZW1wLnB1c2goZGF0YVswXVtpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBfdGhpcy5oaWdobGlnaHRfbGlzdCA9IGxpc3RfdGVtcDsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgc3RhZ2VNYXA6IGZ1bmN0aW9uIHN0YWdlTWFwKHN0YWdlKSB7CiAgICAgIGlmIChzdGFnZSA9PSAyKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KCiAgICAgIGlmIChzdGFnZSA9PSA0KSB7CiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0KCiAgICAgIGlmIChzdGFnZSA9PSAwKSB7CiAgICAgICAgcmV0dXJuIDI7CiAgICAgIH0KCiAgICAgIGlmIChzdGFnZSA9PSAxKSB7CiAgICAgICAgcmV0dXJuIDM7CiAgICAgIH0KCiAgICAgIGlmIChzdGFnZSA9PSAzKSB7CiAgICAgICAgcmV0dXJuIDQ7CiAgICAgIH0KCiAgICAgIGlmIChzdGFnZSA9PSA1KSB7CiAgICAgICAgcmV0dXJuIDU7CiAgICAgIH0KICAgIH0sCiAgICBjYWxjdWxhdGVWYXJpYW5jZTogZnVuY3Rpb24gY2FsY3VsYXRlVmFyaWFuY2UoYXJyKSB7CiAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgdmFyIG1lYW4gPSBhcnIucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cnIpIHsKICAgICAgICByZXR1cm4gYWNjICsgY3VycjsKICAgICAgfSwgMCkgLyBuOwogICAgICB2YXIgdmFyaWFuY2UgPSBhcnIucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cnIpIHsKICAgICAgICByZXR1cm4gYWNjICsgTWF0aC5wb3coY3VyciAtIG1lYW4sIDIpOwogICAgICB9LCAwKSAvIG47CiAgICAgIHJldHVybiB2YXJpYW5jZTsKICAgIH0sCiAgICBkcmF3TGVnZW5kOiBmdW5jdGlvbiBkcmF3TGVnZW5kKHN0YWdlX251bWJlcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgiLnN0YWdldmlld2hlYWRlciIpLmFwcGVuZCgic3ZnIikuYXR0cigid2lkdGgiLCA3MDApLmF0dHIoImhlaWdodCIsIDIwKTsKICAgICAgdmFyIGRvbWFpbl94ID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWdlX251bWJlcjsgaSsrKSB7CiAgICAgICAgZG9tYWluX3gucHVzaChpKTsKICAgICAgfQoKICAgICAgdmFyIGNvbG9yID0gZDMuc2NhbGVPcmRpbmFsKCkuZG9tYWluKGRvbWFpbl94KS5yYW5nZShfdGhpcy5jb2xvcl9saXN0KTsKICAgICAgdmFyIGdfbGVnZW5kID0gc3ZnLmFwcGVuZCgnZycpOwogICAgICBnX2xlZ2VuZC5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgMTUpLmF0dHIoInkiLCAzKS5hdHRyKCJ3aWR0aCIsIDEwKS5hdHRyKCJoZWlnaHQiLCAxMCkuYXR0cigiZmlsbCIsIF90aGlzLmJhY2tncm91bmRfY29sb3IpLmF0dHIoInN0cm9rZSIsICJibGFjayIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy50ZW1wb3JhbCA9IDEgLSBfdGhpcy50ZW1wb3JhbDsKICAgICAgfSkuYXR0cigiY2xhc3MiLCAidGVtcG9yYWwtY2xpY2siKTsKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIDI5KS5hdHRyKCJ5IiwgMTIpLmF0dHIoImZvbnQtc2l6ZSIsIDEzKS5hdHRyKCJmaWxsIiwgX3RoaXMudGV4dF9jb2xvcikudGV4dCgidGVtcG9yYWwiKTsgLy8qKioqKioqKirlgYfnmoTovpPlhaXmoYYqKioqKioqKioqCgogICAgICBnX2xlZ2VuZC5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgMjAwKS5hdHRyKCJ5IiwgMykuYXR0cigid2lkdGgiLCAxMikuYXR0cigiaGVpZ2h0IiwgMTMpLmF0dHIoImZpbGwiLCBfdGhpcy5iYWNrZ3JvdW5kX2NvbG9yKS5hdHRyKCJzdHJva2UiLCAiYmxhY2siKTsKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIDEwOSkuYXR0cigieSIsIDE0KS5hdHRyKCJmb250LXNpemUiLCAxMykuYXR0cigiZmlsbCIsIF90aGlzLnRleHRfY29sb3IpLnRleHQoInN0YWdlIG51bWJlcjogNiIpOwoKICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBzdGFnZV9udW1iZXI7IGMrKykgewogICAgICAgIHN2Zy5hcHBlbmQoImNpcmNsZSIpLmF0dHIoImN4IiwgMjI1ICsgYyAqIDgwKS5hdHRyKCJjeSIsIDEwKS5hdHRyKCJyIiwgNykuYXR0cigiZmlsbCIsIGNvbG9yKGMpKS5hdHRyKCJzdHJva2UiLCAiIzViNWI1YiIpOwogICAgICAgIHN2Zy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgMjM4ICsgYyAqIDgwKS5hdHRyKCJ5IiwgMTQpLmF0dHIoImZvbnQtc2l6ZSIsIDEzKS50ZXh0KCJzdGFnZSAiICsgKGMgKyAxKSk7CiAgICAgIH0KCiAgICAgIGdfbGVnZW5kLmFwcGVuZCgiY2lyY2xlIikuYXR0cigiY3giLCA2OTMpLmF0dHIoImN5IiwgNykuYXR0cigiciIsIDUpLmF0dHIoImZpbGwiLCAid2hpdGUiKS5hdHRyKCJzdHJva2UiLCAicmVkIik7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCA2OTApLmF0dHIoInkiLCAxMCkuYXR0cigiZm9udC1zaXplIiwgOCkudGV4dCgiPyIpLmF0dHIoImZpbGwiLCAiI2JjNGI1MSIpOwogICAgfSwKICAgIGRyYXdTdGFnZTogZnVuY3Rpb24gZHJhd1N0YWdlKGFjdGl2ZV9rLCBwYXNzaXZlX2ssIGRhdGEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB3aWR0aCA9IDg4MDsKICAgICAgdmFyIGhlaWdodCA9IDIwMDsKICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTsKICAgICAgdmFyIGRvbWFpbl94ID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBkb21haW5feC5wdXNoKGkpOwogICAgICB9CgogICAgICB2YXIgeHNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIGtleXMubGVuZ3RoIC0gMV0pLnJhbmdlKFsxMjAsIDgwMF0pOwogICAgICB2YXIgY29sb3IgPSBkMy5zY2FsZU9yZGluYWwoKS5kb21haW4oZG9tYWluX3gpLnJhbmdlKF90aGlzLmNvbG9yX2xpc3QpOwogICAgICBfdGhpcy5zdGFnZV9pbnRlcnZhbCA9IHhzY2FsZSgxKSAtIHhzY2FsZSgwKTsKCiAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IGtleXMubGVuZ3RoOyBfaTQrKykgewogICAgICAgIF90aGlzLmRyYXdFYWNoU3RhZ2UoX2k0LCBkYXRhW19pNF0sIDMsIGNvbG9yLCB4c2NhbGUoX2k0KSwgeHNjYWxlKDEpIC0geHNjYWxlKDApKTsKICAgICAgfQogICAgfSwKICAgIHNwbGl0RGF0YUJ5VGhyZXNob2xkczogZnVuY3Rpb24gc3BsaXREYXRhQnlUaHJlc2hvbGRzKGRhdGEsIHRocmVzaG9sZHMsIGdhcCkgewogICAgICAvLyDliJ3lp4vljJbliIblibLnu5PmnpzmlbDnu4QKICAgICAgdmFyIHJlc3VsdHMgPSBuZXcgQXJyYXkodGhyZXNob2xkcy5sZW5ndGggKyAxKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHJlc3VsdHNbaV0gPSBuZXcgQXJyYXkoZGF0YS5sZW5ndGgpOwoKICAgICAgICBmb3IgKHZhciBwID0gMDsgcCA8IHJlc3VsdHNbaV0ubGVuZ3RoOyBwKyspIHsKICAgICAgICAgIHJlc3VsdHNbaV1bcF0gPSAwOwogICAgICAgIH0KICAgICAgfSAvLyDlr7nmlbDmja7ngrnpgJDkuKrov5vooYzliIblibIKCgogICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCBkYXRhLmxlbmd0aDsgX2k1KyspIHsKICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW19pNV07CiAgICAgICAgdmFyIGogPSAwOwoKICAgICAgICB3aGlsZSAoaiA8IHRocmVzaG9sZHMubGVuZ3RoICYmIHZhbHVlID4gdGhyZXNob2xkc1tqXSkgewogICAgICAgICAgcmVzdWx0c1tqXVtfaTVdID0gZ2FwOwogICAgICAgICAgaisrOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0c1tqXVtfaTVdID0gdmFsdWUgLSBnYXAgKiBqOwoKICAgICAgICBmb3IgKHZhciBrID0gaiArIDE7IGsgPCByZXN1bHRzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICByZXN1bHRzW2tdW19pNV0gPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9LAogICAgZHJhd0VhY2hTdGFnZTogZnVuY3Rpb24gZHJhd0VhY2hTdGFnZShzdGFnZSwgZGF0YSwgbWF4Y29yLCBjb2xvcl9zY2FsZSwgeF9zdGFydCwgaW50ZXJ2YWwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkYXRhX29yaWcgPSBkYXRhOwogICAgICB2YXIgZGF0YV9zdW1tYXJ5ID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBkYXRhX3N1bW1hcnlfYWxsID0gewogICAgICAgICJkZXByZXNzaW9uIjogbmV3IEFycmF5KCksCiAgICAgICAgImFjdGl2ZSBiZWhhdmlvciI6IG5ldyBBcnJheSgpLAogICAgICAgICJwYXNzaXZlIGJlaGF2aW9yIjogbmV3IEFycmF5KCkKICAgICAgfTsgLy/nlKjmnaXljIXlkKvmiYDmnInnmoTngrkKCiAgICAgIHZhciBkYXRhX3N0YXRpc3RpY3MgPSBuZXcgQXJyYXkoKTsKICAgICAgdmFyIGRhdGFfc3RhdGlzdGljc19hbGwgPSBuZXcgQXJyYXkoKTsgLy/nlKjmnaXljIXlkKvmiYDmnInnmoTngrkKCiAgICAgIHZhciBzZWdtZW50X2xlbmd0aCA9IGRhdGEubGVuZ3RoOwogICAgICB2YXIgY29ycl9zdGF0aXN0aWNzID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBkYXRhX2NvbmNhdCA9IG5ldyBBcnJheSgpOwogICAgICB2YXIgY29ycl9zdGF0aXN0aWNzX2FsbCA9IG5ldyBBcnJheSgpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50X2xlbmd0aDsgaSsrKSB7CiAgICAgICAgZGF0YV9zdW1tYXJ5W2ldID0gewogICAgICAgICAgImRlcHJlc3Npb24iOiBuZXcgQXJyYXkoKSwKICAgICAgICAgICJhY3RpdmUgYmVoYXZpb3IiOiBuZXcgQXJyYXkoKSwKICAgICAgICAgICJwYXNzaXZlIGJlaGF2aW9yIjogbmV3IEFycmF5KCkKICAgICAgICB9OyAvL+WtmOWCqOavj+S4gOS4quaXtumXtOeCueWFs+S6juS4ieS4queahOe7n+iuoQoKICAgICAgICBkYXRhX3N0YXRpc3RpY3NbaV0gPSBuZXcgQXJyYXkoKTsKICAgICAgICBkYXRhX2NvbmNhdCA9IGRhdGFfY29uY2F0LmNvbmNhdChkYXRhW2ldKTsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkYXRhW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBkYXRhX3N1bW1hcnlbaV1bImRlcHJlc3Npb24iXS5wdXNoKF90aGlzLmRlcHJlc3Npb25UaHJlc2hvbGQoZGF0YVtpXVtqXVswXSkpOwogICAgICAgICAgZGF0YV9zdW1tYXJ5W2ldWyJhY3RpdmUgYmVoYXZpb3IiXS5wdXNoKGRhdGFbaV1bal1bMV0pOwogICAgICAgICAgZGF0YV9zdW1tYXJ5W2ldWyJwYXNzaXZlIGJlaGF2aW9yIl0ucHVzaChkYXRhW2ldW2pdWzJdKTsKICAgICAgICAgIGRhdGFfc3VtbWFyeV9hbGxbImRlcHJlc3Npb24iXS5wdXNoKF90aGlzLmRlcHJlc3Npb25UaHJlc2hvbGQoZGF0YVtpXVtqXVswXSkpOwogICAgICAgICAgZGF0YV9zdW1tYXJ5X2FsbFsiYWN0aXZlIGJlaGF2aW9yIl0ucHVzaChkYXRhW2ldW2pdWzFdKTsKICAgICAgICAgIGRhdGFfc3VtbWFyeV9hbGxbInBhc3NpdmUgYmVoYXZpb3IiXS5wdXNoKGRhdGFbaV1bal1bMl0pOwogICAgICAgIH0KCiAgICAgICAgY29ycl9zdGF0aXN0aWNzLnB1c2goX3RoaXMuY29ycmVsYXRpb25TdW1tYXJpemUoZGF0YVtpXSwgbWF4Y29yKSk7CiAgICAgICAgZGF0YV9zdGF0aXN0aWNzW2ldLnB1c2goX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeVtpXVsiZGVwcmVzc2lvbiJdKSwgX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeVtpXVsiYWN0aXZlIGJlaGF2aW9yIl0pLCBfdGhpcy5nZXRGcmVxdWVuY3koZGF0YV9zdW1tYXJ5W2ldWyJwYXNzaXZlIGJlaGF2aW9yIl0pKTsKICAgICAgfQoKICAgICAgX3RoaXMuc3RhZ2VzdGF0aXN0aWNzW3N0YWdlXSA9IGRhdGFfc3RhdGlzdGljc19hbGw7CiAgICAgIGNvcnJfc3RhdGlzdGljc19hbGwgPSBfdGhpcy5jb3JyZWxhdGlvblN1bW1hcml6ZShkYXRhX2NvbmNhdCwgbWF4Y29yKTsKICAgICAgZGF0YV9zdGF0aXN0aWNzX2FsbC5wdXNoKF90aGlzLmdldEZyZXF1ZW5jeShkYXRhX3N1bW1hcnlfYWxsWyJkZXByZXNzaW9uIl0pLCBfdGhpcy5nZXRGcmVxdWVuY3koZGF0YV9zdW1tYXJ5X2FsbFsiYWN0aXZlIGJlaGF2aW9yIl0pLCBfdGhpcy5nZXRGcmVxdWVuY3koZGF0YV9zdW1tYXJ5X2FsbFsicGFzc2l2ZSBiZWhhdmlvciJdKSk7IC8v5byA5aeL55S75Zu+CgogICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCIucHJvZ3Jlc3Npb25zdGFnZSIpOwogICAgICB2YXIgc3ZnX3N0YWdlID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoIndpZHRoIiwgMzAwKS5hdHRyKCJoZWlnaHQiLCAyODApLmF0dHIoImNsYXNzIiwgInN0YWdlX2RyYWcgIiArIHN0YWdlKS5zdHlsZSgiei1pbmRleCIsIDIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArICh4X3N0YXJ0IC0gNTApICsgIiwwKSIpOwoKICAgICAgaWYgKHN0YWdlID09IDApIHsKICAgICAgICBfdGhpcy5zdGFnZV9zdGFydCA9IHhfc3RhcnQgLSA1MDsKICAgICAgfQoKICAgICAgdmFyIHN2Z18xID0gc3ZnX3N0YWdlLmFwcGVuZCgiZyIpLmF0dHIoIndpZHRoIiwgMzAwKS5hdHRyKCJoZWlnaHQiLCAyODApLmF0dHIoImNsYXNzIiwgInN0YWdlX3NpbmdsZSIgKyBzdGFnZSkuYXR0cigiaWQiLCAic3RhZ2Vfc2luZ2xlIiArIHN0YWdlKS5zdHlsZSgiei1pbmRleCIsIDIpOwogICAgICB2YXIgc3ZnXzMgPSBzdmcuYXBwZW5kKCJnIikuYXR0cigid2lkdGgiLCA4ODApLmF0dHIoImhlaWdodCIsIDI4MCkuYXR0cigiY2xhc3MiLCAibGVnZW5kIikuc3R5bGUoInotaW5kZXgiLCAyKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDEwLCAwKSIpOwogICAgICB2YXIgeV9zdGFydCA9IDMwOwogICAgICB2YXIgd2lkdGhfc2NhbGUgPSBpbnRlcnZhbCAvIDI7CiAgICAgIHZhciBoZWlnaHRfc2NhbGUgPSAxMTsKICAgICAgdmFyIHhfc3RhcnQxID0gNTA7IC8vIOeUu+iDjOaZrwoKICAgICAgc3ZnXzEuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfc3RhcnQxIC0gMzUpLmF0dHIoInkiLCB5X3N0YXJ0IC0gMTUpLmF0dHIoInJ4IiwgNSkuYXR0cigicnkiLCA1KS5hdHRyKCJoZWlnaHQiLCAyMjApLmF0dHIoIndpZHRoIiwgMTEwKS5hdHRyKCJmaWxsIiwgIndoaXRlIikuYXR0cigic3Ryb2tlIiwgX3RoaXMubm90aGlnaGxpZ2h0X2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAxKS5hdHRyKCJvcGFjaXR5IiwgMC4xKS5hdHRyKCJjbGFzcyIsICJzdGFnZV9iYWNrZ3JvdW5kMSIgKyBzdGFnZSk7IC8vIOeUu3N0YWdl5qCH5b+XCgogICAgICBzdmdfMS5hcHBlbmQoImNpcmNsZSIpLmF0dHIoImN4IiwgeF9zdGFydDEgLSAzNSkuYXR0cigiY3kiLCB5X3N0YXJ0IC0gMTUpLmF0dHIoInIiLCA3KS5hdHRyKCJmaWxsIiwgY29sb3Jfc2NhbGUoc3RhZ2UpKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5ub3RoaWdobGlnaHRfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIDAuMikuYXR0cigiY2xhc3MiLCAic3RhZ2VfYmFja2dyb3VuZDIiICsgc3RhZ2UpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2xpc3QuaW5jbHVkZXMoc3RhZ2UudG9TdHJpbmcoKSkpIHsKICAgICAgICAgIHZhciB0ZW1wID0gW107CgogICAgICAgICAgZm9yICh2YXIgX2k2ID0gMDsgX2k2IDwgX3RoaXMuaGlnaGxpZ2h0X2xpc3QubGVuZ3RoOyBfaTYrKykgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2xpc3RbX2k2XSAhPSBzdGFnZS50b1N0cmluZygpKSB7CiAgICAgICAgICAgICAgdGVtcC5wdXNoKF90aGlzLmhpZ2hsaWdodF9saXN0W19pNl0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMuaGlnaGxpZ2h0X2xpc3QgPSB0ZW1wOyAvL2NvbnNvbGUubG9nKF90aGlzLmhpZ2hsaWdodF9saXN0KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5oaWdobGlnaHRfbGlzdC5wdXNoKHN0YWdlLnRvU3RyaW5nKCkpOyAvL2NvbnNvbGUubG9nKF90aGlzLmhpZ2hsaWdodF9saXN0KQoKICAgICAgICB9CiAgICAgIH0pOwogICAgICBzdmdfMS5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydDEgLSAzOSkuYXR0cigieSIsIHlfc3RhcnQgLSAxMCkuYXR0cigiZm9udC1zaXplIiwgMTMpLmF0dHIoImZpbGwiLCAnd2hpdGUnKS50ZXh0KHN0YWdlICsgMSkuYXR0cigiY2xhc3MiLCAic3RhZ2VfYmFja2dyb3VuZDIiICsgc3RhZ2UpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2xpc3QuaW5jbHVkZXMoc3RhZ2UudG9TdHJpbmcoKSkpIHsKICAgICAgICAgIHZhciB0ZW1wID0gW107CgogICAgICAgICAgZm9yICh2YXIgX2k3ID0gMDsgX2k3IDwgX3RoaXMuaGlnaGxpZ2h0X2xpc3QubGVuZ3RoOyBfaTcrKykgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2xpc3RbX2k3XSAhPSBzdGFnZS50b1N0cmluZygpKSB7CiAgICAgICAgICAgICAgdGVtcC5wdXNoKF90aGlzLmhpZ2hsaWdodF9saXN0W19pN10pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMuaGlnaGxpZ2h0X2xpc3QgPSB0ZW1wOyAvL2NvbnNvbGUubG9nKF90aGlzLmhpZ2hsaWdodF9saXN0KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5oaWdobGlnaHRfbGlzdC5wdXNoKHN0YWdlLnRvU3RyaW5nKCkpOyAvL2NvbnNvbGUubG9nKF90aGlzLmhpZ2hsaWdodF9saXN0KQoKICAgICAgICB9CiAgICAgIH0pOyAvLy5hdHRyKCJvcGFjaXR5IiwgMC41KQogICAgICAvLyDnlLvljZXkuKphdHRyaWJ1dGUKCiAgICAgIHZhciBwb3NpdGlvbiA9IHt9OyAvLyDorrDlvZXnurXlnZDmoIfkvY3nva4KCiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pOCkgewogICAgICAgIHZhciB5X3N0YXJ0MiA9IHlfc3RhcnQ7CiAgICAgICAgdmFyIGtleXNfaSA9IE9iamVjdC5rZXlzKGRhdGFfc3RhdGlzdGljc19hbGxbX2k4XSk7CiAgICAgICAgdmFyIHZhbHVlc19pID0gT2JqZWN0LnZhbHVlcyhkYXRhX3N0YXRpc3RpY3NfYWxsW19pOF0pOwogICAgICAgIHN2Z18zLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAxMCkuYXR0cigieSIsIHlfc3RhcnQpLmF0dHIoImhlaWdodCIsIGhlaWdodF9zY2FsZSAqIGtleXNfaS5sZW5ndGggKyAzICogKGtleXNfaS5sZW5ndGggLSAxKSkuYXR0cigid2lkdGgiLCAyKS5hdHRyKCJmaWxsIiwgIiM1YjViNWIiKS5hdHRyKCJvcGFjaXR5IiwgMC4yKTsKICAgICAgICBzdmdfMS5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9zdGFydDEgLSA1KS5hdHRyKCJ5IiwgeV9zdGFydCkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0X3NjYWxlICoga2V5c19pLmxlbmd0aCArIDMgKiAoa2V5c19pLmxlbmd0aCAtIDEpKS5hdHRyKCJ3aWR0aCIsIHdpZHRoX3NjYWxlKS5hdHRyKCJmaWxsIiwgIiM1YjViNWIiKS5hdHRyKCJvcGFjaXR5IiwgMC4wNSkuYXR0cigicngiLCAzKS5hdHRyKCJyeSIsIDMpOwogICAgICAgIHN2Z18xLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X3N0YXJ0MSAtIDMpLmF0dHIoInkiLCB5X3N0YXJ0KS5hdHRyKCJoZWlnaHQiLCBoZWlnaHRfc2NhbGUgKiBrZXlzX2kubGVuZ3RoICsgMyAqIChrZXlzX2kubGVuZ3RoIC0gMSkpLmF0dHIoIndpZHRoIiwgMykuYXR0cigiZmlsbCIsICIjY2JjYmNiIik7IC8vIC5hdHRyKCJvcGFjaXR5IiwgMC4zKQoKICAgICAgICB2YXIgX2xvb3A0ID0gZnVuY3Rpb24gX2xvb3A0KF9qKSB7CiAgICAgICAgICAvLyDnlLtsZWdlbmQKICAgICAgICAgIGlmIChfaTggPT0gMCkgewogICAgICAgICAgICBzdmdfMy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgMTUpLmF0dHIoInkiLCB5X3N0YXJ0ICsgaGVpZ2h0X3NjYWxlIC0gMikuYXR0cigiZm9udC1zaXplIiwgMTMpLnRleHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChfaiA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2xvdyc7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChfaiA9PSAxKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ21lZGl1bSc7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAnaGlnaCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5hdHRyKCJvcGFjaXR5IiwgMC4yKTsKICAgICAgICAgIH0gZWxzZSBpZiAoX2k4ID09IDEpIHsKICAgICAgICAgICAgc3ZnXzMuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIDE1KS5hdHRyKCJ5IiwgeV9zdGFydCArIGhlaWdodF9zY2FsZSAtIDIpLmF0dHIoImZvbnQtc2l6ZSIsIDEzKS50ZXh0KCJwIiArIChfaiArIDEpKS5hdHRyKCJvcGFjaXR5IiwgMC4yKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN2Z18zLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCAxNSkuYXR0cigieSIsIHlfc3RhcnQgKyBoZWlnaHRfc2NhbGUgLSAyKS5hdHRyKCJmb250LXNpemUiLCAxMykudGV4dCgiciIgKyAoX2ogKyAxKSkuYXR0cigib3BhY2l0eSIsIDAuMik7CiAgICAgICAgICB9CgogICAgICAgICAgcG9zaXRpb25bX2k4LnRvU3RyaW5nKCkgKyBfai50b1N0cmluZygpXSA9IHlfc3RhcnQgKyBoZWlnaHRfc2NhbGUgLyAyOyAvLyDov5nph4zmmK/nlLvkuK3pl7TnmoTlsI/mlrnlnZfvvIzms6jmhI/mmK9ub24tdGVtcG9yYWzkv6Hmga8KCiAgICAgICAgICBzdmdfMS5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9zdGFydDEpLmF0dHIoInkiLCB5X3N0YXJ0KS5hdHRyKCJoZWlnaHQiLCBoZWlnaHRfc2NhbGUpLmF0dHIoIndpZHRoIiwgZGF0YV9zdGF0aXN0aWNzX2FsbFtfaThdW19qXSAvIF90aGlzLnN1bSh2YWx1ZXNfaSkgKiB3aWR0aF9zY2FsZSkuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcikuYXR0cigiY2xhc3MiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfaTggPT0gMSkgewogICAgICAgICAgICAgIHJldHVybiAibm9uLXRlbXBvcmFsICIgKyBzdGFnZSArICcgYScgKyAoX2ogKyAxKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChfaTggPT0gMikgewogICAgICAgICAgICAgIHJldHVybiAibm9uLXRlbXBvcmFsICIgKyBzdGFnZSArICcgcCcgKyAoX2ogKyAxKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gIm5vbi10ZW1wb3JhbCAiICsgc3RhZ2UgKyAnIGQnICsgKF9qICsgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmF0dHIoInN0cm9rZSIsIF90aGlzLnN0cm9rZV9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMC4wNSkgLy9ob3ZlcuWcqGJhcuS4igogICAgICAgICAgLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICB2YXIgdHlwZSA9ICQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzJdWzBdOyAvL2QgYSBwCgogICAgICAgICAgICB2YXIgb3JkZXIgPSBwYXJzZUludCgkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVsyXVsxXSkgLSAxOyAvLyAxIDIgMyA0Li4uCiAgICAgICAgICAgIC8v6ZyA6KaB5o+Q5Y+W5Ye65omA5pyJ55u46L+e55qE57q/5Lul5Y+KYmFyCgogICAgICAgICAgICB2YXIga2V5c190ZW1wID0gWydkZV9hYycsICdhY19wYScsICdkZV9wYScsICdkZV9hY19wYSddOwoKICAgICAgICAgICAgZm9yICh2YXIgX2kxMSA9IDA7IF9pMTEgPCBrZXlzX3RlbXAubGVuZ3RoOyBfaTExKyspIHsKICAgICAgICAgICAgICBmb3IgKHZhciBfajIgPSAwOyBfajIgPCBjb3JyX3N0YXRpc3RpY3NfYWxsW2tleXNfdGVtcFtfaTExXV0ubGVuZ3RoOyBfajIrKykgewogICAgICAgICAgICAgICAgdmFyIG5hbWVfdGVtcCA9IGtleXNfdGVtcFtfaTExXTsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZV90ZW1wID0gcGFyc2VJbnQoY29ycl9zdGF0aXN0aWNzX2FsbFtrZXlzX3RlbXBbX2kxMV1dW19qMl1bMF0pOyAvLyDpppblhYjnlLtiYXIKCiAgICAgICAgICAgICAgICBpZiAoX2kxMSA9PSAzKSB7CiAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMCA9IHBhcnNlSW50KHZhbHVlX3RlbXAgLyAxMDApOwogICAgICAgICAgICAgICAgICB2YXIgdGVtcDIgPSB2YWx1ZV90ZW1wICUgMTA7CiAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMSA9IHBhcnNlSW50KCh2YWx1ZV90ZW1wIC0gdGVtcDAgKiAxMDApIC8gMTApOwoKICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMSkgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDIpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaCgnYScgKyAodGVtcDEgKyAxKSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKCdwJyArICh0ZW1wMiArIDEpKTsKCiAgICAgICAgICAgICAgICAgICQoJy5zdGFnZScgKyBzdGFnZSArICcuZGVfYWNfcGEuJyArIHZhbHVlX3RlbXApLmF0dHIoInN0cm9rZSIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5kJyArICh0ZW1wMCArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmEnICsgKHRlbXAxICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcucCcgKyAodGVtcDIgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmQyJyArICh0ZW1wMCArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuYTInICsgKHRlbXAxICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5wMicgKyAodGVtcDIgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB2YXIgX3RlbXAgPSBwYXJzZUludCh2YWx1ZV90ZW1wIC8gMTApOwoKICAgICAgICAgICAgICAgICAgdmFyIF90ZW1wMiA9IHZhbHVlX3RlbXAgJSAxMDsKCiAgICAgICAgICAgICAgICAgIHZhciBrMCA9ICdkJzsKICAgICAgICAgICAgICAgICAgdmFyIGsxID0gJ2EnOwogICAgICAgICAgICAgICAgICB2YXIga2sgPSAnZGVfYWMnOwoKICAgICAgICAgICAgICAgICAgaWYgKF9pMTEgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IF90ZW1wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChfaTExID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSBfdGVtcCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IF90ZW1wMikgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBrMCA9ICdhJzsKICAgICAgICAgICAgICAgICAgICBrMSA9ICdwJzsKICAgICAgICAgICAgICAgICAgICBrayA9ICdhY19wYSc7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChfaTExID09IDIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSBfdGVtcCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IF90ZW1wMikgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBrMSA9ICdwJzsKICAgICAgICAgICAgICAgICAgICBrayA9ICdkZV9wYSc7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goazAgKyAoX3RlbXAgKyAxKSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGsxICsgKF90ZW1wMiArIDEpKTsKCiAgICAgICAgICAgICAgICAgICQoJy5zdGFnZScgKyBzdGFnZSArICcuJyArIGtrICsgIi4iICsgdmFsdWVfdGVtcCkuYXR0cigic3Ryb2tlIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArIChfdGVtcCArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArIChfdGVtcDIgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArICcyJyArIChfdGVtcCArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsxICsgJzInICsgKF90ZW1wMiArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZV9zcGxpdCA9IHR5cGUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAnLic7CgogICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGNsYXNzX25hbWVfc3BsaXQubGVuZ3RoOyBjKyspIHsKICAgICAgICAgICAgICBjbGFzc19uYW1lICs9IGNsYXNzX25hbWVfc3BsaXRbY107CgogICAgICAgICAgICAgIGlmIChjIDwgY2xhc3NfbmFtZV9zcGxpdC5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICBjbGFzc19uYW1lICs9ICcuJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoY2xhc3NfbmFtZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgdHlwZSA9ICQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzJdWzBdOyAvL2QgYSBwCgogICAgICAgICAgICB2YXIgb3JkZXIgPSBwYXJzZUludCgkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVsyXVsxXSkgLSAxOyAvLyAxIDIgMyA0Li4uCiAgICAgICAgICAgIC8vY29uc29sZS5sb2codHlwZSwgb3JkZXIpCiAgICAgICAgICAgIC8v6ZyA6KaB5o+Q5Y+W5Ye65omA5pyJ55u46L+e55qE57q/5Lul5Y+KYmFyCgogICAgICAgICAgICB2YXIga2V5c190ZW1wID0gWydkZV9hYycsICdhY19wYScsICdkZV9wYScsICdkZV9hY19wYSddOwoKICAgICAgICAgICAgZm9yICh2YXIgX2kxMiA9IDA7IF9pMTIgPCBrZXlzX3RlbXAubGVuZ3RoOyBfaTEyKyspIHsKICAgICAgICAgICAgICBmb3IgKHZhciBfajMgPSAwOyBfajMgPCBjb3JyX3N0YXRpc3RpY3NfYWxsW2tleXNfdGVtcFtfaTEyXV0ubGVuZ3RoOyBfajMrKykgewogICAgICAgICAgICAgICAgdmFyIG5hbWVfdGVtcCA9IGtleXNfdGVtcFtfaTEyXTsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZV90ZW1wID0gcGFyc2VJbnQoY29ycl9zdGF0aXN0aWNzX2FsbFtrZXlzX3RlbXBbX2kxMl1dW19qM11bMF0pOyAvLyDpppblhYjnlLtiYXIKCiAgICAgICAgICAgICAgICBpZiAoX2kxMiA9PSAzKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMCA9IHBhcnNlSW50KHZhbHVlX3RlbXAgLyAxMDApOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMiA9IHZhbHVlX3RlbXAgJSAxMDsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwYXJzZUludCgodmFsdWVfdGVtcCAtIHRlbXAwICogMTAwKSAvIDEwKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUgPSBfdGhpcy5yZW1vdmVFbGVtZW50KF90aGlzLmFjdGl2ZV9wYXNzaXZlLCBbJ2QnICsgKHRlbXAwICsgMSksICdhJyArICh0ZW1wMSArIDEpLCAncCcgKyAodGVtcDIgKyAxKV0pOwogICAgICAgICAgICAgICAgICAgICQoJy5zdGFnZScgKyBzdGFnZSArICcuZGVfYWNfcGEuJyArIHZhbHVlX3RlbXApLmF0dHIoInN0cm9rZSIsIF90aGlzLmxpbmVfY29sb3IpOwogICAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5kJyArICh0ZW1wMCArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmQnICsgKHRlbXAwICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuYScgKyAodGVtcDEgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5hJyArICh0ZW1wMSArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAnICsgKHRlbXAyICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcucCcgKyAodGVtcDIgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmQyJyArICh0ZW1wMCArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuZDInICsgKHRlbXAwICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5hMicgKyAodGVtcDEgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmEyJyArICh0ZW1wMSArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcucDInICsgKHRlbXAyICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5wMicgKyAodGVtcDIgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgICAgICBpZiAoX3JldCA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB2YXIgX3JldDIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAwID0gcGFyc2VJbnQodmFsdWVfdGVtcCAvIDEwKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSB2YWx1ZV90ZW1wICUgMTA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGswID0gJ2QnOwogICAgICAgICAgICAgICAgICAgIHZhciBrMSA9ICdhJzsKICAgICAgICAgICAgICAgICAgICB2YXIga2sgPSAnZGVfYWMnOwoKICAgICAgICAgICAgICAgICAgICBpZiAoX2kxMiA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoX2kxMiA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgazAgPSAnYSc7CiAgICAgICAgICAgICAgICAgICAgICBrMSA9ICdwJzsKICAgICAgICAgICAgICAgICAgICAgIGtrID0gJ2FjX3BhJzsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChfaTEyID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBrMSA9ICdwJzsKICAgICAgICAgICAgICAgICAgICAgIGtrID0gJ2RlX3BhJzsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RoaXMucmVtb3ZlRWxlbWVudChfdGhpcy5hY3RpdmVfcGFzc2l2ZSwgW2swICsgKHRlbXAwICsgMSksIGsxICsgKHRlbXAxICsgMSldKTsKICAgICAgICAgICAgICAgICAgICAkKCcuc3RhZ2UnICsgc3RhZ2UgKyAnLicgKyBrayArICIuIiArIHZhbHVlX3RlbXApLmF0dHIoInN0cm9rZSIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArICh0ZW1wMCArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArICh0ZW1wMCArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArICh0ZW1wMSArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGswICsgJzInICsgKHRlbXAwICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAnMicgKyAodGVtcDAgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArICcyJyArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsxICsgJzInICsgKHRlbXAxICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICAgICAgaWYgKF9yZXQyID09PSAiY29udGludWUiKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF9pOCAhPSAwKSB7CiAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3Ryb2tlLXdpZHRoJykgPT0gMC4wNSkgewogICAgICAgICAgICAgICAgLy/ooajnpLrpq5jkuq4KICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignc3Ryb2tlLXdpZHRoJywgMSk7CgogICAgICAgICAgICAgICAgaWYgKF9pOCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgIC8v5Luj6KGo54K55Ye755qEYWN0aXZlCiAgICAgICAgICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAnLmEnICsgKF9qICsgMSkpLmF0dHIoJ3N0cm9rZScsIF90aGlzLnN0cm9rZV9jb2xvcik7CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKCdhJyArIChfaiArIDEpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX2k4ID09IDIpIHsKICAgICAgICAgICAgICAgICAgLy/ku6Pooajngrnlh7vnmoRwYXNzaXZlCiAgICAgICAgICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAnLnAnICsgKF9qICsgMSkpLmF0dHIoJ3N0cm9rZScsIF90aGlzLnN0cm9rZV9jb2xvcik7CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKCdwJyArIChfaiArIDEpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy/ooajnpLrlj5bmtojngrnlh7sKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignc3Ryb2tlLXdpZHRoJywgMC4wNSk7CgogICAgICAgICAgICAgICAgaWYgKF9pOCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgIC8v5Luj6KGo54K55Ye755qEYWN0aXZlCiAgICAgICAgICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAnLmEnICsgKF9qICsgMSkpLmF0dHIoJ3N0cm9rZScsICcjZTVlNWU1Jyk7CiAgICAgICAgICAgICAgICAgIHZhciB0ZW1wX2xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgdmFyIGZsYWcgPSAxOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5sZW5ndGg7IHArKykgewogICAgICAgICAgICAgICAgICAgIGlmIChmbGFnID09IDEgJiYgX3RoaXMuYWN0aXZlX3Bhc3NpdmVbcF0gPT0gJ2EnICsgKF9qICsgMSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSAwOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0ZW1wX2xpc3QucHVzaChfdGhpcy5hY3RpdmVfcGFzc2l2ZVtwXSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gdGVtcF9saXN0OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfaTggPT0gMikgewogICAgICAgICAgICAgICAgICAvL+S7o+ihqOeCueWHu+eahHBhc3NpdmUKICAgICAgICAgICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICcucCcgKyAoX2ogKyAxKSkuYXR0cignc3Ryb2tlJywgJyNlNWU1ZTUnKTsKICAgICAgICAgICAgICAgICAgdmFyIF90ZW1wX2xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgdmFyIF9mbGFnID0gMTsKCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9wID0gMDsgX3AgPCBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5sZW5ndGg7IF9wKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX2ZsYWcgPT0gMSAmJiBfdGhpcy5hY3RpdmVfcGFzc2l2ZVtfcF0gPT0gJ3AnICsgKF9qICsgMSkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9mbGFnID0gMDsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX3RlbXBfbGlzdC5wdXNoKF90aGlzLmFjdGl2ZV9wYXNzaXZlW19wXSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RlbXBfbGlzdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOyAvLyDov5nkuKrlnLDmlrnpnIDopoHliqDkuIrmr4/kuIDkuKphdHJpYnV0ZeeahHRlbXBvcmFs5L+h5oGvCgogICAgICAgICAgdmFyIHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCAxXSkucmFuZ2UoW2hlaWdodF9zY2FsZSwgMF0pOwogICAgICAgICAgdmFyIHlTY2FsZTIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMC4yXSkucmFuZ2UoW2hlaWdodF9zY2FsZSwgMF0pOwogICAgICAgICAgdmFyIGFyZWEgPSBkMy5hcmVhKCkueChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZC54OwogICAgICAgICAgfSkueTAoaGVpZ2h0X3NjYWxlKS55MShmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4geVNjYWxlKGQueSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciB0ZW1wb3JhbF90ZW1wID0gW107CiAgICAgICAgICB2YXIgdGVtcG9yYWxfaG9yaXpvbiA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgZGF0YV9zdGF0aXN0aWNzLmxlbmd0aDsgcCsrKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YV9zdGF0aXN0aWNzW3BdW19pOF1bX2pdICE9ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgZGF0YV9zdGF0aXN0aWNzW3BdW19pOF1bX2pdID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGVtcG9yYWxfdGVtcC5wdXNoKHsKICAgICAgICAgICAgICB4OiB4X3N0YXJ0MSArIHAgKiB3aWR0aF9zY2FsZSAvIGRhdGFfc3RhdGlzdGljcy5sZW5ndGgsCiAgICAgICAgICAgICAgeTogZGF0YV9zdGF0aXN0aWNzW3BdW19pOF1bX2pdIC8gZGF0YVtfal0ubGVuZ3RoCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0ZW1wb3JhbF9ob3Jpem9uLnB1c2goZGF0YV9zdGF0aXN0aWNzW3BdW19pOF1bX2pdIC8gZGF0YVtfal0ubGVuZ3RoKTsKICAgICAgICAgIH0gLy/ov5nph4zmmK/liqDpgqPkupvlsI/mlrnlnZfvvIzkvYbmmK/ms6jmhI/opoHmmK90ZW1wb3JhbOS/oeaBrwoKCiAgICAgICAgICBzdmdfMS5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9zdGFydDEpLmF0dHIoInkiLCB5X3N0YXJ0KS5hdHRyKCJoZWlnaHQiLCBoZWlnaHRfc2NhbGUpLmF0dHIoIndpZHRoIiwgd2lkdGhfc2NhbGUgLSA1KS5hdHRyKCJmaWxsIiwgJ3doaXRlJykuYXR0cigic3Ryb2tlIiwgIiNlNWU1ZTUiKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAxKS5hdHRyKCJvcGFjaXR5IiwgMC4yKS5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF9pOCAhPSAwKSB7CiAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3Ryb2tlJykgPT0gIiNlNWU1ZTUiKSB7CiAgICAgICAgICAgICAgICAvL+ihqOekuumrmOS6ruS6hgogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5zdHJva2VfY29sb3IpOwoKICAgICAgICAgICAgICAgIGlmIChfaTggPT0gMSkgewogICAgICAgICAgICAgICAgICAvL+S7o+ihqOeCueWHu+eahGFjdGl2ZQogICAgICAgICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICcuYScgKyAoX2ogKyAxKSkuYXR0cignc3Ryb2tlLXdpZHRoJywgMSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKCdhJyArIChfaiArIDEpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX2k4ID09IDIpIHsKICAgICAgICAgICAgICAgICAgLy/ku6Pooajngrnlh7vnmoRwYXNzaXZlCiAgICAgICAgICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgJy5wJyArIChfaiArIDEpKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAxKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goJ3AnICsgKF9qICsgMSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvL+ihqOekuuWPlua2iOeCueWHuwogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzdHJva2UnLCAiI2U1ZTVlNSIpOwoKICAgICAgICAgICAgICAgIGlmIChfaTggPT0gMSkgewogICAgICAgICAgICAgICAgICAvL+S7o+ihqOeCueWHu+eahGFjdGl2ZQogICAgICAgICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICcuYScgKyAoX2ogKyAxKSkuYXR0cignc3Ryb2tlLXdpZHRoJywgMC4wNSk7CiAgICAgICAgICAgICAgICAgIHZhciB0ZW1wX2xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgdmFyIGZsYWcgPSAxOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX3AyID0gMDsgX3AyIDwgX3RoaXMuYWN0aXZlX3Bhc3NpdmUubGVuZ3RoOyBfcDIrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChmbGFnID09IDEgJiYgX3RoaXMuYWN0aXZlX3Bhc3NpdmVbX3AyXSA9PSAnYScgKyAoX2ogKyAxKSkgewogICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRlbXBfbGlzdC5wdXNoKF90aGlzLmFjdGl2ZV9wYXNzaXZlW19wMl0pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZSA9IHRlbXBfbGlzdDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX2k4ID09IDIpIHsKICAgICAgICAgICAgICAgICAgLy/ku6Pooajngrnlh7vnmoRwYXNzaXZlCiAgICAgICAgICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgJy5wJyArIChfaiArIDEpKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjA1KTsKICAgICAgICAgICAgICAgICAgdmFyIF90ZW1wX2xpc3QyID0gW107CiAgICAgICAgICAgICAgICAgIHZhciBfZmxhZzIgPSAxOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX3AzID0gMDsgX3AzIDwgX3RoaXMuYWN0aXZlX3Bhc3NpdmUubGVuZ3RoOyBfcDMrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChfZmxhZzIgPT0gMSAmJiBfdGhpcy5hY3RpdmVfcGFzc2l2ZVtfcDNdID09ICdwJyArIChfaiArIDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfZmxhZzIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBfdGVtcF9saXN0Mi5wdXNoKF90aGlzLmFjdGl2ZV9wYXNzaXZlW19wM10pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZSA9IF90ZW1wX2xpc3QyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgdGhyZXNob2xkcyA9IFswLjIsIDAuNCwgMC42LCAwLjhdOwogICAgICAgICAgdmFyIGFyZWFHZW5lcmF0b3IgPSBkMy5hcmVhKCkueChmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICByZXR1cm4geF9zdGFydDEgKyBpICogKHdpZHRoX3NjYWxlICsgMTApIC8gZGF0YV9zdGF0aXN0aWNzLmxlbmd0aDsKICAgICAgICAgIH0pLnkwKGhlaWdodF9zY2FsZSkueTEoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIHlTY2FsZTIoZCk7CiAgICAgICAgICB9KS5jdXJ2ZShkMy5jdXJ2ZUJhc2lzKTsKCiAgICAgICAgICB2YXIgbGF5ZXJzID0gX3RoaXMuc3BsaXREYXRhQnlUaHJlc2hvbGRzKHRlbXBvcmFsX2hvcml6b24sIHRocmVzaG9sZHMsIDAuMik7CgogICAgICAgICAgdmFyIHN2Z18xXzEgPSBzdmdfMS5hcHBlbmQoJ2cnKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIiArIHlfc3RhcnQgKyAiKSIpOwogICAgICAgICAgc3ZnXzFfMS5zZWxlY3RBbGwoIi5sYXllciIpLmRhdGEobGF5ZXJzKS5lbnRlcigpLmFwcGVuZCgicGF0aCIpLmF0dHIoImNsYXNzIiwgImxheWVyIikuYXR0cigiZCIsIGFyZWFHZW5lcmF0b3IpLmF0dHIoIm9wYWNpdHkiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICByZXR1cm4gKGkgKyAxKSAqIDAuMzsKICAgICAgICAgIH0pLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpLmF0dHIoImNsYXNzIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX2k4ID09IDEpIHsKICAgICAgICAgICAgICByZXR1cm4gInRlbXBvcmFsICIgKyBzdGFnZSArICcgYTInICsgKF9qICsgMSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoX2k4ID09IDIpIHsKICAgICAgICAgICAgICByZXR1cm4gInRlbXBvcmFsICIgKyBzdGFnZSArICcgcDInICsgKF9qICsgMSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuICJ0ZW1wb3JhbCAiICsgc3RhZ2UgKyAnIGQyJyArIChfaiArIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVsyXVswXTsgLy9kIGEgcAoKICAgICAgICAgICAgdmFyIG9yZGVyID0gcGFyc2VJbnQoJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMl1bMl0pIC0gMTsgLy8gMSAyIDMgNC4uLgogICAgICAgICAgICAvL+mcgOimgeaPkOWPluWHuuaJgOacieebuOi/nueahOe6v+S7peWPimJhcgoKICAgICAgICAgICAgdmFyIGtleXNfdGVtcCA9IFsnZGVfYWMnLCAnYWNfcGEnLCAnZGVfcGEnLCAnZGVfYWNfcGEnXTsKCiAgICAgICAgICAgIGZvciAodmFyIF9pMTMgPSAwOyBfaTEzIDwga2V5c190ZW1wLmxlbmd0aDsgX2kxMysrKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgX2o0ID0gMDsgX2o0IDwgY29ycl9zdGF0aXN0aWNzX2FsbFtrZXlzX3RlbXBbX2kxM11dLmxlbmd0aDsgX2o0KyspIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lX3RlbXAgPSBrZXlzX3RlbXBbX2kxM107CiAgICAgICAgICAgICAgICB2YXIgdmFsdWVfdGVtcCA9IHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxba2V5c190ZW1wW19pMTNdXVtfajRdWzBdKTsgLy8g6aaW5YWI55S7YmFyCgogICAgICAgICAgICAgICAgaWYgKF9pMTMgPT0gMykgewogICAgICAgICAgICAgICAgICB2YXIgdGVtcDAgPSBwYXJzZUludCh2YWx1ZV90ZW1wIC8gMTAwKTsKICAgICAgICAgICAgICAgICAgdmFyIHRlbXAyID0gdmFsdWVfdGVtcCAlIDEwOwogICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwYXJzZUludCgodmFsdWVfdGVtcCAtIHRlbXAwICogMTAwKSAvIDEwKTsKCiAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMCkgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDEpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAyKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goJ2EnICsgKHRlbXAxICsgMSkpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaCgncCcgKyAodGVtcDIgKyAxKSk7CgogICAgICAgICAgICAgICAgICAkKCcuc3RhZ2UnICsgc3RhZ2UgKyAnLmRlX2FjX3BhLicgKyB2YWx1ZV90ZW1wKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuZCcgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5hJyArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAnICsgKHRlbXAyICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5kMicgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmEyJyArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcucDInICsgKHRlbXAyICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdmFyIF90ZW1wMyA9IHBhcnNlSW50KHZhbHVlX3RlbXAgLyAxMCk7CgogICAgICAgICAgICAgICAgICB2YXIgX3RlbXA0ID0gdmFsdWVfdGVtcCAlIDEwOwoKICAgICAgICAgICAgICAgICAgdmFyIGswID0gJ2QnOwogICAgICAgICAgICAgICAgICB2YXIgazEgPSAnYSc7CiAgICAgICAgICAgICAgICAgIHZhciBrayA9ICdkZV9hYyc7CgogICAgICAgICAgICAgICAgICBpZiAoX2kxMyA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXA0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChfaTEzID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSBfdGVtcDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSBfdGVtcDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgazAgPSAnYSc7CiAgICAgICAgICAgICAgICAgICAgazEgPSAncCc7CiAgICAgICAgICAgICAgICAgICAga2sgPSAnYWNfcGEnOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoX2kxMyA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXA0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGsxID0gJ3AnOwogICAgICAgICAgICAgICAgICAgIGtrID0gJ2RlX3BhJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChrMCArIChfdGVtcDMgKyAxKSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGsxICsgKF90ZW1wNCArIDEpKTsKCiAgICAgICAgICAgICAgICAgICQoJy5zdGFnZScgKyBzdGFnZSArICcuJyArIGtrICsgIi4iICsgdmFsdWVfdGVtcCkuYXR0cigic3Ryb2tlIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArIChfdGVtcDMgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazEgKyAoX3RlbXA0ICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAnMicgKyAoX3RlbXAzICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazEgKyAnMicgKyAoX3RlbXA0ICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lX3NwbGl0ID0gdHlwZSA9ICQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZSA9ICcuJzsKCiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgY2xhc3NfbmFtZV9zcGxpdC5sZW5ndGg7IGMrKykgewogICAgICAgICAgICAgIGNsYXNzX25hbWUgKz0gY2xhc3NfbmFtZV9zcGxpdFtjXTsKCiAgICAgICAgICAgICAgaWYgKGMgPCBjbGFzc19uYW1lX3NwbGl0Lmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgIGNsYXNzX25hbWUgKz0gJy4nOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAvL2NvbnNvbGUubG9nKGNsYXNzX25hbWUsIF90aGlzLmhpZ2hsaWdodF9jbGFzcykKCgogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKGNsYXNzX25hbWUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVsyXVswXTsgLy9kIGEgcAoKICAgICAgICAgICAgdmFyIG9yZGVyID0gcGFyc2VJbnQoJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMl1bMl0pIC0gMTsgLy8gMSAyIDMgNC4uLgogICAgICAgICAgICAvL2NvbnNvbGUubG9nKHR5cGUsIG9yZGVyKQogICAgICAgICAgICAvL+mcgOimgeaPkOWPluWHuuaJgOacieebuOi/nueahOe6v+S7peWPimJhcgoKICAgICAgICAgICAgdmFyIGtleXNfdGVtcCA9IFsnZGVfYWMnLCAnYWNfcGEnLCAnZGVfcGEnLCAnZGVfYWNfcGEnXTsKCiAgICAgICAgICAgIGZvciAodmFyIF9pMTQgPSAwOyBfaTE0IDwga2V5c190ZW1wLmxlbmd0aDsgX2kxNCsrKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgX2o1ID0gMDsgX2o1IDwgY29ycl9zdGF0aXN0aWNzX2FsbFtrZXlzX3RlbXBbX2kxNF1dLmxlbmd0aDsgX2o1KyspIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lX3RlbXAgPSBrZXlzX3RlbXBbX2kxNF07CiAgICAgICAgICAgICAgICB2YXIgdmFsdWVfdGVtcCA9IHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxba2V5c190ZW1wW19pMTRdXVtfajVdWzBdKTsgLy8g6aaW5YWI55S7YmFyCgogICAgICAgICAgICAgICAgaWYgKF9pMTQgPT0gMykgewogICAgICAgICAgICAgICAgICB2YXIgX3JldDMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAwID0gcGFyc2VJbnQodmFsdWVfdGVtcCAvIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAyID0gdmFsdWVfdGVtcCAlIDEwOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMSA9IHBhcnNlSW50KCh2YWx1ZV90ZW1wIC0gdGVtcDAgKiAxMDApIC8gMTApOwoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZSA9IF90aGlzLnJlbW92ZUVsZW1lbnQoX3RoaXMuYWN0aXZlX3Bhc3NpdmUsIFsnYScgKyAodGVtcDEgKyAxKSwgJ3AnICsgKHRlbXAyICsgMSldKTsKICAgICAgICAgICAgICAgICAgICAkKCcuc3RhZ2UnICsgc3RhZ2UgKyAnLmRlX2FjX3BhLicgKyB2YWx1ZV90ZW1wKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5saW5lX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuZCcgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5kJyArICh0ZW1wMCArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmEnICsgKHRlbXAxICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuYScgKyAodGVtcDEgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5wJyArICh0ZW1wMiArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAnICsgKHRlbXAyICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5kMicgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmQyJyArICh0ZW1wMCArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuYTInICsgKHRlbXAxICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5hMicgKyAodGVtcDEgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAyJyArICh0ZW1wMiArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLnRlbXBvcmFsLicgKyBzdGFnZSArICcucDInICsgKHRlbXAyICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICAgICAgaWYgKF9yZXQzID09PSAiY29udGludWUiKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmV0NCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDAgPSBwYXJzZUludCh2YWx1ZV90ZW1wIC8gMTApOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMSA9IHZhbHVlX3RlbXAgJSAxMDsKICAgICAgICAgICAgICAgICAgICB2YXIgazAgPSAnZCc7CiAgICAgICAgICAgICAgICAgICAgdmFyIGsxID0gJ2EnOwogICAgICAgICAgICAgICAgICAgIHZhciBrayA9ICdkZV9hYyc7CgogICAgICAgICAgICAgICAgICAgIGlmIChfaTE0ID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChfaTE0ID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBrMCA9ICdhJzsKICAgICAgICAgICAgICAgICAgICAgIGsxID0gJ3AnOwogICAgICAgICAgICAgICAgICAgICAga2sgPSAnYWNfcGEnOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKF9pMTQgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGsxID0gJ3AnOwogICAgICAgICAgICAgICAgICAgICAga2sgPSAnZGVfcGEnOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUgPSBfdGhpcy5yZW1vdmVFbGVtZW50KF90aGlzLmFjdGl2ZV9wYXNzaXZlLCBbazAgKyAodGVtcDAgKyAxKSwgazEgKyAodGVtcDEgKyAxKV0pOwogICAgICAgICAgICAgICAgICAgICQoJy5zdGFnZScgKyBzdGFnZSArICcuJyArIGtrICsgIi4iICsgdmFsdWVfdGVtcCkuYXR0cigic3Ryb2tlIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGswICsgKHRlbXAwICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGswICsgKHRlbXAwICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsxICsgKHRlbXAxICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsxICsgKHRlbXAxICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAnMicgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArICcyJyArICh0ZW1wMCArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsxICsgJzInICsgKHRlbXAxICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazEgKyAnMicgKyAodGVtcDEgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgICAgICBpZiAoX3JldDQgPT09ICJjb250aW51ZSIpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKTsKICAgICAgICAgIHlfc3RhcnQgKz0gaGVpZ2h0X3NjYWxlICsgMzsKICAgICAgICB9OwoKICAgICAgICBmb3IgKHZhciBfaiA9IDA7IF9qIDwga2V5c19pLmxlbmd0aDsgX2orKykgewogICAgICAgICAgX2xvb3A0KF9qKTsKICAgICAgICB9CgogICAgICAgIHN2Z18zLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgKHlfc3RhcnQgKyB5X3N0YXJ0MikgLyAyKS5hdHRyKCJmb250LXNpemUiLCAxNCkudGV4dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX2k4ID09IDApIHsKICAgICAgICAgICAgcmV0dXJuICdkJzsKICAgICAgICAgIH0gZWxzZSBpZiAoX2k4ID09IDEpIHsKICAgICAgICAgICAgcmV0dXJuICdwJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAncic7CiAgICAgICAgICB9CiAgICAgICAgfSkuYXR0cigib3BhY2l0eSIsIDAuMik7CiAgICAgICAgeV9zdGFydCArPSAxMDsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIF9pOCA9IDA7IF9pOCA8IGRhdGFfc3RhdGlzdGljc19hbGwubGVuZ3RoOyBfaTgrKykgewogICAgICAgIF9sb29wKF9pOCk7CiAgICAgIH0gLy8g55S75Y+Y6YeP5LmL6Ze055qEaW50ZXJhY3Rpb24KCgogICAgICB2YXIgc3ZnMiA9IHN2Z19zdGFnZS5hcHBlbmQoImciKS5hdHRyKCJ3aWR0aCIsIDMwMCkuYXR0cigiaGVpZ2h0IiwgMjgwKS5hdHRyKCJjbGFzcyIsICJzdGFnZV9pbnRlcmFjdGlvbiIgKyBzdGFnZSkuYXR0cigiaWQiLCAic3RhZ2Vfc2luZ2xlIiArIHN0YWdlKS5zdHlsZSgiei1pbmRleCIsIDEpOyAvLyDlhYjnlLvkuKTkuKrkuKTkuKrkuIDotbflh7rnjrDnmoTvvIzlubbkuJTmoIfms6jlh7rmnIDlpKfnmoTpgqPkuIDkuKrvvIzlhbbku5bnmoRvcGFjaXR56LCD5pW05b6I5L2OCgogICAgICB2YXIga2V5c19jID0gWydkZV9hYycsICdhY19wYScsICdkZV9wYSddOwogICAgICB2YXIgY29yX3RlbXBfa2V5cyA9IE9iamVjdC5rZXlzKGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ10pOyAvL2NvbnNvbGUubG9nKGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ10pCgogICAgICB2YXIgbGluZUdlbmVyYXRvciA9IGQzLmxpbmUoKS54KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQueDsKICAgICAgfSkueShmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnk7CiAgICAgIH0pLmN1cnZlKGQzLmN1cnZlTGluZWFyKTsKICAgICAgdmFyIGhlaWdodF9jdXJ2ZV9zY2FsZTEgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbNjAsIDE1MF0pLnJhbmdlKFsxMCwgMjBdKTsKICAgICAgdmFyIHhfbGVmdF9saXN0ID0gW107CgogICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKF9pOSkgewogICAgICAgIHZhciBjb3JfdGVtcCA9IGNvcnJfc3RhdGlzdGljc19hbGxba2V5c19jW19pOV1dOwoKICAgICAgICB2YXIgX2xvb3A1ID0gZnVuY3Rpb24gX2xvb3A1KF9qNikgewogICAgICAgICAgdmFyIHRlbXAgPSBwYXJzZUludChjb3JfdGVtcFtfajZdWzBdKTsKICAgICAgICAgIHZhciB0ZW1wMCA9IHBhcnNlSW50KHRlbXAgLyAxMCkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciB0ZW1wMSA9ICh0ZW1wICUgMTApLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIga2V5XzEgPSAnJzsKICAgICAgICAgIHZhciBrZXlfMiA9ICcnOwoKICAgICAgICAgIGlmIChfaTkgPT0gMCkgewogICAgICAgICAgICBrZXlfMSA9ICcwJyArIHRlbXAwOwogICAgICAgICAgICBrZXlfMiA9ICcxJyArIHRlbXAxOwogICAgICAgICAgICB2YXIgZmxhZyA9IDA7CgogICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGNvcl90ZW1wX2tleXMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCIqKioiLCAocGFyc2VJbnQoY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfYWNfcGEnXVtjb3JfdGVtcF9rZXlzW3RdXVswXSkgLSBwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbdF1dWzBdKSUxMCkvMTApCiAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGNvcl90ZW1wW19qNl0pID09IChwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbdF1dWzBdKSAtIHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bY29yX3RlbXBfa2V5c1t0XV1bMF0pICUgMTApIC8gMTApIHsKICAgICAgICAgICAgICAgIGZsYWcgPSAxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZmxhZyA9PSAxKSB7CiAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoX2k5ID09IDEpIHsKICAgICAgICAgICAga2V5XzEgPSAnMScgKyB0ZW1wMDsKICAgICAgICAgICAga2V5XzIgPSAnMicgKyB0ZW1wMTsKICAgICAgICAgICAgdmFyIF9mbGFnMyA9IDA7CgogICAgICAgICAgICBmb3IgKHZhciBfdCA9IDA7IF90IDwgY29yX3RlbXBfa2V5cy5sZW5ndGg7IF90KyspIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCIqKioiLCBwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbdF1dWzBdKSAtIHBhcnNlSW50KHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bY29yX3RlbXBfa2V5c1t0XV1bMF0pLzEwMCkgKiAxMDApCiAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGNvcl90ZW1wW19qNl0pID09IHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bY29yX3RlbXBfa2V5c1tfdF1dWzBdKSAtIHBhcnNlSW50KHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bY29yX3RlbXBfa2V5c1tfdF1dWzBdKSAvIDEwMCkgKiAxMDApIHsKICAgICAgICAgICAgICAgIF9mbGFnMyA9IDE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChfZmxhZzMgPT0gMSkgewogICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBrZXlfMSA9ICcwJyArIHRlbXAwOwogICAgICAgICAgICBrZXlfMiA9ICcyJyArIHRlbXAxOwogICAgICAgICAgICB2YXIgX2ZsYWc0ID0gMDsKCiAgICAgICAgICAgIGZvciAodmFyIF90MiA9IDA7IF90MiA8IGNvcl90ZW1wX2tleXMubGVuZ3RoOyBfdDIrKykgewogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIioqKiIsIHBhcnNlSW50KHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bY29yX3RlbXBfa2V5c1t0XV1bMF0pLzEwMCkgKiAxMCkKICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoY29yX3RlbXBbX2o2XSkgPT0gcGFyc2VJbnQoW2NvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bY29yX3RlbXBfa2V5c1tfdDJdXVswXV1bMF0pICUgMTAgKyBwYXJzZUludChwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbX3QyXV1bMF0pIC8gMTAwKSAqIDEwKSB7CiAgICAgICAgICAgICAgICBfZmxhZzQgPSAxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoX2ZsYWc0ID09IDEpIHsKICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciB5MSA9IHBvc2l0aW9uW2tleV8xXTsKICAgICAgICAgIHZhciB5MiA9IHBvc2l0aW9uW2tleV8yXTsKICAgICAgICAgIHZhciB4X2xlZnQgPSB4X3N0YXJ0MSAtIGhlaWdodF9jdXJ2ZV9zY2FsZTEoeTIgLSB5MSk7CiAgICAgICAgICB2YXIgZmxhZ194bCA9IDA7CgogICAgICAgICAgZm9yICh2YXIgeGwgPSAwOyB4bCA8IHhfbGVmdF9saXN0Lmxlbmd0aDsgeGwrKykgewogICAgICAgICAgICBpZiAoTWF0aC5hYnMoeF9sZWZ0X2xpc3RbeGxdIC0geF9sZWZ0KSA8IDMpIHsKICAgICAgICAgICAgICB4X2xlZnQgLT0gMzsKICAgICAgICAgICAgICB4X2xlZnRfbGlzdC5wdXNoKHhfbGVmdCk7CiAgICAgICAgICAgICAgZmxhZ194bCA9IDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZmxhZ194bCA9PSAwKSB7CiAgICAgICAgICAgIHhfbGVmdF9saXN0LnB1c2goeF9sZWZ0KTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgeF9yaWdodCA9IHhfc3RhcnQxIC0gNTsKICAgICAgICAgIHZhciBkYXRhMSA9IFt7CiAgICAgICAgICAgIHg6IHhfcmlnaHQsCiAgICAgICAgICAgIHk6IHkxCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHg6IHhfbGVmdCwKICAgICAgICAgICAgeTogeTEKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgeDogeF9sZWZ0LAogICAgICAgICAgICB5OiB5MgogICAgICAgICAgfSwgewogICAgICAgICAgICB4OiB4X3JpZ2h0LAogICAgICAgICAgICB5OiB5MgogICAgICAgICAgfV07IC8v5byA5aeL6K6h566XY28tb2NjdXJlbmNl5Ye6546w55qE5oOF5Ya1CgogICAgICAgICAgdmFyIGNvcnJfdGVtcG9yYWwgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBwID0gMDsgcCA8IGNvcnJfc3RhdGlzdGljcy5sZW5ndGg7IHArKykgewogICAgICAgICAgICB2YXIgZmxhZ190ZW1wID0gMDsKCiAgICAgICAgICAgIGZvciAodmFyIHEgPSAwOyBxIDwgY29ycl9zdGF0aXN0aWNzW3BdW2tleXNfY1tfaTldXS5sZW5ndGg7IHErKykgewogICAgICAgICAgICAgIGlmIChjb3JyX3N0YXRpc3RpY3NbcF1ba2V5c19jW19pOV1dW3FdWzBdID09IGNvcl90ZW1wW19qNl1bMF0pIHsKICAgICAgICAgICAgICAgIGZsYWdfdGVtcCA9IDE7CiAgICAgICAgICAgICAgICBjb3JyX3RlbXBvcmFsLnB1c2goY29ycl9zdGF0aXN0aWNzW3BdW2tleXNfY1tfaTldXVtxXVsxXSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChmbGFnX3RlbXAgPT0gMCkgewogICAgICAgICAgICAgIGNvcnJfdGVtcG9yYWwucHVzaCgwKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciB5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMC41XSkucmFuZ2UoW2hlaWdodF9zY2FsZSwgMF0pOwogICAgICAgICAgdmFyIGFyZWEgPSBkMy5hcmVhKCkueChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZC54OwogICAgICAgICAgfSkueTAoaGVpZ2h0X3NjYWxlKS55MShmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4geVNjYWxlKGQueSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciB0ZW1wb3JhbF90ZW1wID0gW107CiAgICAgICAgICB2YXIgdGVtcG9yYWxfaG9yaXpvbiA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIF9wNCA9IDA7IF9wNCA8IGNvcnJfdGVtcG9yYWwubGVuZ3RoOyBfcDQrKykgewogICAgICAgICAgICB0ZW1wb3JhbF90ZW1wLnB1c2goewogICAgICAgICAgICAgIHg6IHhfbGVmdCArIDUgKyBfcDQgKiB3aWR0aF9zY2FsZSAvIGRhdGFfc3RhdGlzdGljcy5sZW5ndGgsCiAgICAgICAgICAgICAgeTogY29ycl90ZW1wb3JhbFtfcDRdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0ZW1wb3JhbF9ob3Jpem9uLnB1c2goY29ycl90ZW1wb3JhbFtfcDRdKTsKICAgICAgICAgIH0gLy/lvIDlp4vnlLtjby10ZW1wb3JhbAoKCiAgICAgICAgICB2YXIgc3ZnX3QgPSBzdmcyLmFwcGVuZCgnZycpLmF0dHIoImNsYXNzIiwgImNvX3RlbSIgKyBzdGFnZSArIF9pOSArIGNvcl90ZW1wW19qNl1bMF0pLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoNSwgMCkiKS5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpOwogICAgICAgICAgc3ZnX3QuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfbGVmdCArIDIpLmF0dHIoInkiLCAoeTEgKyB5MikgLyAyICsgNSkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0X3NjYWxlKS5hdHRyKCJ3aWR0aCIsIHdpZHRoX3NjYWxlIC0gNSkuYXR0cigiZmlsbCIsICd3aGl0ZScpLmF0dHIoImNsYXNzIiwgInRlbXBvcmFsIikuYXR0cigic3Ryb2tlIiwgIiM1YjViNWIiKTsKICAgICAgICAgIHN2Z190LmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X2xlZnQgKyAyKS5hdHRyKCJ5IiwgKHkxICsgeTIpIC8gMiArIDUpLmF0dHIoImhlaWdodCIsIGhlaWdodF9zY2FsZSkuYXR0cigid2lkdGgiLCB3aWR0aF9zY2FsZSAtIDUpLmF0dHIoImZpbGwiLCAnIzViNWI1YicpLmF0dHIoImNsYXNzIiwgInRlbXBvcmFsIikuYXR0cigic3Ryb2tlIiwgImJsYWNrIikuYXR0cigib3BhY2l0eSIsIDAuMDUpOwogICAgICAgICAgdmFyIHRocmVzaG9sZHMgPSBbMC4xLCAwLjIsIDAuMywgMC40LCAwLjVdOwogICAgICAgICAgdmFyIHlTY2FsZTIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMC4xXSkucmFuZ2UoW2hlaWdodF9zY2FsZSwgMF0pOwogICAgICAgICAgdmFyIGFyZWFHZW5lcmF0b3IgPSBkMy5hcmVhKCkueChmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICByZXR1cm4geF9zdGFydDEgKyBpICogKHdpZHRoX3NjYWxlICsgMTApIC8gZGF0YV9zdGF0aXN0aWNzLmxlbmd0aDsKICAgICAgICAgIH0pLnkwKGhlaWdodF9zY2FsZSkueTEoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIHlTY2FsZTIoZCk7CiAgICAgICAgICB9KS5jdXJ2ZShkMy5jdXJ2ZUJhc2lzKTsKCiAgICAgICAgICB2YXIgbGF5ZXJzID0gX3RoaXMuc3BsaXREYXRhQnlUaHJlc2hvbGRzKHRlbXBvcmFsX2hvcml6b24sIHRocmVzaG9sZHMsIDAuMSk7CgogICAgICAgICAgdmFyIHN2Z190XzEgPSBzdmdfdC5hcHBlbmQoJ2cnKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAoeF9sZWZ0IC0gNDgpICsgIiwiICsgKCh5MSArIHkyKSAvIDIgKyA1KSArICIpIik7CiAgICAgICAgICBzdmdfdF8xLnNlbGVjdEFsbCgiLmxheWVyX2NvIikuZGF0YShsYXllcnMpLmVudGVyKCkuYXBwZW5kKCJwYXRoIikuYXR0cigiY2xhc3MiLCAibGF5ZXIiKS5hdHRyKCJkIiwgYXJlYUdlbmVyYXRvcikuYXR0cigib3BhY2l0eSIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIHJldHVybiAoaSArIDEpICogMC4zOwogICAgICAgICAgfSkuYXR0cigiZmlsbCIsIF90aGlzLmNvcl90ZW1wb3JhbF9jb2xvcikuYXR0cigiY2xhc3MiLCAidGVtcG9yYWwiKTsgLy8uYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKQoKICAgICAgICAgIHN2ZzIuYXBwZW5kKCJjaXJjbGUiKS5hdHRyKCJjeCIsIHhfbGVmdCkuYXR0cigiY3kiLCAoeTEgKyB5MikgLyAyKS5hdHRyKCJyIiwgMikuYXR0cigiZmlsbCIsIF90aGlzLmNpcmNsZV9jb2xvcikuYXR0cigib3BhY2l0eSIsIDAuNCkuYXR0cigiY2xhc3MiLCAidGVtcG9yYWwgIiArICJzdGFnZSIgKyBzdGFnZSArICIgIiArIGtleXNfY1tfaTldICsgIiAiICsgY29yX3RlbXBbX2o2XVswXSkuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCgnLmNvX3RlbScgKyBzdGFnZSArIF9pOSArIGNvcl90ZW1wW19qNl1bMF0pLmF0dHIoInZpc2liaWxpdHkiLCAidmlzYWJsZSIpOwogICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0cm9rZScsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lMSA9IGNsYXNzX25hbWVbMl07CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lMiA9IHBhcnNlSW50KGNsYXNzX25hbWVbM10pOwogICAgICAgICAgICB2YXIgZmlyc3RfdHlwZSA9IChwYXJzZUludChjbGFzc19uYW1lMiAvIDEwKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHZhciBzZWNvbmRfdHlwZSA9IChjbGFzc19uYW1lMiAlIDEwICsgMSkudG9TdHJpbmcoKTsKCiAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKTsKCiAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSk7CgogICAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICB9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCgnLmNvX3RlbScgKyBzdGFnZSArIF9pOSArIGNvcl90ZW1wW19qNl1bMF0pLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgICAgICAgICQodGhpcykuYXR0cignc3Ryb2tlJywgX3RoaXMubGluZV9jb2xvcik7CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lMSA9IGNsYXNzX25hbWVbMl07CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lMiA9IHBhcnNlSW50KGNsYXNzX25hbWVbM10pOwogICAgICAgICAgICB2YXIgZmlyc3RfdHlwZSA9IChwYXJzZUludChjbGFzc19uYW1lMiAvIDEwKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHZhciBzZWNvbmRfdHlwZSA9IChjbGFzc19uYW1lMiAlIDEwICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUgPSBfdGhpcy5yZW1vdmVFbGVtZW50KF90aGlzLmFjdGl2ZV9wYXNzaXZlLCBbY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlLCBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlXSk7IC8vY29uc29sZS5sb2coIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXStmaXJzdF90eXBlKQoKICAgICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgIjIiICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKSkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpKSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkpIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpKSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBzdmcyLmFwcGVuZCgicGF0aCIpLmRhdHVtKGRhdGExKS5hdHRyKCJmaWxsIiwgIm5vbmUiKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5saW5lX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfajYgIT0gMCkgewogICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5hdHRyKCJvcGFjaXR5IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX2o2ICE9IDApIHsKICAgICAgICAgICAgICByZXR1cm4gMC4zOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiAwLjU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmF0dHIoImQiLCBsaW5lR2VuZXJhdG9yKS5hdHRyKCJjbGFzcyIsICJzdGFnZSIgKyBzdGFnZSArICIgIiArIGtleXNfY1tfaTldICsgIiAiICsgY29yX3RlbXBbX2o2XVswXSkub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQodGhpcykuYXR0cignc3Ryb2tlJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWUxID0gY2xhc3NfbmFtZVsxXTsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWUyID0gcGFyc2VJbnQoY2xhc3NfbmFtZVsyXSk7CiAgICAgICAgICAgIHZhciBmaXJzdF90eXBlID0gKHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgICAgdmFyIHNlY29uZF90eXBlID0gKGNsYXNzX25hbWUyICUgMTAgKyAxKS50b1N0cmluZygpOwoKICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpOwoKICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKTsKCiAgICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyAiMiIgKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0cm9rZScsIF90aGlzLmxpbmVfY29sb3IpOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZSA9ICQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZTEgPSBjbGFzc19uYW1lWzFdOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZTIgPSBwYXJzZUludChjbGFzc19uYW1lWzJdKTsKICAgICAgICAgICAgdmFyIGZpcnN0X3R5cGUgPSAocGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgICB2YXIgc2Vjb25kX3R5cGUgPSAoY2xhc3NfbmFtZTIgJSAxMCArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RoaXMucmVtb3ZlRWxlbWVudChfdGhpcy5hY3RpdmVfcGFzc2l2ZSwgW2NsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSwgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZV0pOyAvL2NvbnNvbGUubG9nKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0rZmlyc3RfdHlwZSkKCiAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpKSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyAiMiIgKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyAiMiIgKyBzZWNvbmRfdHlwZSkpIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKSkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkpIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBmb3IgKHZhciBfajYgPSAwOyBfajYgPCBjb3JfdGVtcC5sZW5ndGg7IF9qNisrKSB7CiAgICAgICAgICB2YXIgX3JldDUgPSBfbG9vcDUoX2o2KTsKCiAgICAgICAgICBpZiAoX3JldDUgPT09ICJjb250aW51ZSIpIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGZvciAodmFyIF9pOSA9IDA7IF9pOSA8IGtleXNfYy5sZW5ndGg7IF9pOSsrKSB7CiAgICAgICAgX2xvb3AyKF9pOSk7CiAgICAgIH0gLy/nlLvkuInkuKrkuIDotbflh7rnjrDnmoQKCgogICAgICB2YXIgaGVpZ2h0X2N1cnZlX3NjYWxlMiA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFs4MCwgMTkwXSkucmFuZ2UoWzE1LCAzMF0pOwogICAgICB2YXIgYm9yZGVyID0gMzsKCiAgICAgIHZhciBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMoX2kxMCkgewogICAgICAgIHZhciBjb3JfdGVtcCA9IHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bY29yX3RlbXBfa2V5c1tfaTEwXV1bMF0pOwogICAgICAgIHZhciB0ZW1wMCA9IHBhcnNlSW50KGNvcl90ZW1wIC8gMTAwKS50b1N0cmluZygpOwogICAgICAgIHZhciB0ZW1wMSA9IHBhcnNlSW50KChjb3JfdGVtcCAtIHBhcnNlSW50KHRlbXAwKSAqIDEwMCkgLyAxMCkudG9TdHJpbmcoKTsKICAgICAgICB2YXIgdGVtcDIgPSAoY29yX3RlbXAgJSAxMCkudG9TdHJpbmcoKTsKICAgICAgICB2YXIgeTAgPSBwb3NpdGlvblsnMCcgKyB0ZW1wMF07CiAgICAgICAgdmFyIHkxID0gcG9zaXRpb25bJzEnICsgdGVtcDFdOwogICAgICAgIHZhciB5MiA9IHBvc2l0aW9uWycyJyArIHRlbXAyXTsKICAgICAgICB2YXIgeV9tID0gKHkwICsgeTIpIC8gMjsKICAgICAgICB2YXIgeF9sZWZ0ID0geF9zdGFydDEgLSBoZWlnaHRfY3VydmVfc2NhbGUyKHkyIC0geTApOwogICAgICAgIHZhciB4X3JpZ2h0ID0geF9zdGFydDEgLSA1OwogICAgICAgIHZhciBkYXRhID0gW3sKICAgICAgICAgIHg6IHhfcmlnaHQsCiAgICAgICAgICB5OiB5MAogICAgICAgIH0sIHsKICAgICAgICAgIHg6IHhfbGVmdCArIGJvcmRlciwKICAgICAgICAgIHk6IHkwCiAgICAgICAgfSwgewogICAgICAgICAgeDogeF9sZWZ0LAogICAgICAgICAgeTogeTAgKyBib3JkZXIKICAgICAgICB9LCB7CiAgICAgICAgICB4OiB4X2xlZnQsCiAgICAgICAgICB5OiB5MiAtIGJvcmRlcgogICAgICAgIH0sIHsKICAgICAgICAgIHg6IHhfbGVmdCArIGJvcmRlciwKICAgICAgICAgIHk6IHkyCiAgICAgICAgfSwgewogICAgICAgICAgeDogeF9yaWdodCwKICAgICAgICAgIHk6IHkyCiAgICAgICAgfV07IC8v5byA5aeL6K6h566XY28tb2NjdXJlbmNl5Ye6546w55qE5oOF5Ya1CgogICAgICAgIHZhciBjb3JyX3RlbXBvcmFsID0gW107CgogICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgY29ycl9zdGF0aXN0aWNzLmxlbmd0aDsgcCsrKSB7CiAgICAgICAgICB2YXIgZmxhZ190ZW1wID0gMDsKCiAgICAgICAgICBmb3IgKHZhciBxID0gMDsgcSA8IGNvcnJfc3RhdGlzdGljc1twXVsnZGVfYWNfcGEnXS5sZW5ndGg7IHErKykgewogICAgICAgICAgICBpZiAoY29ycl9zdGF0aXN0aWNzW3BdWydkZV9hY19wYSddW3FdWzBdID09IGNvcl90ZW1wKSB7CiAgICAgICAgICAgICAgZmxhZ190ZW1wID0gMTsKICAgICAgICAgICAgICBjb3JyX3RlbXBvcmFsLnB1c2goY29ycl9zdGF0aXN0aWNzW3BdW2tleXNfY1tfaTEwXV1bcV1bMV0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGZsYWdfdGVtcCA9PSAwKSB7CiAgICAgICAgICAgIGNvcnJfdGVtcG9yYWwucHVzaCgwKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciB5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMV0pLnJhbmdlKFtoZWlnaHRfc2NhbGUsIDBdKTsKICAgICAgICB2YXIgYXJlYSA9IGQzLmFyZWEoKS54KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gZC54OwogICAgICAgIH0pLnkwKGhlaWdodF9zY2FsZSkueTEoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiB5U2NhbGUoZC55KTsKICAgICAgICB9KTsKICAgICAgICB2YXIgdGVtcG9yYWxfdGVtcCA9IFtdOwogICAgICAgIHZhciB0ZW1wb3JhbF9ob3Jpem9uID0gW107CgogICAgICAgIGZvciAodmFyIF9wNSA9IDA7IF9wNSA8IGNvcnJfdGVtcG9yYWwubGVuZ3RoOyBfcDUrKykgewogICAgICAgICAgdGVtcG9yYWxfdGVtcC5wdXNoKHsKICAgICAgICAgICAgeDogeF9sZWZ0ICsgNSArIF9wNSAqIHdpZHRoX3NjYWxlIC8gZGF0YV9zdGF0aXN0aWNzLmxlbmd0aCwKICAgICAgICAgICAgeTogY29ycl90ZW1wb3JhbFtfcDVdCiAgICAgICAgICB9KTsKICAgICAgICAgIHRlbXBvcmFsX2hvcml6b24ucHVzaChjb3JyX3RlbXBvcmFsW19wNV0pOwogICAgICAgIH0gLy/lvIDlp4vnlLtjby10ZW1wb3JhbAoKCiAgICAgICAgdmFyIHN2Z190ID0gc3ZnMi5hcHBlbmQoJ2cnKS5hdHRyKCJjbGFzcyIsICIzX2NvX3RlbSIgKyBzdGFnZSArIGNvcl90ZW1wKS5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMTAsIDApIik7CiAgICAgICAgc3ZnX3QuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfbGVmdCArIDUpLmF0dHIoInkiLCAoeTAgKyB5MikgLyAyICsgNSkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0X3NjYWxlKS5hdHRyKCJ3aWR0aCIsIHdpZHRoX3NjYWxlIC0gNSkuYXR0cigiZmlsbCIsICd3aGl0ZScpLmF0dHIoImNsYXNzIiwgInRlbXBvcmFsIikuYXR0cigic3Ryb2tlIiwgIiM1YjViNWIiKTsKICAgICAgICBzdmdfdC5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9sZWZ0ICsgNSkuYXR0cigieSIsICh5MCArIHkyKSAvIDIgKyA1KS5hdHRyKCJoZWlnaHQiLCBoZWlnaHRfc2NhbGUpLmF0dHIoIndpZHRoIiwgd2lkdGhfc2NhbGUgLSA1KS5hdHRyKCJmaWxsIiwgJyM1YjViNWInKS5hdHRyKCJjbGFzcyIsICJ0ZW1wb3JhbCIpLmF0dHIoInN0cm9rZSIsICJibGFjayIpLmF0dHIoIm9wYWNpdHkiLCAwLjA1KTsKICAgICAgICB2YXIgdGhyZXNob2xkcyA9IFswLjEsIDAuMiwgMC4zLCAwLjQsIDAuNV07CiAgICAgICAgdmFyIHlTY2FsZTIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMC4xXSkucmFuZ2UoW2hlaWdodF9zY2FsZSwgMF0pOwogICAgICAgIHZhciBhcmVhR2VuZXJhdG9yID0gZDMuYXJlYSgpLngoZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgIHJldHVybiB4X3N0YXJ0MSArIGkgKiAod2lkdGhfc2NhbGUgKyAxMCkgLyBkYXRhX3N0YXRpc3RpY3MubGVuZ3RoOwogICAgICAgIH0pLnkwKGhlaWdodF9zY2FsZSkueTEoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiB5U2NhbGUyKGQpOwogICAgICAgIH0pLmN1cnZlKGQzLmN1cnZlQmFzaXMpOwoKICAgICAgICB2YXIgbGF5ZXJzID0gX3RoaXMuc3BsaXREYXRhQnlUaHJlc2hvbGRzKHRlbXBvcmFsX2hvcml6b24sIHRocmVzaG9sZHMsIDAuMSk7CgogICAgICAgIHZhciBzdmdfdF8xID0gc3ZnX3QuYXBwZW5kKCdnJykuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgKHhfbGVmdCAtIDQ1KSArICIsIiArICgoeTAgKyB5MikgLyAyICsgNSkgKyAiKSIpOwogICAgICAgIHN2Z190XzEuc2VsZWN0QWxsKCIubGF5ZXJfY28iKS5kYXRhKGxheWVycykuZW50ZXIoKS5hcHBlbmQoInBhdGgiKS5hdHRyKCJjbGFzcyIsICJsYXllciIpLmF0dHIoImQiLCBhcmVhR2VuZXJhdG9yKS5hdHRyKCJvcGFjaXR5IiwgZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgIHJldHVybiAoaSArIDEpICogMC4zOwogICAgICAgIH0pLmF0dHIoImZpbGwiLCBfdGhpcy5jb3JfdGVtcG9yYWxfY29sb3IpLmF0dHIoImNsYXNzIiwgInRlbXBvcmFsIik7IC8vLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIikKCiAgICAgICAgc3ZnMi5hcHBlbmQoImNpcmNsZSIpLmF0dHIoImN4IiwgeF9sZWZ0KS5hdHRyKCJjeSIsICh5MCArIHkyKSAvIDIpLmF0dHIoInIiLCAzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY2lyY2xlX2NvbG9yKS5hdHRyKCJvcGFjaXR5IiwgMC41KS5hdHRyKCJjbGFzcyIsICJ0ZW1wb3JhbCAiICsgInN0YWdlIiArIHN0YWdlICsgJyBkZV9hY19wYSAnICsgY29yX3RlbXApLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIikub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAkKCIuM19jb190ZW0iICsgc3RhZ2UgKyBjb3JfdGVtcCkuYXR0cigidmlzaWJpbGl0eSIsICJ2aXNhYmxlIik7CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZSA9ICQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpOwogICAgICAgICAgdmFyIGNsYXNzX25hbWUxID0gY2xhc3NfbmFtZVsyXTsKICAgICAgICAgIHZhciBjbGFzc19uYW1lMiA9IHBhcnNlSW50KGNsYXNzX25hbWVbM10pOwogICAgICAgICAgJCgiLnN0YWdlIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTEgKyAiLiIgKyBjbGFzc19uYW1lMikuYXR0cignc3Ryb2tlJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgIHZhciBmaXJzdF90eXBlID0gKHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTAwKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgdGhpcmRfdHlwZSA9IChjbGFzc19uYW1lMiAlIDEwICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciBzZWNvbmRfdHlwZSA9IChwYXJzZUludCgoY2xhc3NfbmFtZTIgLSBwYXJzZUludChjbGFzc19uYW1lMiAvIDEwMCkgKiAxMDApIC8gMTApICsgMSkudG9TdHJpbmcoKTsKCiAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSk7CgogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKTsKCiAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGNsYXNzX25hbWUxWzZdICsgdGhpcmRfdHlwZSk7CgogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgIjIiICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyAiMiIgKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyAiMiIgKyB0aGlyZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgfSkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAkKCIuM19jb190ZW0iICsgc3RhZ2UgKyBjb3JfdGVtcCkuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKTsKICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTEgPSBjbGFzc19uYW1lWzJdOwogICAgICAgICAgdmFyIGNsYXNzX25hbWUyID0gcGFyc2VJbnQoY2xhc3NfbmFtZVszXSk7CiAgICAgICAgICAkKCIuc3RhZ2UiICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMSArICIuIiArIGNsYXNzX25hbWUyKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5saW5lX2NvbG9yKTsKICAgICAgICAgIHZhciBmaXJzdF90eXBlID0gKHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTAwKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgdGhpcmRfdHlwZSA9IChjbGFzc19uYW1lMiAlIDEwICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciBzZWNvbmRfdHlwZSA9IChwYXJzZUludCgoY2xhc3NfbmFtZTIgLSBwYXJzZUludChjbGFzc19uYW1lMiAvIDEwMCkgKiAxMDApIC8gMTApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RoaXMucmVtb3ZlRWxlbWVudChfdGhpcy5hY3RpdmVfcGFzc2l2ZSwgW2NsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSwgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSwgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlXSk7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHN2ZzIuYXBwZW5kKCJsaW5lIikuYXR0cigieDEiLCB4X3JpZ2h0KS5hdHRyKCJ4MiIsIHhfbGVmdCkuYXR0cigieTEiLCB5MSkuYXR0cigieTIiLCAoeTAgKyB5MikgLyAyKS5hdHRyKCJmaWxsIiwgIm5vbmUiKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5saW5lX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX2kxMCA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIDI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMzsKICAgICAgICAgIH0KICAgICAgICB9KS5hdHRyKCJvcGFjaXR5IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF9pMTAgPiAwKSB7CiAgICAgICAgICAgIHJldHVybiAwLjM7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMC41OwogICAgICAgICAgfQogICAgICAgIH0pLmF0dHIoImNsYXNzIiwgInN0YWdlIiArIHN0YWdlICsgJyBkZV9hY19wYSAnICsgY29yX3RlbXApLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgIHZhciBjbGFzc19uYW1lMSA9IGNsYXNzX25hbWVbMV07CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTIgPSBwYXJzZUludChjbGFzc19uYW1lWzJdKTsKICAgICAgICAgICQoIi5zdGFnZSIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxICsgIi4iICsgY2xhc3NfbmFtZTIpLmF0dHIoJ3N0cm9rZScsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICB2YXIgZmlyc3RfdHlwZSA9IChwYXJzZUludChjbGFzc19uYW1lMiAvIDEwMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHRoaXJkX3R5cGUgPSAoY2xhc3NfbmFtZTIgJSAxMCArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgc2Vjb25kX3R5cGUgPSAocGFyc2VJbnQoKGNsYXNzX25hbWUyIC0gcGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMDApICogMTAwKSAvIDEwKSArIDEpLnRvU3RyaW5nKCk7CgogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpOwoKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSk7CgogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpOwoKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgIHZhciBjbGFzc19uYW1lMSA9IGNsYXNzX25hbWVbMV07CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTIgPSBwYXJzZUludChjbGFzc19uYW1lWzJdKTsKICAgICAgICAgICQoIi5zdGFnZSIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxICsgIi4iICsgY2xhc3NfbmFtZTIpLmF0dHIoJ3N0cm9rZScsIF90aGlzLmxpbmVfY29sb3IpOwogICAgICAgICAgdmFyIGZpcnN0X3R5cGUgPSAocGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMDApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciB0aGlyZF90eXBlID0gKGNsYXNzX25hbWUyICUgMTAgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHNlY29uZF90eXBlID0gKHBhcnNlSW50KChjbGFzc19uYW1lMiAtIHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTAwKSAqIDEwMCkgLyAxMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUgPSBfdGhpcy5yZW1vdmVFbGVtZW50KF90aGlzLmFjdGl2ZV9wYXNzaXZlLCBbY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlLCBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlLCBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGVdKTsKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyAiMiIgKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyAiMiIgKyB0aGlyZF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyAiMiIgKyB0aGlyZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSkubG93ZXIoKTsKICAgICAgICBzdmcyLmFwcGVuZCgicGF0aCIpLmRhdHVtKGRhdGEpLmF0dHIoImZpbGwiLCAibm9uZSIpLmF0dHIoInN0cm9rZSIsIF90aGlzLmxpbmVfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfaTEwID4gMCkgewogICAgICAgICAgICByZXR1cm4gMjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAzOwogICAgICAgICAgfQogICAgICAgIH0pLmF0dHIoIm9wYWNpdHkiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX2kxMCA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIDAuMzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAwLjU7CiAgICAgICAgICB9CiAgICAgICAgfSkuYXR0cigiZCIsIGxpbmVHZW5lcmF0b3IpLmF0dHIoImNsYXNzIiwgInN0YWdlIiArIHN0YWdlICsgJyBkZV9hY19wYSAnICsgY29yX3RlbXApLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgIHZhciBjbGFzc19uYW1lMSA9IGNsYXNzX25hbWVbMV07CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTIgPSBwYXJzZUludChjbGFzc19uYW1lWzJdKTsKICAgICAgICAgICQoIi5zdGFnZSIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxICsgIi4iICsgY2xhc3NfbmFtZTIpLmF0dHIoJ3N0cm9rZScsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICB2YXIgZmlyc3RfdHlwZSA9IChwYXJzZUludChjbGFzc19uYW1lMiAvIDEwMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHRoaXJkX3R5cGUgPSAoY2xhc3NfbmFtZTIgJSAxMCArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgc2Vjb25kX3R5cGUgPSAocGFyc2VJbnQoKGNsYXNzX25hbWUyIC0gcGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMDApICogMTAwKSAvIDEwKSArIDEpLnRvU3RyaW5nKCk7CgogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpOwoKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSk7CgogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpOwoKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgIHZhciBjbGFzc19uYW1lMSA9IGNsYXNzX25hbWVbMV07CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTIgPSBwYXJzZUludChjbGFzc19uYW1lWzJdKTsKICAgICAgICAgICQoIi5zdGFnZSIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxICsgIi4iICsgY2xhc3NfbmFtZTIpLmF0dHIoJ3N0cm9rZScsIF90aGlzLmxpbmVfY29sb3IpOwogICAgICAgICAgdmFyIGZpcnN0X3R5cGUgPSAocGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMDApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciB0aGlyZF90eXBlID0gKGNsYXNzX25hbWUyICUgMTAgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHNlY29uZF90eXBlID0gKHBhcnNlSW50KChjbGFzc19uYW1lMiAtIHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTAwKSAqIDEwMCkgLyAxMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUgPSBfdGhpcy5yZW1vdmVFbGVtZW50KF90aGlzLmFjdGl2ZV9wYXNzaXZlLCBbY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlLCBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlLCBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGVdKTsKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyAiMiIgKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyAiMiIgKyB0aGlyZF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyAiMiIgKyB0aGlyZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSkubG93ZXIoKTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIF9pMTAgPSAwOyBfaTEwIDwgY29yX3RlbXBfa2V5cy5sZW5ndGg7IF9pMTArKykgewogICAgICAgIF9sb29wMyhfaTEwKTsKICAgICAgfQogICAgfSwKICAgIGRyYXdMZWdlbmQyOiBmdW5jdGlvbiBkcmF3TGVnZW5kMigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoIi5zdGFnZXZpZXdoZWFkZXIiKS5hcHBlbmQoInN2ZyIpLmF0dHIoIndpZHRoIiwgMjAwKS5hdHRyKCJoZWlnaHQiLCAyMCk7CiAgICAgIHZhciBnX2xlZ2VuZCA9IHN2Zy5hcHBlbmQoJ2cnKTsKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIDEzKS5hdHRyKCJ5IiwgMykuYXR0cigid2lkdGgiLCAxMCkuYXR0cigiaGVpZ2h0IiwgMTApLmF0dHIoImZpbGwiLCBfdGhpcy5kZXByZXNzaW9uX2NvbG9yKTsKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIDI1KS5hdHRyKCJ5IiwgMTIpLmF0dHIoImZvbnQtc2l6ZSIsIDEwKS50ZXh0KCJkZXByZXNzaW9uIik7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCA4MykuYXR0cigieSIsIDMpLmF0dHIoIndpZHRoIiwgMTApLmF0dHIoImhlaWdodCIsIDEwKS5hdHRyKCJmaWxsIiwgX3RoaXMuYWN0aXZlX2NvbG9yKTsKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIDk1KS5hdHRyKCJ5IiwgMTIpLmF0dHIoImZvbnQtc2l6ZSIsIDEwKS50ZXh0KCJhY3RpdmUiKTsKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIDEzMCkuYXR0cigieSIsIDMpLmF0dHIoIndpZHRoIiwgMTApLmF0dHIoImhlaWdodCIsIDEwKS5hdHRyKCJmaWxsIiwgX3RoaXMucGFzc2l2ZV9jb2xvcik7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCAxNDIpLmF0dHIoInkiLCAxMikuYXR0cigiZm9udC1zaXplIiwgMTApLnRleHQoInBhc3NpdmUiKTsKICAgIH0sCiAgICBkcmF3U3RhZ2UyOiBmdW5jdGlvbiBkcmF3U3RhZ2UyKHN0YWdlLCBkYXRhLCB4X3N0YXJ0LCB5X3N0YXJ0LCB3aWR0aCwgaGVpZ2h0LCBzdmcsIGFjdGl2ZV9udW1iZXIsIHBhc3NpdmVfbnVtYmVyLCBtYXhjb3IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkYXRhX3N1bW1hcnkgPSBuZXcgQXJyYXkoKTsKICAgICAgdmFyIGRhdGFfc3VtbWFyeV9hbGwgPSB7CiAgICAgICAgImRlcHJlc3Npb24iOiBuZXcgQXJyYXkoKSwKICAgICAgICAiYWN0aXZlIGJlaGF2aW9yIjogbmV3IEFycmF5KCksCiAgICAgICAgInBhc3NpdmUgYmVoYXZpb3IiOiBuZXcgQXJyYXkoKQogICAgICB9OyAvL+eUqOadpeWMheWQq+aJgOacieeahOeCuQoKICAgICAgdmFyIGRhdGFfc3RhdGlzdGljcyA9IG5ldyBBcnJheSgpOwogICAgICB2YXIgZGF0YV9zdGF0aXN0aWNzX2FsbCA9IG5ldyBBcnJheSgpOyAvL+eUqOadpeWMheWQq+aJgOacieeahOeCuQoKICAgICAgdmFyIHNlZ21lbnRfbGVuZ3RoID0gZGF0YS5sZW5ndGg7CiAgICAgIHZhciBjb3JyX3N0YXRpc3RpY3MgPSBuZXcgQXJyYXkoKTsKICAgICAgdmFyIGRhdGFfY29uY2F0ID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBjb3JyX3N0YXRpc3RpY3NfYWxsID0gbmV3IEFycmF5KCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRfbGVuZ3RoOyBpKyspIHsKICAgICAgICBkYXRhX3N1bW1hcnlbaV0gPSB7CiAgICAgICAgICAiZGVwcmVzc2lvbiI6IG5ldyBBcnJheSgpLAogICAgICAgICAgImFjdGl2ZSBiZWhhdmlvciI6IG5ldyBBcnJheSgpLAogICAgICAgICAgInBhc3NpdmUgYmVoYXZpb3IiOiBuZXcgQXJyYXkoKQogICAgICAgIH07IC8v5a2Y5YKo5q+P5LiA5Liq5pe26Ze054K55YWz5LqO5LiJ5Liq55qE57uf6K6hCgogICAgICAgIGRhdGFfc3RhdGlzdGljc1tpXSA9IG5ldyBBcnJheSgpOwogICAgICAgIGRhdGFfY29uY2F0ID0gZGF0YV9jb25jYXQuY29uY2F0KGRhdGFbaV0pOwoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGRhdGFfc3VtbWFyeVtpXVsiZGVwcmVzc2lvbiJdLnB1c2goX3RoaXMuZGVwcmVzc2lvblRocmVzaG9sZChkYXRhW2ldW2pdWzBdKSk7CiAgICAgICAgICBkYXRhX3N1bW1hcnlbaV1bImFjdGl2ZSBiZWhhdmlvciJdLnB1c2goZGF0YVtpXVtqXVsxXSk7CiAgICAgICAgICBkYXRhX3N1bW1hcnlbaV1bInBhc3NpdmUgYmVoYXZpb3IiXS5wdXNoKGRhdGFbaV1bal1bMl0pOwogICAgICAgICAgZGF0YV9zdW1tYXJ5X2FsbFsiZGVwcmVzc2lvbiJdLnB1c2goX3RoaXMuZGVwcmVzc2lvblRocmVzaG9sZChkYXRhW2ldW2pdWzBdKSk7CiAgICAgICAgICBkYXRhX3N1bW1hcnlfYWxsWyJhY3RpdmUgYmVoYXZpb3IiXS5wdXNoKGRhdGFbaV1bal1bMV0pOwogICAgICAgICAgZGF0YV9zdW1tYXJ5X2FsbFsicGFzc2l2ZSBiZWhhdmlvciJdLnB1c2goZGF0YVtpXVtqXVsyXSk7CiAgICAgICAgfQoKICAgICAgICBjb3JyX3N0YXRpc3RpY3MucHVzaChfdGhpcy5jb3JyZWxhdGlvblN1bW1hcml6ZShkYXRhW2ldLCBtYXhjb3IpKTsKICAgICAgICBkYXRhX3N0YXRpc3RpY3NbaV0ucHVzaChfdGhpcy5nZXRGcmVxdWVuY3koZGF0YV9zdW1tYXJ5W2ldWyJkZXByZXNzaW9uIl0pLCBfdGhpcy5nZXRGcmVxdWVuY3koZGF0YV9zdW1tYXJ5W2ldWyJhY3RpdmUgYmVoYXZpb3IiXSksIF90aGlzLmdldEZyZXF1ZW5jeShkYXRhX3N1bW1hcnlbaV1bInBhc3NpdmUgYmVoYXZpb3IiXSkpOwogICAgICB9CgogICAgICBjb3JyX3N0YXRpc3RpY3NfYWxsID0gX3RoaXMuY29ycmVsYXRpb25TdW1tYXJpemUoZGF0YV9jb25jYXQsIG1heGNvcik7CiAgICAgIGRhdGFfc3RhdGlzdGljc19hbGwucHVzaChfdGhpcy5nZXRGcmVxdWVuY3koZGF0YV9zdW1tYXJ5X2FsbFsiZGVwcmVzc2lvbiJdKSwgX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeV9hbGxbImFjdGl2ZSBiZWhhdmlvciJdKSwgX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeV9hbGxbInBhc3NpdmUgYmVoYXZpb3IiXSkpOwogICAgICB2YXIgc3ZnX25ldyA9IHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCd3aWR0aCcsIDEwMCkuYXR0cignaGVpZ2h0JywgMTAwKS5hdHRyKCdjbGFzcycsICdzdGFnZSAnICsgc3RhZ2UpOyAvL+eUu3NlcGVyYXRlIGZyZXF1ZW5jeQoKICAgICAgdmFyIHhfc3RhcnRfdGVtcCA9IHhfc3RhcnQgKyA1NDsKICAgICAgdmFyIHlfc3RhcnRfdGVtcCA9IHlfc3RhcnQgKyBoZWlnaHQgLyA0OwogICAgICB2YXIgaGVpZ2h0X3RlbXAgPSA1MDsKICAgICAgdmFyIHdpZHRoX3RlbXAgPSA1MDsKICAgICAgdmFyIHNjYWxlX2hlaWdodCA9IDI1OyAvL+eUu2NvcnJlbGF0aW9uCgogICAgICB2YXIgbGluZSA9IGQzLmxpbmUoKS54KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQueDsKICAgICAgfSkueShmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnk7CiAgICAgIH0pLmN1cnZlKGQzLmN1cnZlQmFzaXMpOwogICAgICB2YXIgZnJlX3NjYWxlID0gZDMuc2NhbGVMb2coKS5kb21haW4oWzAuMSwgMV0pLnJhbmdlKFsxLCA0XSk7CgogICAgICBmb3IgKHZhciBfaTE1ID0gMDsgX2kxNSA8IDE7IF9pMTUrKykgewogICAgICAgIC8v5Yqg5YWlZGVwcmVzc2lvbi1hY3RpdmXnmoTmlbDmja4KICAgICAgICBmb3IgKHZhciBfajcgPSAwOyBfajcgPCBjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hYyddLmxlbmd0aDsgX2o3KyspIHsKICAgICAgICAgIHZhciBkYXRhX3ZpcyA9IFtdOwogICAgICAgICAgdmFyIGFjdGl2ZV9sYWJlbCA9IGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjJ11bX2o3XVswXSAlIDEwOwogICAgICAgICAgdmFyIGRlcHJlc3Npb25fbGFiZWwgPSBNYXRoLmZsb29yKGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjJ11bX2o3XVswXSAvIDEwKTsKICAgICAgICAgIHZhciBmcmVxdWVuY3kgPSBjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hYyddW19qN11bMV07CiAgICAgICAgICBkYXRhX3Zpcy5wdXNoKHsKICAgICAgICAgICAgJ3gnOiB4X3N0YXJ0X3RlbXAgKyBkZXByZXNzaW9uX2xhYmVsICogKHdpZHRoX3RlbXAgLyA0KSArIDcsCiAgICAgICAgICAgICd5JzogeV9zdGFydF90ZW1wLAogICAgICAgICAgICAndmFsdWUnOiBmcmVxdWVuY3kKICAgICAgICAgIH0pOwogICAgICAgICAgZGF0YV92aXMucHVzaCh7CiAgICAgICAgICAgICd4JzogeF9zdGFydF90ZW1wLAogICAgICAgICAgICAneSc6IHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgYWN0aXZlX2xhYmVsICogaGVpZ2h0X3RlbXAgLyBhY3RpdmVfbnVtYmVyICsgMiArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIGFjdGl2ZV9udW1iZXIgKyAyKSAvIGFjdGl2ZV9udW1iZXIpIC8gMiwKICAgICAgICAgICAgJ3ZhbHVlJzogZnJlcXVlbmN5CiAgICAgICAgICB9KTsKICAgICAgICAgIHN2Z19uZXcuYXBwZW5kKCJwYXRoIikuZGF0dW0oZGF0YV92aXMpLmF0dHIoImZpbGwiLCAibm9uZSIpLmF0dHIoInN0cm9rZSIsIF90aGlzLmNvcl9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgZnJlX3NjYWxlKGZyZXF1ZW5jeSkpLmF0dHIoImQiLCBsaW5lKS5hdHRyKCJvcGFjaXR5IiwgMC42KTsKICAgICAgICB9IC8v5Yqg5YWlZGVwcmVzc2lvbi1wYXNzaXZl55qE5pWw5o2uCgoKICAgICAgICBmb3IgKHZhciBfajggPSAwOyBfajggPCBjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9wYSddLmxlbmd0aDsgX2o4KyspIHsKICAgICAgICAgIHZhciBfZGF0YV92aXMgPSBbXTsKICAgICAgICAgIHZhciBwYXNzaXZlX2xhYmVsID0gY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfcGEnXVtfajhdWzBdICUgMTA7CgogICAgICAgICAgdmFyIF9kZXByZXNzaW9uX2xhYmVsID0gTWF0aC5mbG9vcihjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9wYSddW19qOF1bMF0gLyAxMCk7CgogICAgICAgICAgdmFyIF9mcmVxdWVuY3kgPSBjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9wYSddW19qOF1bMV07CgogICAgICAgICAgX2RhdGFfdmlzLnB1c2goewogICAgICAgICAgICAneCc6IHhfc3RhcnRfdGVtcCArIF9kZXByZXNzaW9uX2xhYmVsICogKHdpZHRoX3RlbXAgLyA0KSArIDcsCiAgICAgICAgICAgICd5JzogeV9zdGFydF90ZW1wLAogICAgICAgICAgICAndmFsdWUnOiBfZnJlcXVlbmN5CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfZGF0YV92aXMucHVzaCh7CiAgICAgICAgICAgICd4JzogeF9zdGFydF90ZW1wICsgd2lkdGhfdGVtcCwKICAgICAgICAgICAgJ3knOiB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIHBhc3NpdmVfbGFiZWwgKiBoZWlnaHRfdGVtcCAvIHBhc3NpdmVfbnVtYmVyICsgMiArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIHBhc3NpdmVfbnVtYmVyICsgMikgLyBwYXNzaXZlX251bWJlcikgLyAyLAogICAgICAgICAgICAndmFsdWUnOiBfZnJlcXVlbmN5CiAgICAgICAgICB9KTsKCiAgICAgICAgICBzdmdfbmV3LmFwcGVuZCgicGF0aCIpLmRhdHVtKF9kYXRhX3ZpcykuYXR0cigiZmlsbCIsICJub25lIikuYXR0cigic3Ryb2tlIiwgX3RoaXMuY29yX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCBmcmVfc2NhbGUoX2ZyZXF1ZW5jeSkpLmF0dHIoImQiLCBsaW5lKS5hdHRyKCJvcGFjaXR5IiwgMC42KTsKICAgICAgICB9IC8v5Yqg5YWlYWN0aXZlLXBhc3NpdmXnmoTmlbDmja4KCgogICAgICAgIGZvciAodmFyIF9qOSA9IDA7IF9qOSA8IGNvcnJfc3RhdGlzdGljc19hbGxbJ2FjX3BhJ10ubGVuZ3RoOyBfajkrKykgewogICAgICAgICAgdmFyIF9kYXRhX3ZpczIgPSBbXTsKCiAgICAgICAgICB2YXIgX3Bhc3NpdmVfbGFiZWwgPSBjb3JyX3N0YXRpc3RpY3NfYWxsWydhY19wYSddW19qOV1bMF0gJSAxMDsgLy9jb25zb2xlLmxvZyhwYXNzaXZlX2xhYmVsKQoKCiAgICAgICAgICB2YXIgX2FjdGl2ZV9sYWJlbCA9IE1hdGguZmxvb3IoY29ycl9zdGF0aXN0aWNzX2FsbFsnYWNfcGEnXVtfajldWzBdIC8gMTApOwoKICAgICAgICAgIHZhciBfZnJlcXVlbmN5MiA9IGNvcnJfc3RhdGlzdGljc19hbGxbJ2FjX3BhJ11bX2o5XVsxXTsKCiAgICAgICAgICBfZGF0YV92aXMyLnB1c2goewogICAgICAgICAgICAneCc6IHhfc3RhcnRfdGVtcCwKICAgICAgICAgICAgJ3knOiB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIF9hY3RpdmVfbGFiZWwgKiBoZWlnaHRfdGVtcCAvIGFjdGl2ZV9udW1iZXIgKyAyICsgTWF0aC5mbG9vcigoaGVpZ2h0X3RlbXAgLSAyICogYWN0aXZlX251bWJlciArIDIpIC8gYWN0aXZlX251bWJlcikgLyAyLAogICAgICAgICAgICAndmFsdWUnOiBfZnJlcXVlbmN5MgogICAgICAgICAgfSk7CgogICAgICAgICAgX2RhdGFfdmlzMi5wdXNoKHsKICAgICAgICAgICAgJ3gnOiB4X3N0YXJ0X3RlbXAgKyB3aWR0aF90ZW1wLAogICAgICAgICAgICAneSc6IHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgX3Bhc3NpdmVfbGFiZWwgKiBoZWlnaHRfdGVtcCAvIHBhc3NpdmVfbnVtYmVyICsgMiArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIHBhc3NpdmVfbnVtYmVyICsgMikgLyBwYXNzaXZlX251bWJlcikgLyAyLAogICAgICAgICAgICAndmFsdWUnOiBfZnJlcXVlbmN5MgogICAgICAgICAgfSk7CgogICAgICAgICAgc3ZnX25ldy5hcHBlbmQoInBhdGgiKS5kYXR1bShfZGF0YV92aXMyKS5hdHRyKCJmaWxsIiwgIm5vbmUiKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5jb3JfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIGZyZV9zY2FsZShfZnJlcXVlbmN5MikpLmF0dHIoImQiLCBsaW5lKS5hdHRyKCJvcGFjaXR5IiwgMC42KTsKICAgICAgICB9IC8vY29uc29sZS5sb2coZGF0YV92aXMpCiAgICAgICAgLy/liqDlhaVkZXByZXNzaW9uLWFjdGl2ZS1wYXNzaXZl55qE5pWw5o2uCgoKICAgICAgICBmb3IgKHZhciBfajEwID0gMDsgX2oxMCA8IGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ10ubGVuZ3RoOyBfajEwKyspIHsKICAgICAgICAgIHZhciBfZGF0YV92aXMzID0gW107CgogICAgICAgICAgdmFyIF9wYXNzaXZlX2xhYmVsMiA9IGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bX2oxMF1bMF0gJSAxMDsKCiAgICAgICAgICB2YXIgbGVmdCA9IChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW19qMTBdWzBdIC0gX3Bhc3NpdmVfbGFiZWwyKSAvIDEwOwoKICAgICAgICAgIHZhciBfYWN0aXZlX2xhYmVsMiA9IGxlZnQgJSAxMDsKCiAgICAgICAgICB2YXIgX2RlcHJlc3Npb25fbGFiZWwyID0gTWF0aC5mbG9vcihsZWZ0IC8gMTApOwoKICAgICAgICAgIHZhciBfZnJlcXVlbmN5MyA9IGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bX2oxMF1bMV07IC8v5Yqg5YWlZGVwcmVzc2lvbgoKICAgICAgICAgIF9kYXRhX3ZpczMucHVzaCh7CiAgICAgICAgICAgICd4JzogeF9zdGFydF90ZW1wICsgX2RlcHJlc3Npb25fbGFiZWwyICogKHdpZHRoX3RlbXAgLyA0KSArIDcsCiAgICAgICAgICAgICd5JzogeV9zdGFydF90ZW1wLAogICAgICAgICAgICAndmFsdWUnOiBfZnJlcXVlbmN5MwogICAgICAgICAgfSk7IC8v5Yqg5YWlYWN0aXZlCgoKICAgICAgICAgIF9kYXRhX3ZpczMucHVzaCh7CiAgICAgICAgICAgICd4JzogeF9zdGFydF90ZW1wLAogICAgICAgICAgICAneSc6IHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgX2FjdGl2ZV9sYWJlbDIgKiBoZWlnaHRfdGVtcCAvIGFjdGl2ZV9udW1iZXIgKyAyICsgTWF0aC5mbG9vcigoaGVpZ2h0X3RlbXAgLSAyICogYWN0aXZlX251bWJlciArIDIpIC8gYWN0aXZlX251bWJlcikgLyAyLAogICAgICAgICAgICAndmFsdWUnOiBfZnJlcXVlbmN5MwogICAgICAgICAgfSk7IC8v5Yqg5YWlcGFzc2l2ZQoKCiAgICAgICAgICBfZGF0YV92aXMzLnB1c2goewogICAgICAgICAgICAneCc6IHhfc3RhcnRfdGVtcCArIHdpZHRoX3RlbXAsCiAgICAgICAgICAgICd5JzogeV9zdGFydCArIGhlaWdodCAvIDQgKyBfcGFzc2l2ZV9sYWJlbDIgKiBoZWlnaHRfdGVtcCAvIHBhc3NpdmVfbnVtYmVyICsgMiArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIHBhc3NpdmVfbnVtYmVyICsgMikgLyBwYXNzaXZlX251bWJlcikgLyAyLAogICAgICAgICAgICAndmFsdWUnOiBfZnJlcXVlbmN5MwogICAgICAgICAgfSk7IC8v5Yqg5YWlZGVwcmVzc2lvbgoKCiAgICAgICAgICBfZGF0YV92aXMzLnB1c2goewogICAgICAgICAgICAneCc6IHhfc3RhcnRfdGVtcCArIF9kZXByZXNzaW9uX2xhYmVsMiAqICh3aWR0aF90ZW1wIC8gNCkgKyA3LAogICAgICAgICAgICAneSc6IHlfc3RhcnRfdGVtcCwKICAgICAgICAgICAgJ3ZhbHVlJzogX2ZyZXF1ZW5jeTMKICAgICAgICAgIH0pOwoKICAgICAgICAgIHN2Z19uZXcuYXBwZW5kKCJwYXRoIikuZGF0dW0oX2RhdGFfdmlzMykuYXR0cigiZmlsbCIsICJub25lIikuYXR0cigic3Ryb2tlIiwgImJsYWNrIikuYXR0cigic3Ryb2tlLXdpZHRoIiwgZnJlX3NjYWxlKF9mcmVxdWVuY3kzKSkuYXR0cigiZCIsIGxpbmUpLmF0dHIoIm9wYWNpdHkiLCAwLjIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yICh2YXIgX2kxNiA9IDA7IF9pMTYgPCAxOyBfaTE2KyspIHsKICAgICAgICAvL+eUu2RlcHJlc3Npb27nmoTms6jph4oKICAgICAgICBzdmdfbmV3LmFwcGVuZCgibGluZSIpLmF0dHIoIngxIiwgeF9zdGFydF90ZW1wIC0gMTApLmF0dHIoIngyIiwgeF9zdGFydF90ZW1wICsgd2lkdGhfdGVtcCArIDEwKS5hdHRyKCJ5MSIsIHlfc3RhcnQpLmF0dHIoInkyIiwgeV9zdGFydCkuYXR0cigic3Ryb2tlIiwgX3RoaXMubm9ybWFsX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAyKS5hdHRyKCJvcGFjaXR5IiwgMC4yKTsKICAgICAgICBzdmdfbmV3LmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCB4X3N0YXJ0X3RlbXAgLSAyOCkuYXR0cigieSIsIHlfc3RhcnQgKyAyKS5hdHRyKCJmb250LXNpemUiLCAxMCkudGV4dCgibG93Iik7CiAgICAgICAgc3ZnX25ldy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydF90ZW1wICsgd2lkdGhfdGVtcCArIDEzKS5hdHRyKCJ5IiwgeV9zdGFydCArIDIpLmF0dHIoImZvbnQtc2l6ZSIsIDEwKS50ZXh0KCJoaWdoIik7IC8v55S7ZGVwcmVzc2lvbueahOWIhuW4gwoKICAgICAgICBmb3IgKHZhciBfajExID0gMDsgX2oxMSA8IDQ7IF9qMTErKykgewogICAgICAgICAgLy/mn6XnnIvmmK/lkKblrZjlnKjov5nkuKprZXks5aaC5p6c5LiN5a2Y5Zyo5YiZ6L+Z5Liq6ZW/5bqm5Li6MAogICAgICAgICAgdmFyIGtleV90ZW1wID0gT2JqZWN0LmtleXMoZGF0YV9zdGF0aXN0aWNzX2FsbFswXSk7CiAgICAgICAgICB2YXIgdmFsdWVfdGVtcCA9IE9iamVjdC52YWx1ZXMoZGF0YV9zdGF0aXN0aWNzX2FsbFswXSk7CiAgICAgICAgICB2YXIgaGVpZ2h0X2RlcHJlc3Npb24gPSAwOwoKICAgICAgICAgIGlmIChrZXlfdGVtcC5pbmNsdWRlcyhfajExLnRvU3RyaW5nKCkpKSB7CiAgICAgICAgICAgIGhlaWdodF9kZXByZXNzaW9uID0gc2NhbGVfaGVpZ2h0ICogZGF0YV9zdGF0aXN0aWNzX2FsbFswXVtfajExXSAvIF90aGlzLnN1bSh2YWx1ZV90ZW1wKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZGF0YV9zdGF0aXN0aWNzX2FsbFswXVtfajExXSAvIF90aGlzLnN1bSh2YWx1ZV90ZW1wKSA+IDAuMSkgewogICAgICAgICAgICBzdmdfbmV3LmFwcGVuZCgibGluZSIpLmF0dHIoIngxIiwgeF9zdGFydF90ZW1wICsgX2oxMSAqICh3aWR0aF90ZW1wIC8gNCkgKyA3KS5hdHRyKCJ4MiIsIHhfc3RhcnRfdGVtcCArIF9qMTEgKiAod2lkdGhfdGVtcCAvIDQpICsgNykuYXR0cigieTEiLCB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCAtIGhlaWdodF9kZXByZXNzaW9uKS5hdHRyKCJ5MiIsIHlfc3RhcnQpLmF0dHIoInN0cm9rZSIsIF90aGlzLm5vcm1hbF9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMSkuYXR0cigic3Ryb2tlLWRhc2hhcnJheSIsICIzLCAyIik7CiAgICAgICAgICB9CgogICAgICAgICAgc3ZnX25ldy5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9zdGFydF90ZW1wICsgX2oxMSAqICh3aWR0aF90ZW1wIC8gNCkgKyAyKS5hdHRyKCJ5IiwgeV9zdGFydCArIGhlaWdodCAvIDQgLSBoZWlnaHRfZGVwcmVzc2lvbikuYXR0cigiZmlsbCIsIF90aGlzLmRlcHJlc3Npb25fY29sb3IpLmF0dHIoIndpZHRoIiwgMTApLmF0dHIoImhlaWdodCIsIGhlaWdodF9kZXByZXNzaW9uKTsKICAgICAgICB9IC8v55S7YWN0aXZl55qE5rOo6YeKCgoKICAgICAgICBzdmdfbmV3LmFwcGVuZCgibGluZSIpLmF0dHIoIngxIiwgeF9zdGFydF90ZW1wIC0gc2NhbGVfaGVpZ2h0KS5hdHRyKCJ4MiIsIHhfc3RhcnRfdGVtcCAtIHNjYWxlX2hlaWdodCkuYXR0cigieTEiLCB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCAtIDUpLmF0dHIoInkyIiwgeV9zdGFydCArIGhlaWdodCAvIDQgKyBoZWlnaHRfdGVtcCArIDUpLmF0dHIoInN0cm9rZSIsIF90aGlzLm5vcm1hbF9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMikuYXR0cigib3BhY2l0eSIsIDAuMik7IC8v55S7YWN0aXZlIGJlaGF2aW9yCgogICAgICAgIGZvciAodmFyIF9qMTIgPSAwOyBfajEyIDwgYWN0aXZlX251bWJlcjsgX2oxMisrKSB7CiAgICAgICAgICAvL+afpeeci+aYr+WQpuWtmOWcqOi/meS4qmtleSzlpoLmnpzkuI3lrZjlnKjliJnov5nkuKrplb/luqbkuLowCiAgICAgICAgICB2YXIgX2tleV90ZW1wID0gT2JqZWN0LmtleXMoZGF0YV9zdGF0aXN0aWNzX2FsbFsxXSk7CgogICAgICAgICAgdmFyIF92YWx1ZV90ZW1wID0gT2JqZWN0LnZhbHVlcyhkYXRhX3N0YXRpc3RpY3NfYWxsWzFdKTsKCiAgICAgICAgICB2YXIgaGVpZ2h0X2FjdGl2ZSA9IDA7CgogICAgICAgICAgaWYgKF9rZXlfdGVtcC5pbmNsdWRlcyhfajEyLnRvU3RyaW5nKCkpKSB7CiAgICAgICAgICAgIGhlaWdodF9hY3RpdmUgPSBzY2FsZV9oZWlnaHQgKiBkYXRhX3N0YXRpc3RpY3NfYWxsWzFdW19qMTJdIC8gX3RoaXMuc3VtKF92YWx1ZV90ZW1wKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZGF0YV9zdGF0aXN0aWNzX2FsbFsxXVtfajEyXSAvIF90aGlzLnN1bShfdmFsdWVfdGVtcCkgPiAwLjEpIHsKICAgICAgICAgICAgc3ZnX25ldy5hcHBlbmQoImxpbmUiKS5hdHRyKCJ4MSIsIHhfc3RhcnRfdGVtcCAtIHNjYWxlX2hlaWdodCkuYXR0cigieDIiLCB4X3N0YXJ0X3RlbXAgLSBoZWlnaHRfYWN0aXZlKS5hdHRyKCJ5MSIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgX2oxMiAqIGhlaWdodF90ZW1wIC8gYWN0aXZlX251bWJlciArIDIgKyBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBhY3RpdmVfbnVtYmVyICsgMikgLyBhY3RpdmVfbnVtYmVyKSAvIDIpLmF0dHIoInkyIiwgeV9zdGFydCArIGhlaWdodCAvIDQgKyBfajEyICogaGVpZ2h0X3RlbXAgLyBhY3RpdmVfbnVtYmVyICsgMiArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIGFjdGl2ZV9udW1iZXIgKyAyKSAvIGFjdGl2ZV9udW1iZXIpIC8gMikuYXR0cigic3Ryb2tlIiwgX3RoaXMubm9ybWFsX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAxKS5hdHRyKCJzdHJva2UtZGFzaGFycmF5IiwgIjMsIDIiKTsKICAgICAgICAgICAgc3ZnX25ldy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydF90ZW1wIC0gc2NhbGVfaGVpZ2h0IC0gMTMpLmF0dHIoInkiLCB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIF9qMTIgKiBoZWlnaHRfdGVtcCAvIGFjdGl2ZV9udW1iZXIgKyA1ICsgTWF0aC5mbG9vcigoaGVpZ2h0X3RlbXAgLSAyICogYWN0aXZlX251bWJlciArIDIpIC8gYWN0aXZlX251bWJlcikgLyAyKS5hdHRyKCJmb250LXNpemUiLCAxMCkudGV4dCgicCIgKyAoX2oxMiArIDEpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdmdfbmV3LmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X3N0YXJ0X3RlbXAgLSBoZWlnaHRfYWN0aXZlKS5hdHRyKCJ5IiwgeV9zdGFydCArIGhlaWdodCAvIDQgKyBfajEyICogaGVpZ2h0X3RlbXAgLyBhY3RpdmVfbnVtYmVyICsgMikuYXR0cigiZmlsbCIsIF90aGlzLmFjdGl2ZV9jb2xvcikuYXR0cigid2lkdGgiLCBoZWlnaHRfYWN0aXZlKS5hdHRyKCJoZWlnaHQiLCBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBhY3RpdmVfbnVtYmVyICsgMikgLyBhY3RpdmVfbnVtYmVyKSk7CiAgICAgICAgfSAvL+eUu3Bhc3NpdmXnmoTms6jph4oKCgogICAgICAgIHN2Z19uZXcuYXBwZW5kKCJsaW5lIikuYXR0cigieDEiLCB4X3N0YXJ0X3RlbXAgKyB3aWR0aF90ZW1wICsgc2NhbGVfaGVpZ2h0KS5hdHRyKCJ4MiIsIHhfc3RhcnRfdGVtcCArIHdpZHRoX3RlbXAgKyBzY2FsZV9oZWlnaHQpLmF0dHIoInkxIiwgeV9zdGFydCArIGhlaWdodCAvIDQgLSA1KS5hdHRyKCJ5MiIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgaGVpZ2h0X3RlbXAgKyA1KS5hdHRyKCJzdHJva2UiLCBfdGhpcy5ub3JtYWxfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIDIpLmF0dHIoIm9wYWNpdHkiLCAwLjIpOyAvL+eUu3Bhc3NpdmUgYmVoYXZpb3IKCiAgICAgICAgZm9yICh2YXIgX2oxMyA9IDA7IF9qMTMgPCBwYXNzaXZlX251bWJlcjsgX2oxMysrKSB7CiAgICAgICAgICAvL+afpeeci+aYr+WQpuWtmOWcqOi/meS4qmtleSzlpoLmnpzkuI3lrZjlnKjliJnov5nkuKrplb/luqbkuLowCiAgICAgICAgICB2YXIgX2tleV90ZW1wMiA9IE9iamVjdC5rZXlzKGRhdGFfc3RhdGlzdGljc19hbGxbMl0pOwoKICAgICAgICAgIHZhciBfdmFsdWVfdGVtcDIgPSBPYmplY3QudmFsdWVzKGRhdGFfc3RhdGlzdGljc19hbGxbMl0pOwoKICAgICAgICAgIHZhciBoZWlnaHRfcGFzc2l2ZSA9IDA7CgogICAgICAgICAgaWYgKF9rZXlfdGVtcDIuaW5jbHVkZXMoX2oxMy50b1N0cmluZygpKSkgewogICAgICAgICAgICBoZWlnaHRfcGFzc2l2ZSA9IHNjYWxlX2hlaWdodCAqIGRhdGFfc3RhdGlzdGljc19hbGxbMl1bX2oxM10gLyBfdGhpcy5zdW0oX3ZhbHVlX3RlbXAyKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZGF0YV9zdGF0aXN0aWNzX2FsbFsyXVtfajEzXSAvIF90aGlzLnN1bShfdmFsdWVfdGVtcDIpID4gMC4xKSB7CiAgICAgICAgICAgIHN2Z19uZXcuYXBwZW5kKCJsaW5lIikuYXR0cigieDEiLCB4X3N0YXJ0X3RlbXAgKyB3aWR0aF90ZW1wKS5hdHRyKCJ4MiIsIHhfc3RhcnRfdGVtcCArIHdpZHRoX3RlbXAgKyBzY2FsZV9oZWlnaHQpLmF0dHIoInkxIiwgeV9zdGFydCArIGhlaWdodCAvIDQgKyBfajEzICogaGVpZ2h0X3RlbXAgLyBwYXNzaXZlX251bWJlciArIDIgKyBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBwYXNzaXZlX251bWJlciArIDIpIC8gcGFzc2l2ZV9udW1iZXIpIC8gMikuYXR0cigieTIiLCB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIF9qMTMgKiBoZWlnaHRfdGVtcCAvIHBhc3NpdmVfbnVtYmVyICsgMiArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIHBhc3NpdmVfbnVtYmVyICsgMikgLyBwYXNzaXZlX251bWJlcikgLyAyKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5ub3JtYWxfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIDEpLmF0dHIoInN0cm9rZS1kYXNoYXJyYXkiLCAiMywgMiIpOwogICAgICAgICAgICBzdmdfbmV3LmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCB4X3N0YXJ0X3RlbXAgKyB3aWR0aF90ZW1wICsgc2NhbGVfaGVpZ2h0ICsgMikuYXR0cigieSIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgX2oxMyAqIGhlaWdodF90ZW1wIC8gcGFzc2l2ZV9udW1iZXIgKyA1ICsgTWF0aC5mbG9vcigoaGVpZ2h0X3RlbXAgLSAyICogcGFzc2l2ZV9udW1iZXIgKyAyKSAvIHBhc3NpdmVfbnVtYmVyKSAvIDIpLmF0dHIoImZvbnQtc2l6ZSIsIDEwKS50ZXh0KCJwIiArIChfajEzICsgMSkpOwogICAgICAgICAgfQoKICAgICAgICAgIHN2Z19uZXcuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfc3RhcnRfdGVtcCArIHdpZHRoX3RlbXApLmF0dHIoInkiLCB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIF9qMTMgKiBoZWlnaHRfdGVtcCAvIHBhc3NpdmVfbnVtYmVyICsgMikuYXR0cigiZmlsbCIsIF90aGlzLnBhc3NpdmVfY29sb3IpLmF0dHIoIndpZHRoIiwgaGVpZ2h0X3Bhc3NpdmUpLmF0dHIoImhlaWdodCIsIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIHBhc3NpdmVfbnVtYmVyICsgMikgLyBwYXNzaXZlX251bWJlcikpOwogICAgICAgIH0gLy8g55S75Lit6Ze055qE6L+e5o6l5pa55Z2X5Yy65Z+fCgoKICAgICAgICBzdmdfbmV3LmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X3N0YXJ0X3RlbXApLmF0dHIoInkiLCB5X3N0YXJ0X3RlbXApLmF0dHIoImZpbGwiLCAibm9uZSIpLmF0dHIoIndpZHRoIiwgaGVpZ2h0X3RlbXApLmF0dHIoImhlaWdodCIsIHdpZHRoX3RlbXApLmF0dHIoInN0cm9rZSIsIF90aGlzLm5vcm1hbF9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMikuYXR0cigib3BhY2l0eSIsIDAuMyk7CiAgICAgIH0KICAgIH0sCiAgICBkZXByZXNzaW9uVGhyZXNob2xkOiBmdW5jdGlvbiBkZXByZXNzaW9uVGhyZXNob2xkKGRlcHJlc3Npb24pIHsKICAgICAgaWYgKGRlcHJlc3Npb24gPD0gMSkgewogICAgICAgIHJldHVybiAwOwogICAgICB9IGVsc2UgaWYgKGRlcHJlc3Npb24gPD0gMikgewogICAgICAgIHJldHVybiAxOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAyOwogICAgICB9CiAgICB9LAogICAgZ2V0RnJlcXVlbmN5OiBmdW5jdGlvbiBnZXRGcmVxdWVuY3koYXJyKSB7CiAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHZhciBpdGVtID0gYXJyW2ldOwogICAgICAgIG9ialtpdGVtXSA9IG9ialtpdGVtXSArIDEgfHwgMTsKICAgICAgfQoKICAgICAgcmV0dXJuIG9iajsKICAgIH0sCiAgICBzdW06IGZ1bmN0aW9uIHN1bShhcnIpIHsKICAgICAgdmFyIGxlbiA9IGFyci5sZW5ndGg7CgogICAgICBpZiAobGVuID09IDApIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSBlbHNlIGlmIChsZW4gPT0gMSkgewogICAgICAgIHJldHVybiBhcnJbMF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGFyclswXSArIHRoaXMuc3VtKGFyci5zbGljZSgxKSk7CiAgICAgIH0KICAgIH0sCiAgICBkaWN0U3VtOiBmdW5jdGlvbiBkaWN0U3VtKGRpY3QpIHsKICAgICAgdmFyIHRlbXAgPSBPYmplY3Qua2V5cyhkaWN0KTsKICAgICAgdmFyIHN1bSA9IDA7CgogICAgICBmb3IgKHZhciBfaTE3ID0gMCwgX3RlbXA1ID0gdGVtcDsgX2kxNyA8IF90ZW1wNS5sZW5ndGg7IF9pMTcrKykgewogICAgICAgIHZhciB0ID0gX3RlbXA1W19pMTddOwogICAgICAgIHN1bSArPSBkaWN0W3RdOwogICAgICB9CgogICAgICByZXR1cm4gc3VtOwogICAgfSwKICAgIHJlbW92ZUVsZW1lbnQ6IGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQobGlzdCwgcl9saXN0KSB7CiAgICAgIHZhciBhcnIxID0gbGlzdDsKICAgICAgdmFyIGFycjIgPSByX2xpc3Q7CiAgICAgIHZhciBjb3VudCA9IG5ldyBNYXAoKTsKICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTsKICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlOwogICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3I0ID0gYXJyMVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IChfc3RlcDQgPSBfaXRlcmF0b3I0Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZSkgewogICAgICAgICAgdmFyIG4gPSBfc3RlcDQudmFsdWU7CiAgICAgICAgICBjb3VudC5zZXQobiwgKGNvdW50LmdldChuKSB8fCAwKSArIDEpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3I0ID0gdHJ1ZTsKICAgICAgICBfaXRlcmF0b3JFcnJvcjQgPSBlcnI7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgJiYgX2l0ZXJhdG9yNC5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICBfaXRlcmF0b3I0LnJldHVybigpOwogICAgICAgICAgfQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I0KSB7CiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IHRydWU7CiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjUgPSBmYWxzZTsKICAgICAgdmFyIF9pdGVyYXRvckVycm9yNSA9IHVuZGVmaW5lZDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNSA9IGFycjJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDU7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSAoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IHRydWUpIHsKICAgICAgICAgIHZhciBfbiA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgIGNvdW50LnNldChfbiwgKGNvdW50LmdldChfbikgfHwgMCkgLSAxKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9kaWRJdGVyYXRvckVycm9yNSA9IHRydWU7CiAgICAgICAgX2l0ZXJhdG9yRXJyb3I1ID0gZXJyOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ICYmIF9pdGVyYXRvcjUucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yNS5yZXR1cm4oKTsKICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNSkgewogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IHRydWU7CiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjYgPSBmYWxzZTsKICAgICAgdmFyIF9pdGVyYXRvckVycm9yNiA9IHVuZGVmaW5lZDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNiA9IGNvdW50LmVudHJpZXMoKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IChfc3RlcDYgPSBfaXRlcmF0b3I2Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ID0gdHJ1ZSkgewogICAgICAgICAgdmFyIF9zdGVwNiR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwNi52YWx1ZSwgMiksCiAgICAgICAgICAgICAgX24yID0gX3N0ZXA2JHZhbHVlWzBdLAogICAgICAgICAgICAgIGMgPSBfc3RlcDYkdmFsdWVbMV07CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjOyBpKyspIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2goX24yKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9kaWRJdGVyYXRvckVycm9yNiA9IHRydWU7CiAgICAgICAgX2l0ZXJhdG9yRXJyb3I2ID0gZXJyOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ICYmIF9pdGVyYXRvcjYucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yNi5yZXR1cm4oKTsKICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNikgewogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIGNvcnJlbGF0aW9uU3VtbWFyaXplOiBmdW5jdGlvbiBjb3JyZWxhdGlvblN1bW1hcml6ZShkYXRhLCBuKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGVfYWMgPSBuZXcgQXJyYXkoKTsKICAgICAgdmFyIGRlX3BhID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBhY19wYSA9IG5ldyBBcnJheSgpOwogICAgICB2YXIgZGVfYWNfcGEgPSBuZXcgQXJyYXkoKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBkZXByZXNzaW9uID0gX3RoaXMuZGVwcmVzc2lvblRocmVzaG9sZChkYXRhW2ldWzBdKTsKCiAgICAgICAgdmFyIGFjdGl2ZWIgPSBkYXRhW2ldWzFdOwogICAgICAgIHZhciBwYXNzaXZlYiA9IGRhdGFbaV1bMl07CiAgICAgICAgZGVfYWMucHVzaChkZXByZXNzaW9uICogMTAgKyBhY3RpdmViKTsKICAgICAgICBkZV9wYS5wdXNoKGRlcHJlc3Npb24gKiAxMCArIHBhc3NpdmViKTsKICAgICAgICBhY19wYS5wdXNoKGFjdGl2ZWIgKiAxMCArIHBhc3NpdmViKTsKICAgICAgICBkZV9hY19wYS5wdXNoKGRlcHJlc3Npb24gKiAxMDAgKyAxMCAqIGFjdGl2ZWIgKyBwYXNzaXZlYik7CiAgICAgIH0KCiAgICAgIGRlX2FjID0gX3RoaXMuZ2V0RnJlcXVlbmN5KGRlX2FjKTsKICAgICAgZGVfcGEgPSBfdGhpcy5nZXRGcmVxdWVuY3koZGVfcGEpOwogICAgICBhY19wYSA9IF90aGlzLmdldEZyZXF1ZW5jeShhY19wYSk7CiAgICAgIGRlX2FjX3BhID0gX3RoaXMuZ2V0RnJlcXVlbmN5KGRlX2FjX3BhKTsKICAgICAgdmFyIHJlc3VsdCA9IHsKICAgICAgICAiZGVfYWMiOiBfdGhpcy5tYXhuT2J0YWluKGRlX2FjLCBuKSwKICAgICAgICAiZGVfcGEiOiBfdGhpcy5tYXhuT2J0YWluKGRlX3BhLCBuKSwKICAgICAgICAiYWNfcGEiOiBfdGhpcy5tYXhuT2J0YWluKGFjX3BhLCBuKSwKICAgICAgICAiZGVfYWNfcGEiOiBfdGhpcy5tYXhuT2J0YWluKGRlX2FjX3BhLCBuKQogICAgICB9OwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIG1heG5PYnRhaW46IGZ1bmN0aW9uIG1heG5PYnRhaW4oZGljdCwgbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGl0ZW1zID0gT2JqZWN0LmtleXMoZGljdCkubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICByZXR1cm4gW2tleSwgZGljdFtrZXldXTsKICAgICAgfSk7IC8vIOaMieeFpyB2YWx1ZSDnmoTlpKflsI/ov5vooYzmjpLluo8KCiAgICAgIGl0ZW1zLnNvcnQoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKICAgICAgICByZXR1cm4gc2Vjb25kWzFdIC0gZmlyc3RbMV07CiAgICAgIH0pOwoKICAgICAgdmFyIHN1bV92YWx1ZXMgPSBfdGhpcy5zdW0oT2JqZWN0LnZhbHVlcyhkaWN0KSk7IC8vIOiOt+WPluaOkuW6j+WQjueahOWJjSBuIOS4qiBrZXkg5YC8CgoKICAgICAgdmFyIHJlc3VsdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICByZXN1bHQucHVzaChbaXRlbXNbaV1bMF0sIGl0ZW1zW2ldWzFdIC8gc3VtX3ZhbHVlc10pOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/shengrui/Desktop/system_framework-main/frontend/src/components/StageView/StageView.js"],"names":["linkHorizontal","svg","dataService","pipeService","d3","$","name","components","props","computed","data","text_color","comparison_color","circle_color","line_color","stroke_color","cor_temporal_color","nothighlight_color","highlight_color","distribution_color","normal_color","stage_name","cor_color","background_color","count","color_list","stage_start","stage_interval","stage_y_start","stage_number","temporal","highlight_list","active_passive","stagestatistics","highlight_class","last_highlight_class","watch","_this","emitAP","attr","i","length","deviation_threshold","stage_highlight","Set","includes","toString","add","types","Object","keys","size","t","types2","t2","temp_arr","stage","push","dictSum","calculateVariance","k","parseInt","mounted","select","append","drawLegend","drag","on","raise","classed","event","sourceEvent","stopPropagation","preventDefault","d","x","y","allGElements","selectAll","allGCoords","nodes","map","getAttribute","match","sortedGElements","sort","a","b","forEach","gElement","onStage","msg","active_k_msg","passive_k_msg","eval","data_map","stageMap","console","log","drawStage","call","onClickPath","list_temp","methods","arr","n","mean","reduce","acc","curr","variance","Math","pow","domain_x","color","scaleOrdinal","domain","range","g_legend","text","c","active_k","passive_k","width","height","xscale","scaleLinear","drawEachStage","splitDataByThresholds","thresholds","gap","results","Array","p","value","j","maxcor","color_scale","x_start","interval","data_orig","data_summary","data_summary_all","data_statistics","data_statistics_all","segment_length","corr_statistics","data_concat","corr_statistics_all","concat","depressionThreshold","correlationSummarize","getFrequency","svg_stage","style","svg_1","svg_3","y_start","width_scale","height_scale","x_start1","temp","position","y_start2","keys_i","values_i","values","sum","type","split","order","keys_temp","name_temp","value_temp","temp0","temp2","temp1","k0","k1","kk","class_name_split","class_name","removeElement","temp_list","flag","yScale","yScale2","area","y0","y1","temporal_temp","temporal_horizon","areaGenerator","curve","curveBasis","layers","svg_1_1","enter","svg2","keys_c","cor_temp_keys","lineGenerator","line","curveLinear","height_curve_scale1","x_left_list","cor_temp","key_1","key_2","y2","x_left","flag_xl","xl","abs","x_right","data1","corr_temporal","flag_temp","q","svg_t","svg_t_1","class_name1","class_name2","first_type","second_type","datum","height_curve_scale2","border","y_m","third_type","lower","drawLegend2","depression_color","active_color","passive_color","drawStage2","active_number","passive_number","svg_new","x_start_temp","y_start_temp","height_temp","width_temp","scale_height","fre_scale","scaleLog","data_vis","active_label","depression_label","floor","frequency","passive_label","left","key_temp","height_depression","height_active","height_passive","depression","obj","l","item","len","slice","dict","list","r_list","arr1","arr2","Map","set","get","result","entries","de_ac","de_pa","ac_pa","de_ac_pa","activeb","passiveb","maxnObtain","items","key","first","second","sum_values"],"mappings":"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","sourcesContent":["import { linkHorizontal, svg } from 'd3';\nimport dataService from '../../service/dataService.js'\nimport pipeService from '../../service/pipeService.js';\nimport * as d3 from 'd3'\nimport $ from 'jquery'\n\nexport default {\n    name: 'StageView',\n    components: {\n    },\n    props: {\n    },\n    computed: {\n    },\n    data() {\n        return {\n            text_color: \"black\",\n            comparison_color: '#868B98',//比较的时候很不同的元素会被高亮出来\n            circle_color: '#9a8c98', //圆圈的颜色\n            line_color: '#d8dbe2',//最左边线的颜色\n            stroke_color: \"#CEBB7D\", //条状图点击之后behavior view会相应加深，这是点击之后的颜色\n            cor_temporal_color: '#CEBB7D', //展现多维度数据temporal信息的背景\n            nothighlight_color: \"black\", //每个stage最大的外框\n            highlight_color: '#CEBB7D', //pattern view点击之后点击的元素会被highlight,也就是每个stage背景色会被改变\n            distribution_color: '#C9CBD1',\n            normal_color: '#2f3e46',\n            stage_name: '#d6ccc2',\n            cor_color: '#C9CBD1',\n            background_color: 'white',\n            count: 0,\n            //color_list: [\"#B6B6C6\", \"#ADB9C1\", \"#AFB5A4\", \"#EFE8BD\", \"#e9d1b4\", \"#d2aaa3\"],\n            color_list: [\"#768f89\", \"#adb49f\", \"#EFE8BD\", \"#e9d1b4\", \"#ddbcab\", \"#d2aaa3\"],\n            // color_list: [\"#B5B5C5\", \"#E2C9B3\", \"#ECC0C0\", \"#CAD5C3\", \"#9CB8CD\", \"#E3C6A9\"],\n            stage_start: 0,\n            stage_interval: 0,\n            stage_y_start: 0,\n            stage_number: 6,\n            temporal: 0,\n            highlight_list: [],\n            active_passive: [],\n            stagestatistics: {},\n            highlight_class: [],\n            last_highlight_class: []\n        }\n    },\n    watch: {\n        active_passive: function () {\n            const _this = this\n            pipeService.emitAP(_this.active_passive)\n        },\n        temporal: function () {\n            const _this = this\n            if (_this.temporal == 1) {\n                $('.temporal').attr('visibility', 'visable')\n                $('.non-temporal').attr('visibility', 'hidden')\n                $('.temporal-click').attr('fill', _this.distribution_color)\n            } else {\n                $('.non-temporal').attr('visibility', 'visable')\n                $('.temporal').attr('visibility', 'hidden')\n                $('.temporal-click').attr('fill', _this.background_color)\n            }\n\n        },\n        highlight_list: function () {\n            //console.log(this.highlight_list)\n            const _this = this\n            for (let i = 0; i < _this.last_highlight_class.length; i++) {\n                $(_this.last_highlight_class[i]).attr(\"fill\", _this.distribution_color)\n            }\n            const deviation_threshold = 0.01\n            _this.highlight_class = []\n            let stage_highlight = new Set()\n            for (let i = 0; i < _this.stage_number; i++) {\n                if (_this.highlight_list.includes(i.toString())) {\n                    $('.stage_background1' + i.toString()).attr(\"fill\", _this.highlight_color).attr(\"opacity\", 0.1).attr(\"stroke-width\", 0)\n                } else {\n                    $('.stage_background1' + i.toString()).attr(\"fill\", \"white\").attr(\"stroke-width\", 1)\n                }\n            }\n            _this.last_highlight_class = _this.highlight_class\n            for (let i = 0; i < _this.highlight_list.length; i++) {\n                stage_highlight.add(_this.highlight_list[i])\n            }\n            let types = Object.keys(_this.stagestatistics[0])\n            if (stage_highlight.size >= 2) {\n                for (let t of types) {\n                    let types2 = Object.keys(_this.stagestatistics[0][t])\n                    for (let t2 of types2) {\n                        let temp_arr = []\n                        for (let stage of stage_highlight) {\n                            temp_arr.push(_this.stagestatistics[stage][t][t2] / _this.dictSum(_this.stagestatistics[stage][t]))\n                        }\n                        if (_this.calculateVariance(temp_arr) >= deviation_threshold) {\n                            //超过阈值就高亮\n                            let k = 'd'\n                            if (t == 1) {\n                                k = 'a'\n                            }\n                            if (t == 2) {\n                                k = 'p'\n                            }\n                            for (let stage of stage_highlight) {\n                                //console.log('.non-temporal.' + stage + '.' + k + (parseInt(t2) + 1))\n                                $('.non-temporal.' + stage + '.' + k + (parseInt(t2) + 1)).attr('fill', _this.comparison_color)\n                                $('.temporal.' + stage + '.' + k + '2' + (parseInt(t2) + 1)).attr('fill', _this.comparison_color)\n                                _this.highlight_class.push('.non-temporal.' + stage + '.' + k  + (parseInt(t2) + 1))\n                                _this.highlight_class.push('.temporal.' + stage + '.' + k + '2' + (parseInt(t2) + 1))\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    },\n    mounted: function () {\n        const _this = this\n\n        const svg = d3.select(\".stageviewbody\")\n            .append(\"svg\")\n            .attr(\"width\", 900)\n            .attr(\"height\", 280)\n            .attr(\"class\", \"progressionstage\")\n\n        _this.drawLegend(_this.stage_number) //需要传递stage number的值\n\n        const drag = d3.drag()\n            .on('start', function () {\n                d3.select(this).raise().classed(\"active\", true);\n                d3.event.sourceEvent.stopPropagation();\n                d3.event.sourceEvent.preventDefault();\n            })\n            .on('drag', function (event, d) {\n                d3.select(this)\n                    .attr(\"transform\", \"translate(\" + (d3.event.x) + \",\" + (d3.event.y) + \")\");\n            })\n            .on('end', function (event, d) {\n                d3.select(this).classed(\"active\", false);\n                var allGElements = d3.selectAll(\".stage_drag\");\n                var allGCoords = allGElements.nodes().map(function (d) {\n                    return {\n                        x: parseInt(d.getAttribute(\"transform\").match(/(\\d+)/g)[0]),\n                        y: parseInt(d.getAttribute(\"transform\").match(/(\\d+)/g)[1])\n                    };\n                });\n\n                // 将stage元素根据x坐标进行排序\n                var sortedGElements = allGElements.nodes().sort(function (a, b) {\n                    return parseInt(a.getAttribute(\"transform\").match(/(\\d+)/g)[0]) - parseInt(b.getAttribute(\"transform\").match(/(\\d+)/g)[0]);\n                });\n                // 更新每个stage元素的位置以反映其顺序\n                sortedGElements.forEach(function (gElement, i) {\n                    var x = i * _this.stage_interval + _this.stage_start; // 设置每个stage元素的x坐标\n                    var y = _this.stage_y_start // 保留y坐标\n\n                    d3.select(gElement).attr(\"transform\", \"translate(\" + x + \",\" + y + \")\");\n                });\n            });\n\n        pipeService.onStage(function (msg) {\n            var data = msg[2]\n            var active_k_msg = msg[0]\n            var passive_k_msg = msg[1]\n            data = eval(\"(\" + data + \")\")\n            //console.log('******onStage******', data)\n            // *****重新map*****\n            const data_map = {}\n            for (let i = 0; i < _this.stage_number; i++) {\n                data_map[i] = data[_this.stageMap(i)]\n                console.log('******onStage******', _this.stageMap(i), i, data[_this.stageMap(i)], data_map[i])\n            }\n            console.log('******onStage******', data, data_map)\n            _this.drawStage(active_k_msg, passive_k_msg, data_map)\n            d3.selectAll(\".stage_drag\").call(drag)\n        })\n\n        pipeService.onClickPath(function (data) {\n            let list_temp = []\n            for (let i = 0; i < data[0].length; i++) {\n                if (~list_temp.includes(data[0][i])) {\n                    list_temp.push(data[0][i])\n                }\n            }\n            _this.highlight_list = list_temp\n        })\n\n    },\n    methods: {\n        stageMap(stage) {\n            if (stage == 2) {\n                return 0\n            }\n            if (stage == 4) {\n                return 1\n            }\n            if (stage == 0) {\n                return 2\n            }\n            if (stage == 1) {\n                return 3\n            }\n            if (stage == 3) {\n                return 4\n            } \n            if (stage == 5) {\n                return 5\n            }\n        },\n        calculateVariance(arr) {\n            const n = arr.length;\n            const mean = arr.reduce((acc, curr) => acc + curr, 0) / n;\n            const variance = arr.reduce((acc, curr) => acc + Math.pow(curr - mean, 2), 0) / n;\n            return variance;\n        },\n        drawLegend(stage_number) {\n            const _this = this\n            const svg = d3.select(\".stageviewheader\")\n                .append(\"svg\")\n                .attr(\"width\", 700)\n                .attr(\"height\", 20)\n\n            const domain_x = []\n            for (let i = 0; i < stage_number; i++) {\n                domain_x.push(i)\n            }\n\n            const color = d3.scaleOrdinal()\n                .domain(domain_x)\n                .range(_this.color_list)\n\n            let g_legend = svg.append('g')\n            g_legend.append(\"rect\")\n                .attr(\"x\", 15)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.background_color)\n                .attr(\"stroke\", \"black\")\n                .on(\"click\", function () {\n                    _this.temporal = 1 - _this.temporal\n                })\n                .attr(\"class\", \"temporal-click\")\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 29)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 13)\n                .attr(\"fill\", _this.text_color)\n                .text(\"temporal\")\n            \n            //*********假的输入框**********\n            g_legend.append(\"rect\")\n                .attr(\"x\", 200)\n                .attr(\"y\", 3)\n                .attr(\"width\", 12)\n                .attr(\"height\", 13)\n                .attr(\"fill\", _this.background_color)\n                .attr(\"stroke\", \"black\")\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 109)\n                .attr(\"y\", 14)\n                .attr(\"font-size\", 13)\n                .attr(\"fill\", _this.text_color)\n                .text(\"stage number: 6\")\n\n            for (let c = 0; c < stage_number; c++) {\n                svg.append(\"circle\")\n                    .attr(\"cx\", 225 + c * 80)\n                    .attr(\"cy\", 10)\n                    .attr(\"r\", 7)\n                    .attr(\"fill\", color(c))\n                    .attr(\"stroke\", \"#5b5b5b\")\n\n                svg.append(\"text\")\n                    .attr(\"x\", 238 + c * 80)\n                    .attr(\"y\", 14)\n                    .attr(\"font-size\", 13)\n                    .text(\"stage \" + (c + 1))\n            }\n\n            g_legend.append(\"circle\")\n                .attr(\"cx\", 693)\n                .attr(\"cy\", 7)\n                .attr(\"r\", 5)\n                .attr(\"fill\", \"white\")\n                .attr(\"stroke\", \"red\")\n        \n            g_legend.append(\"text\")\n                .attr(\"x\", 690)\n                .attr(\"y\", 10)\n                .attr(\"font-size\", 8)\n                .text(\"?\")\n                .attr(\"fill\", \"#bc4b51\")\n        },\n        drawStage(active_k, passive_k, data) {\n            const _this = this\n            const width = 880\n            const height = 200\n            var keys = Object.keys(data)\n            const domain_x = []\n            for (let i = 0; i < keys.length; i++) {\n                domain_x.push(i)\n            }\n            var xscale = d3.scaleLinear()\n                .domain([0, keys.length - 1])\n                .range([120, 800])\n\n            var color = d3.scaleOrdinal()\n                .domain(domain_x)\n                .range(_this.color_list)\n\n            _this.stage_interval = xscale(1) - xscale(0)\n\n            for (let i = 0; i < keys.length; i++) {\n                _this.drawEachStage(i, data[i], 3, color, xscale(i), xscale(1) - xscale(0))\n            }\n        },\n        splitDataByThresholds(data, thresholds, gap) {\n            // 初始化分割结果数组\n            var results = new Array(thresholds.length + 1);\n            for (let i = 0; i < results.length; i++) {\n                results[i] = new Array(data.length)\n                for (let p = 0; p < results[i].length; p++) {\n                    results[i][p] = 0;\n                }\n            }\n            // 对数据点逐个进行分割\n            for (let i = 0; i < data.length; i++) {\n                let value = data[i];\n                let j = 0;\n                while (j < thresholds.length && value > thresholds[j]) {\n                    results[j][i] = gap;\n                    j++;\n                }\n                results[j][i] = value - gap * j;\n                for (let k = j + 1; k < results.length; k++) {\n                    results[k][i] = 0;\n                }\n            }\n\n            return results;\n        },\n        drawEachStage(stage, data, maxcor, color_scale, x_start, interval) {\n            const _this = this\n            const data_orig = data\n            var data_summary = new Array()\n            var data_summary_all = { \"depression\": new Array(), \"active behavior\": new Array(), \"passive behavior\": new Array() } //用来包含所有的点\n            var data_statistics = new Array()\n            var data_statistics_all = new Array() //用来包含所有的点\n            var segment_length = data.length\n            var corr_statistics = new Array()\n            var data_concat = new Array()\n            var corr_statistics_all = new Array()\n            for (let i = 0; i < segment_length; i++) {\n                data_summary[i] = { \"depression\": new Array(), \"active behavior\": new Array(), \"passive behavior\": new Array() } //存储每一个时间点关于三个的统计\n                data_statistics[i] = new Array()\n                data_concat = data_concat.concat(data[i])\n                for (let j = 0; j < data[i].length; j++) {\n                    data_summary[i][\"depression\"].push(_this.depressionThreshold(data[i][j][0]))\n                    data_summary[i][\"active behavior\"].push(data[i][j][1])\n                    data_summary[i][\"passive behavior\"].push(data[i][j][2])\n                    data_summary_all[\"depression\"].push(_this.depressionThreshold(data[i][j][0]))\n                    data_summary_all[\"active behavior\"].push(data[i][j][1])\n                    data_summary_all[\"passive behavior\"].push(data[i][j][2])\n                }\n                corr_statistics.push(_this.correlationSummarize(data[i], maxcor))\n                data_statistics[i].push(\n                    _this.getFrequency(data_summary[i][\"depression\"]),\n                    _this.getFrequency(data_summary[i][\"active behavior\"]),\n                    _this.getFrequency(data_summary[i][\"passive behavior\"])\n                )\n            }\n            _this.stagestatistics[stage] = data_statistics_all\n            corr_statistics_all = _this.correlationSummarize(data_concat, maxcor)\n            data_statistics_all.push(\n                _this.getFrequency(data_summary_all[\"depression\"]),\n                _this.getFrequency(data_summary_all[\"active behavior\"]),\n                _this.getFrequency(data_summary_all[\"passive behavior\"])\n            )\n            //开始画图\n            const svg = d3.select(\".progressionstage\")\n            const svg_stage = svg.append(\"g\")\n                .attr(\"width\", 300)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"stage_drag \" + stage)\n                .style(\"z-index\", 2)\n                .attr(\"transform\", \"translate(\" + (x_start - 50) + \",0)\")\n            if (stage == 0) {\n                _this.stage_start = x_start - 50\n            }\n            const svg_1 = svg_stage.append(\"g\")\n                .attr(\"width\", 300)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"stage_single\" + stage)\n                .attr(\"id\", \"stage_single\" + stage)\n                .style(\"z-index\", 2)\n\n            const svg_3 = svg.append(\"g\")\n                .attr(\"width\", 880)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"legend\")\n                .style(\"z-index\", 2)\n                .attr(\"transform\", \"translate(10, 0)\")\n\n            let y_start = 30\n            const width_scale = interval / 2\n            const height_scale = 11\n\n            let x_start1 = 50\n\n            // 画背景\n            svg_1.append(\"rect\")\n                .attr(\"x\", x_start1 - 35)\n                .attr(\"y\", y_start - 15)\n                .attr(\"rx\", 5)\n                .attr(\"ry\", 5)\n                .attr(\"height\", 220)\n                .attr(\"width\", 110)\n                .attr(\"fill\", \"white\")\n                .attr(\"stroke\", _this.nothighlight_color)\n                .attr(\"stroke-width\", 1)\n                .attr(\"opacity\", 0.1)\n                .attr(\"class\", \"stage_background1\" + stage)\n\n            // 画stage标志\n            svg_1.append(\"circle\")\n                .attr(\"cx\", x_start1 - 35)\n                .attr(\"cy\", y_start - 15)\n                .attr(\"r\", 7)\n                .attr(\"fill\", color_scale(stage))\n                .attr(\"stroke\", _this.nothighlight_color)\n                .attr(\"stroke-width\", 0.2)\n                .attr(\"class\", \"stage_background2\" + stage)\n                .on(\"click\", function () {\n                    if (_this.highlight_list.includes(stage.toString())) {\n                        let temp = []\n                        for (let i = 0; i < _this.highlight_list.length; i++) {\n                            if (_this.highlight_list[i] != stage.toString()) {\n                                temp.push(_this.highlight_list[i])\n                            }\n                        }\n                        _this.highlight_list = temp\n                        //console.log(_this.highlight_list)\n                    } else {\n                        _this.highlight_list.push(stage.toString())\n                        //console.log(_this.highlight_list)\n                    }\n                })\n            \n            svg_1.append(\"text\")\n                .attr(\"x\", x_start1 - 39)\n                .attr(\"y\", y_start - 10)\n                .attr(\"font-size\", 13)\n                .attr(\"fill\", 'white')\n                .text(stage + 1)\n                .attr(\"class\", \"stage_background2\" + stage)\n                .on(\"click\", function () {\n                    if (_this.highlight_list.includes(stage.toString())) {\n                        let temp = []\n                        for (let i = 0; i < _this.highlight_list.length; i++) {\n                            if (_this.highlight_list[i] != stage.toString()) {\n                                temp.push(_this.highlight_list[i])\n                            }\n                        }\n                        _this.highlight_list = temp\n                        //console.log(_this.highlight_list)\n                    } else {\n                        _this.highlight_list.push(stage.toString())\n                        //console.log(_this.highlight_list)\n                    }\n                })\n            //.attr(\"opacity\", 0.5)\n\n            // 画单个attribute\n            const position = {} // 记录纵坐标位置\n            for (let i = 0; i < data_statistics_all.length; i++) {\n                let y_start2 = y_start\n                let keys_i = Object.keys(data_statistics_all[i])\n                let values_i = Object.values(data_statistics_all[i])\n                svg_3.append(\"rect\")\n                    .attr(\"x\", 10)\n                    .attr(\"y\", y_start)\n                    .attr(\"height\", height_scale * keys_i.length + 3 * (keys_i.length - 1))\n                    .attr(\"width\", 2)\n                    .attr(\"fill\", \"#5b5b5b\")\n                    .attr(\"opacity\", 0.2)\n\n                svg_1.append(\"rect\")\n                    .attr(\"x\", x_start1 - 5)\n                    .attr(\"y\", y_start)\n                    .attr(\"height\", height_scale * keys_i.length + 3 * (keys_i.length - 1))\n                    .attr(\"width\", width_scale)\n                    .attr(\"fill\", \"#5b5b5b\")\n                    .attr(\"opacity\", 0.05)\n                    .attr(\"rx\", 3)\n                    .attr(\"ry\", 3)\n\n                svg_1.append(\"rect\")\n                    .attr(\"x\", x_start1 - 3)\n                    .attr(\"y\", y_start)\n                    .attr(\"height\", height_scale * keys_i.length + 3 * (keys_i.length - 1))\n                    .attr(\"width\", 3)\n                    .attr(\"fill\", \"#cbcbcb\")\n                    // .attr(\"opacity\", 0.3)\n                for (let j = 0; j < keys_i.length; j++) {\n                    // 画legend\n                    if (i == 0) {\n                        svg_3.append(\"text\")\n                            .attr(\"x\", 15)\n                            .attr(\"y\", y_start + height_scale - 2)\n                            .attr(\"font-size\", 13)\n                            .text(function () {\n                                if (j == 0) {\n                                    return 'low'\n                                } else if (j == 1) {\n                                    return 'medium'\n                                } else {\n                                    return 'high'\n                                }\n                            })\n                            .attr(\"opacity\", 0.2)\n                    } else if (i == 1) {\n                        svg_3.append(\"text\")\n                            .attr(\"x\", 15)\n                            .attr(\"y\", y_start + height_scale - 2)\n                            .attr(\"font-size\", 13)\n                            .text(\"p\" + (j + 1))\n                            .attr(\"opacity\", 0.2)\n                    } else {\n                        svg_3.append(\"text\")\n                            .attr(\"x\", 15)\n                            .attr(\"y\", y_start + height_scale - 2)\n                            .attr(\"font-size\", 13)\n                            .text(\"r\" + (j + 1))\n                            .attr(\"opacity\", 0.2)\n                    }\n                    position[i.toString() + j.toString()] = y_start + height_scale / 2\n                    // 这里是画中间的小方块，注意是non-temporal信息\n                    svg_1.append(\"rect\")\n                        .attr(\"x\", x_start1)\n                        .attr(\"y\", y_start)\n                        .attr(\"height\", height_scale)\n                        .attr(\"width\", data_statistics_all[i][j] / _this.sum(values_i) * width_scale)\n                        .attr(\"fill\", _this.distribution_color)\n                        .attr(\"class\", function () {\n                            if (i == 1) {\n                                return \"non-temporal \" + stage + ' a' + (j + 1)\n                            } else if (i == 2) {\n                                return \"non-temporal \" + stage + ' p' + (j + 1)\n                            } else {\n                                return \"non-temporal \" + stage + ' d' + (j + 1)\n                            }\n                        })\n                        .attr(\"stroke\", _this.stroke_color)\n                        .attr(\"stroke-width\", 0.05)\n                        //hover在bar上\n                        .on('mouseenter', function () {\n                            $(this).attr(\"fill\", _this.stroke_color)\n                            let type = $(this).attr('class').split(' ')[2][0] //d a p\n                            let order = parseInt($(this).attr('class').split(' ')[2][1]) - 1 // 1 2 3 4...\n                            //需要提取出所有相连的线以及bar\n                            let keys_temp = ['de_ac', 'ac_pa', 'de_pa', 'de_ac_pa']\n                            for (let i = 0; i < keys_temp.length; i++) {\n                                for (let j = 0; j < corr_statistics_all[keys_temp[i]].length; j++) {\n                                    let name_temp = keys_temp[i]\n                                    let value_temp = parseInt(corr_statistics_all[keys_temp[i]][j][0])\n                                    // 首先画bar\n                                    if (i == 3) {\n                                        let temp0 = parseInt(value_temp / 100)\n                                        let temp2 = value_temp % 10\n                                        let temp1 = parseInt((value_temp - temp0 * 100) / 10)\n                                        if (type == 'd') {\n                                            if (order != temp0) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'a') {\n                                            if (order != temp1) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'p') {\n                                            if (order != temp2) {\n                                                continue\n                                            }\n                                        }\n                                        _this.active_passive.push('a' + (temp1 + 1))\n                                        _this.active_passive.push('p' + (temp2 + 1))\n                                        $('.stage' + stage + '.de_ac_pa.' + value_temp).attr(\"stroke\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.d' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.a' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.p' + (temp2 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.d2' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.a2' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.p2' + (temp2 + 1)).attr(\"fill\", _this.stroke_color)\n                                    } else {\n                                        let temp0 = parseInt(value_temp / 10)\n                                        let temp1 = value_temp % 10\n                                        let k0 = 'd'\n                                        let k1 = 'a'\n                                        let kk = 'de_ac'\n                                        if (i == 0) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                continue\n                                            }\n                                        }\n                                        if (i == 1) {\n                                            if (type == 'a') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'd') {\n                                                continue\n                                            }\n                                            k0 = 'a'\n                                            k1 = 'p'\n                                            kk = 'ac_pa'\n                                        }\n                                        if (i == 2) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                continue\n                                            }\n                                            k1 = 'p'\n                                            kk = 'de_pa'\n                                        }\n                                        _this.active_passive.push(k0 + (temp0 + 1))\n                                        _this.active_passive.push(k1 + (temp1 + 1))\n                                        $('.stage' + stage + '.' + kk + \".\" + value_temp).attr(\"stroke\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.' + k0 + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.' + k1 + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                    }\n                                }\n                            }\n                        })\n                        .on('mouseleave', function () {\n                            let class_name_split = type = $(this).attr('class').split(' ')\n                            let class_name = '.'\n                            for (let c = 0; c < class_name_split.length; c++) {\n                                class_name += class_name_split[c]\n                                if (c < class_name_split.length - 1) {\n                                    class_name += '.'\n                                }\n                            }\n                            if (_this.highlight_class.includes(class_name)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                            let type = $(this).attr('class').split(' ')[2][0] //d a p\n                            let order = parseInt($(this).attr('class').split(' ')[2][1]) - 1 // 1 2 3 4...\n                            //console.log(type, order)\n                            //需要提取出所有相连的线以及bar\n                            let keys_temp = ['de_ac', 'ac_pa', 'de_pa', 'de_ac_pa']\n                            for (let i = 0; i < keys_temp.length; i++) {\n                                for (let j = 0; j < corr_statistics_all[keys_temp[i]].length; j++) {\n                                    let name_temp = keys_temp[i]\n                                    let value_temp = parseInt(corr_statistics_all[keys_temp[i]][j][0])\n                                    // 首先画bar\n                                    if (i == 3) {\n                                        let temp0 = parseInt(value_temp / 100)\n                                        let temp2 = value_temp % 10\n                                        let temp1 = parseInt((value_temp - temp0 * 100) / 10)\n                                        if (type == 'd') {\n                                            if (order != temp0) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'a') {\n                                            if (order != temp1) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'p') {\n                                            if (order != temp2) {\n                                                continue\n                                            }\n                                        }\n                                        _this.active_passive = _this.removeElement(_this.active_passive, ['d' + (temp0 + 1), 'a' + (temp1 + 1), 'p' + (temp2 + 1)])\n                                        $('.stage' + stage + '.de_ac_pa.' + value_temp).attr(\"stroke\", _this.line_color)\n                                        $('.non-temporal.' + stage + '.d' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.d' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.a' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.a' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.p' + (temp2 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.p' + (temp2 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.d2' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.d2' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.a2' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.a2' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.p2' + (temp2 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.p2' + (temp2 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                    } else {\n                                        let temp0 = parseInt(value_temp / 10)\n                                        let temp1 = value_temp % 10\n                                        let k0 = 'd'\n                                        let k1 = 'a'\n                                        let kk = 'de_ac'\n                                        if (i == 0) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                continue\n                                            }\n                                        }\n                                        if (i == 1) {\n                                            if (type == 'a') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'd') {\n                                                continue\n                                            }\n                                            k0 = 'a'\n                                            k1 = 'p'\n                                            kk = 'ac_pa'\n                                        }\n                                        if (i == 2) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                continue\n                                            }\n                                            k1 = 'p'\n                                            kk = 'de_pa'\n                                        }\n                                        _this.active_passive = _this.removeElement(_this.active_passive, [k0 + (temp0 + 1), k1 + (temp1 + 1)])\n                                        $('.stage' + stage + '.' + kk + \".\" + value_temp).attr(\"stroke\", _this.distribution_color)\n                                        $('.non-temporal.' + stage + '.' + k0 + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.' + k0 + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.' + k1 + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.' + k1 + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                    }\n                                }\n                            }\n                        })\n                        .on(\"click\", function () {\n                            if (i != 0) {\n                                if ($(this).attr('stroke-width') == 0.05) {\n                                    //表示高亮\n                                    $(this).attr('stroke-width', 1)\n                                    if (i == 1) {\n                                        //代表点击的active\n                                        $(\".temporal.\" + stage + '.a' + (j + 1)).attr('stroke', _this.stroke_color)\n                                        _this.active_passive.push('a' + (j + 1))\n                                    }\n                                    if (i == 2) {\n                                        //代表点击的passive\n                                        $(\".temporal.\" + stage + '.p' + (j + 1)).attr('stroke', _this.stroke_color)\n                                        _this.active_passive.push('p' + (j + 1))\n                                    }\n                                } else {\n                                    //表示取消点击\n                                    $(this).attr('stroke-width', 0.05)\n                                    if (i == 1) {\n                                        //代表点击的active\n                                        $(\".temporal.\" + stage + '.a' + (j + 1)).attr('stroke', '#e5e5e5')\n                                        let temp_list = []\n                                        let flag = 1\n                                        for (let p = 0; p < _this.active_passive.length; p++) {\n                                            if (flag == 1 && _this.active_passive[p] == 'a' + (j + 1)) {\n                                                flag = 0\n                                                continue\n                                            }\n                                            temp_list.push(_this.active_passive[p])\n                                        }\n                                        _this.active_passive = temp_list\n                                    }\n                                    if (i == 2) {\n                                        //代表点击的passive\n                                        $(\".temporal.\" + stage + '.p' + (j + 1)).attr('stroke', '#e5e5e5')\n                                        let temp_list = []\n                                        let flag = 1\n                                        for (let p = 0; p < _this.active_passive.length; p++) {\n                                            if (flag == 1 && _this.active_passive[p] == 'p' + (j + 1)) {\n                                                flag = 0\n                                                continue\n                                            }\n                                            temp_list.push(_this.active_passive[p])\n                                        }\n                                        _this.active_passive = temp_list\n                                    }\n                                }\n                            }\n                        })\n                    // 这个地方需要加上每一个atribute的temporal信息\n                    let yScale = d3.scaleLinear()\n                        .domain([0, 1])\n                        .range([height_scale, 0]);\n                    let yScale2 = d3.scaleLinear()\n                        .domain([0, 0.2])\n                        .range([height_scale, 0]);\n                    let area = d3.area()\n                        .x(function (d) { return d.x })\n                        .y0(height_scale)\n                        .y1(function (d) { return yScale(d.y) })\n                    let temporal_temp = []\n                    let temporal_horizon = []\n                    for (let p = 0; p < data_statistics.length; p++) {\n                        if (typeof data_statistics[p][i][j] != 'number') {\n                            data_statistics[p][i][j] = 0\n                        }\n                        temporal_temp.push(\n                            { x: x_start1 + p * width_scale / data_statistics.length, y: data_statistics[p][i][j] / data[j].length }\n                        )\n                        temporal_horizon.push(data_statistics[p][i][j] / data[j].length)\n                    }\n\n                    //这里是加那些小方块，但是注意要是temporal信息\n                    svg_1.append(\"rect\")\n                        .attr(\"x\", x_start1)\n                        .attr(\"y\", y_start)\n                        .attr(\"height\", height_scale)\n                        .attr(\"width\", width_scale - 5)\n                        .attr(\"fill\", 'white')\n                        .attr(\"stroke\", \"#e5e5e5\")\n                        .attr(\"stroke-width\", 1)\n                        .attr(\"opacity\", 0.2)\n                        .attr(\"visibility\", \"hidden\")\n                        .on(\"click\", function () {\n                            if (i != 0) {\n                                if ($(this).attr('stroke') == \"#e5e5e5\") {\n                                    //表示高亮了\n                                    $(this).attr('stroke', _this.stroke_color)\n                                    if (i == 1) {\n                                        //代表点击的active\n                                        $(\".non-temporal.\" + stage + '.a' + (j + 1)).attr('stroke-width', 1)\n                                        _this.active_passive.push('a' + (j + 1))\n                                    }\n                                    if (i == 2) {\n                                        //代表点击的passive\n                                        $(\".non-temporal.\" + stage + '.p' + (j + 1)).attr('stroke-width', 1)\n                                        _this.active_passive.push('p' + (j + 1))\n                                    }\n                                } else {\n                                    //表示取消点击\n                                    $(this).attr('stroke', \"#e5e5e5\")\n                                    if (i == 1) {\n                                        //代表点击的active\n                                        $(\".non-temporal.\" + stage + '.a' + (j + 1)).attr('stroke-width', 0.05)\n                                        let temp_list = []\n                                        let flag = 1\n                                        for (let p = 0; p < _this.active_passive.length; p++) {\n                                            if (flag == 1 && _this.active_passive[p] == 'a' + (j + 1)) {\n                                                flag = 0\n                                                continue\n                                            }\n                                            temp_list.push(_this.active_passive[p])\n                                        }\n                                        _this.active_passive = temp_list\n                                    }\n                                    if (i == 2) {\n                                        //代表点击的passive\n                                        $(\".non-temporal.\" + stage + '.p' + (j + 1)).attr('stroke-width', 0.05)\n                                        let temp_list = []\n                                        let flag = 1\n                                        for (let p = 0; p < _this.active_passive.length; p++) {\n                                            if (flag == 1 && _this.active_passive[p] == 'p' + (j + 1)) {\n                                                flag = 0\n                                                continue\n                                            }\n                                            temp_list.push(_this.active_passive[p])\n                                        }\n                                        _this.active_passive = temp_list\n                                    }\n                                }\n                            }\n                        })\n                    const thresholds = [0.2, 0.4, 0.6, 0.8]\n\n                    let areaGenerator = d3.area()\n                        .x(function (d, i) { return x_start1 + i * (width_scale + 10) / data_statistics.length; })\n                        .y0(height_scale)\n                        .y1(function (d) { return yScale2(d); })\n                        .curve(d3.curveBasis);\n\n                    let layers = _this.splitDataByThresholds(temporal_horizon, thresholds, 0.2)\n                    let svg_1_1 = svg_1.append('g')\n                        .attr(\"transform\", \"translate(0,\" + y_start + \")\")\n\n                    svg_1_1.selectAll(\".layer\")\n                        .data(layers)\n                        .enter().append(\"path\")\n                        .attr(\"class\", \"layer\")\n                        .attr(\"d\", areaGenerator)\n                        .attr(\"opacity\", function (d, i) { return (i + 1) * 0.3 })\n                        .attr(\"fill\", _this.distribution_color)\n                        .attr(\"class\", function () {\n                            if (i == 1) {\n                                return \"temporal \" + stage + ' a2' + (j + 1)\n                            } else if (i == 2) {\n                                return \"temporal \" + stage + ' p2' + (j + 1)\n                            } else {\n                                return \"temporal \" + stage + ' d2' + (j + 1)\n                            }\n                        })\n                        .on('mouseenter', function () {\n                            $(this).attr(\"fill\", _this.stroke_color)\n                            let type = $(this).attr('class').split(' ')[2][0] //d a p\n                            let order = parseInt($(this).attr('class').split(' ')[2][2]) - 1 // 1 2 3 4...\n                            //需要提取出所有相连的线以及bar\n                            let keys_temp = ['de_ac', 'ac_pa', 'de_pa', 'de_ac_pa']\n                            for (let i = 0; i < keys_temp.length; i++) {\n                                for (let j = 0; j < corr_statistics_all[keys_temp[i]].length; j++) {\n                                    let name_temp = keys_temp[i]\n                                    let value_temp = parseInt(corr_statistics_all[keys_temp[i]][j][0])\n                                    // 首先画bar\n                                    if (i == 3) {\n                                        let temp0 = parseInt(value_temp / 100)\n                                        let temp2 = value_temp % 10\n                                        let temp1 = parseInt((value_temp - temp0 * 100) / 10)\n                                        if (type == 'd') {\n                                            if (order != temp0) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'a') {\n                                            if (order != temp1) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'p') {\n                                            if (order != temp2) {\n                                                continue\n                                            }\n                                        }\n                                        _this.active_passive.push('a' + (temp1 + 1))\n                                        _this.active_passive.push('p' + (temp2 + 1))\n                                        $('.stage' + stage + '.de_ac_pa.' + value_temp).attr(\"stroke\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.d' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.a' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.p' + (temp2 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.d2' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.a2' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.p2' + (temp2 + 1)).attr(\"fill\", _this.stroke_color)\n                                    } else {\n                                        let temp0 = parseInt(value_temp / 10)\n                                        let temp1 = value_temp % 10\n                                        let k0 = 'd'\n                                        let k1 = 'a'\n                                        let kk = 'de_ac'\n                                        if (i == 0) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                continue\n                                            }\n                                        }\n                                        if (i == 1) {\n                                            if (type == 'a') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'd') {\n                                                continue\n                                            }\n                                            k0 = 'a'\n                                            k1 = 'p'\n                                            kk = 'ac_pa'\n                                        }\n                                        if (i == 2) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                continue\n                                            }\n                                            k1 = 'p'\n                                            kk = 'de_pa'\n                                        }\n                                        _this.active_passive.push(k0 + (temp0 + 1))\n                                        _this.active_passive.push(k1 + (temp1 + 1))\n                                        $('.stage' + stage + '.' + kk + \".\" + value_temp).attr(\"stroke\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.' + k0 + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.' + k1 + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                    }\n                                }\n                            }\n                        })\n                        .on('mouseleave', function () {\n                            let class_name_split = type = $(this).attr('class').split(' ')\n                            let class_name = '.'\n                            for (let c = 0; c < class_name_split.length; c++) {\n                                class_name += class_name_split[c]\n                                if (c < class_name_split.length - 1) {\n                                    class_name += '.'\n                                }\n                            }\n                            //console.log(class_name, _this.highlight_class)\n                            if (_this.highlight_class.includes(class_name)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                            let type = $(this).attr('class').split(' ')[2][0] //d a p\n                            let order = parseInt($(this).attr('class').split(' ')[2][2]) - 1 // 1 2 3 4...\n                            //console.log(type, order)\n                            //需要提取出所有相连的线以及bar\n                            let keys_temp = ['de_ac', 'ac_pa', 'de_pa', 'de_ac_pa']\n                            for (let i = 0; i < keys_temp.length; i++) {\n                                for (let j = 0; j < corr_statistics_all[keys_temp[i]].length; j++) {\n                                    let name_temp = keys_temp[i]\n                                    let value_temp = parseInt(corr_statistics_all[keys_temp[i]][j][0])\n                                    // 首先画bar\n                                    if (i == 3) {\n                                        let temp0 = parseInt(value_temp / 100)\n                                        let temp2 = value_temp % 10\n                                        let temp1 = parseInt((value_temp - temp0 * 100) / 10)\n                                        if (type == 'd') {\n                                            if (order != temp0) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'a') {\n                                            if (order != temp1) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'p') {\n                                            if (order != temp2) {\n                                                continue\n                                            }\n                                        }\n                                        _this.active_passive = _this.removeElement(_this.active_passive, ['a' + (temp1 + 1), 'p' + (temp2 + 1)])\n                                        $('.stage' + stage + '.de_ac_pa.' + value_temp).attr(\"stroke\", _this.line_color)\n                                        $('.non-temporal.' + stage + '.d' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.d' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.a' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.a' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.p' + (temp2 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.p' + (temp2 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.d2' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.d2' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.a2' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.a2' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.p2' + (temp2 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.p2' + (temp2 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                    } else {\n                                        let temp0 = parseInt(value_temp / 10)\n                                        let temp1 = value_temp % 10\n                                        let k0 = 'd'\n                                        let k1 = 'a'\n                                        let kk = 'de_ac'\n                                        if (i == 0) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                continue\n                                            }\n                                        }\n                                        if (i == 1) {\n                                            if (type == 'a') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'd') {\n                                                continue\n                                            }\n                                            k0 = 'a'\n                                            k1 = 'p'\n                                            kk = 'ac_pa'\n                                        }\n                                        if (i == 2) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                continue\n                                            }\n                                            k1 = 'p'\n                                            kk = 'de_pa'\n                                        }\n                                        _this.active_passive = _this.removeElement(_this.active_passive, [k0 + (temp0 + 1), k1 + (temp1 + 1)])\n                                        $('.stage' + stage + '.' + kk + \".\" + value_temp).attr(\"stroke\", _this.distribution_color)\n                                        $('.non-temporal.' + stage + '.' + k0 + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.' + k0 + (temp0 + 1))) {\n                                                $(this).attr(\"fill\", _this.comparison_color)\n                                            } else {\n                                                $(this).attr(\"fill\", _this.distribution_color)\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.' + k1 + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.' + k1 + (temp1 + 1))) {\n                                                $(this).attr(\"fill\", _this.comparison_color)\n                                            } else {\n                                                $(this).attr(\"fill\", _this.distribution_color)\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1))) {\n                                                $(this).attr(\"fill\", _this.comparison_color)\n                                            } else {\n                                                $(this).attr(\"fill\", _this.distribution_color)\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1))) {\n                                                $(this).attr(\"fill\", _this.comparison_color)\n                                            } else {\n                                                $(this).attr(\"fill\", _this.distribution_color)\n                                            }\n                                        })\n                                    }\n                                }\n                            }\n                        })\n                        .attr(\"visibility\", \"hidden\")\n\n                    y_start += height_scale + 3\n                }\n                svg_3.append(\"text\")\n                    .attr(\"x\", 0)\n                    .attr(\"y\", (y_start + y_start2) / 2)\n                    .attr(\"font-size\", 14)\n                    .text(function () {\n                        if (i == 0) {\n                            return 'd'\n                        } else if (i == 1) {\n                            return 'p'\n                        } else {\n                            return 'r'\n                        }\n                    })\n                    .attr(\"opacity\", 0.2)\n                y_start += 10\n            }\n\n            // 画变量之间的interaction\n            const svg2 = svg_stage.append(\"g\")\n                .attr(\"width\", 300)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"stage_interaction\" + stage)\n                .attr(\"id\", \"stage_single\" + stage)\n                .style(\"z-index\", 1)\n                \n            // 先画两个两个一起出现的，并且标注出最大的那一个，其他的opacity调整很低\n            let keys_c = ['de_ac', 'ac_pa', 'de_pa']\n            let cor_temp_keys = Object.keys(corr_statistics_all['de_ac_pa'])\n            //console.log(corr_statistics_all['de_ac_pa'])\n            const lineGenerator = d3.line()\n                .x(function (d) { return d.x; })\n                .y(function (d) { return d.y; })\n                .curve(d3.curveLinear)\n            const height_curve_scale1 = d3.scaleLinear()\n                .domain([60, 150])\n                .range([10, 20])\n\n            var x_left_list = []\n            for (let i = 0; i < keys_c.length; i++) {\n                let cor_temp = corr_statistics_all[keys_c[i]]\n                for (let j = 0; j < cor_temp.length; j++) {\n                    let temp = parseInt(cor_temp[j][0])\n                    let temp0 = parseInt(temp / 10).toString()\n                    let temp1 = (temp % 10).toString()\n                    let key_1 = ''\n                    let key_2 = ''\n                    if (i == 0) {\n                        key_1 = '0' + temp0\n                        key_2 = '1' + temp1\n                        let flag = 0\n                        for (let t = 0; t < cor_temp_keys.length; t++) {\n                            //console.log(\"***\", (parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) - parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0])%10)/10)\n                            if (parseInt(cor_temp[j]) == (parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) - parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) % 10) / 10) {\n                                flag = 1\n                                break;\n                            }\n                        }\n                        if (flag == 1) {\n                            continue\n                        }\n                    } else if (i == 1) {\n                        key_1 = '1' + temp0\n                        key_2 = '2' + temp1\n                        let flag = 0\n                        for (let t = 0; t < cor_temp_keys.length; t++) {\n                            //console.log(\"***\", parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) - parseInt(parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0])/100) * 100)\n                            if (parseInt(cor_temp[j]) == parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) - parseInt(parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) / 100) * 100) {\n                                flag = 1\n                                break;\n                            }\n                        }\n                        if (flag == 1) {\n                            continue\n                        }\n                    } else {\n                        key_1 = '0' + temp0\n                        key_2 = '2' + temp1\n                        let flag = 0\n                        for (let t = 0; t < cor_temp_keys.length; t++) {\n                            //console.log(\"***\", parseInt(parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0])/100) * 10)\n                            if (parseInt(cor_temp[j]) == parseInt([corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]][0]) % 10 + parseInt(parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) / 100) * 10) {\n                                flag = 1\n                                break;\n                            }\n                        }\n                        if (flag == 1) {\n                            continue\n                        }\n                    }\n                    let y1 = position[key_1]\n                    let y2 = position[key_2]\n                    let x_left = x_start1 - height_curve_scale1(y2 - y1)\n                    let flag_xl = 0\n                    for (let xl = 0; xl < x_left_list.length; xl++) {\n                        if (Math.abs(x_left_list[xl] - x_left) < 3) {\n                            x_left -= 3\n                            x_left_list.push(x_left)\n                            flag_xl = 1\n                            break\n                        }\n                    }\n                    if (flag_xl == 0) {\n                        x_left_list.push(x_left)\n                    }\n                    let x_right = x_start1 - 5\n                    let data1 = [\n                        { x: x_right, y: y1 },\n                        { x: x_left, y: y1 },\n                        { x: x_left, y: y2 },\n                        { x: x_right, y: y2 }\n                    ]\n                    //开始计算co-occurence出现的情况\n                    let corr_temporal = []\n                    for (let p = 0; p < corr_statistics.length; p++) {\n                        let flag_temp = 0\n                        for (let q = 0; q < corr_statistics[p][keys_c[i]].length; q++) {\n                            if (corr_statistics[p][keys_c[i]][q][0] == cor_temp[j][0]) {\n                                flag_temp = 1\n                                corr_temporal.push(corr_statistics[p][keys_c[i]][q][1])\n                                break\n                            }\n                        }\n                        if (flag_temp == 0) {\n                            corr_temporal.push(0)\n                        }\n                    }\n\n                    let yScale = d3.scaleLinear()\n                        .domain([0, 0.5])\n                        .range([height_scale, 0])\n\n                    let area = d3.area()\n                        .x(function (d) { return d.x })\n                        .y0(height_scale)\n                        .y1(function (d) { return yScale(d.y) })\n\n                    let temporal_temp = []\n                    let temporal_horizon = []\n\n                    for (let p = 0; p < corr_temporal.length; p++) {\n                        temporal_temp.push(\n                            { x: x_left + 5 + p * width_scale / data_statistics.length, y: corr_temporal[p] }\n                        )\n                        temporal_horizon.push(corr_temporal[p])\n                    }\n\n                    //开始画co-temporal\n                    let svg_t = svg2.append('g').attr(\"class\", \"co_tem\" + stage + i + cor_temp[j][0])\n                        .attr(\"transform\", \"translate(5, 0)\")\n                        .attr(\"visibility\", \"hidden\")\n                        \n                    svg_t.append(\"rect\")\n                        .attr(\"x\", x_left + 2)\n                        .attr(\"y\", (y1 + y2) / 2 + 5)\n                        .attr(\"height\", height_scale)\n                        .attr(\"width\", width_scale - 5)\n                        .attr(\"fill\", 'white')\n                        .attr(\"class\", \"temporal\")\n                        .attr(\"stroke\", \"#5b5b5b\")\n\n                    svg_t.append(\"rect\")\n                        .attr(\"x\", x_left + 2)\n                        .attr(\"y\", (y1 + y2) / 2 + 5)\n                        .attr(\"height\", height_scale)\n                        .attr(\"width\", width_scale - 5)\n                        .attr(\"fill\", '#5b5b5b')\n                        .attr(\"class\", \"temporal\")\n                        .attr(\"stroke\", \"black\")\n                        .attr(\"opacity\", 0.05)\n\n                    let thresholds = [0.1, 0.2, 0.3, 0.4, 0.5]\n\n                    let yScale2 = d3.scaleLinear()\n                        .domain([0, 0.1])\n                        .range([height_scale, 0]);\n\n                    let areaGenerator = d3.area()\n                        .x(function (d, i) { return x_start1 + i * (width_scale + 10) / data_statistics.length; })\n                        .y0(height_scale)\n                        .y1(function (d) { return yScale2(d); })\n                        .curve(d3.curveBasis);\n\n                    let layers = _this.splitDataByThresholds(temporal_horizon, thresholds, 0.1)\n                    let svg_t_1 = svg_t.append('g')\n                        .attr(\"transform\", \"translate(\" + (x_left - 48) + \",\" + ((y1 + y2) / 2 + 5) + \")\")\n\n                    svg_t_1.selectAll(\".layer_co\")\n                        .data(layers)\n                        .enter().append(\"path\")\n                        .attr(\"class\", \"layer\")\n                        .attr(\"d\", areaGenerator)\n                        .attr(\"opacity\", function (d, i) { return (i + 1) * 0.3 })\n                        .attr(\"fill\", _this.cor_temporal_color)\n                        .attr(\"class\", \"temporal\")\n                    //.attr(\"visibility\", \"hidden\")\n\n                    svg2.append(\"circle\")\n                        .attr(\"cx\", x_left)\n                        .attr(\"cy\", (y1 + y2) / 2)\n                        .attr(\"r\", 2)\n                        .attr(\"fill\", _this.circle_color)\n                        .attr(\"opacity\", 0.4)\n                        .attr(\"class\", \"temporal \" + \"stage\" + stage + \" \" + keys_c[i] + \" \" + cor_temp[j][0])\n                        .attr(\"visibility\", \"hidden\")\n                        .on('mouseenter', function () {\n                            $('.co_tem' + stage + i + cor_temp[j][0]).attr(\"visibility\", \"visable\")\n                            $(this).attr('stroke', _this.stroke_color)\n                            let class_name = $(this).attr('class').split(' ')\n                            let class_name1 = class_name[2]\n                            let class_name2 = parseInt(class_name[3])\n                            let first_type = (parseInt(class_name2 / 10) + 1).toString()\n                            let second_type = ((class_name2 % 10) + 1).toString()\n                            _this.active_passive.push(class_name1[0] + first_type)\n                            _this.active_passive.push(class_name1[3] + second_type)\n                            $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                            $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        })\n                        .on('mouseleave', function () {\n                            $('.co_tem' + stage + i + cor_temp[j][0]).attr(\"visibility\", \"hidden\")\n                            $(this).attr('stroke', _this.line_color)\n                            let class_name = $(this).attr('class').split(' ')\n                            let class_name1 = class_name[2]\n                            let class_name2 = parseInt(class_name[3])\n                            let first_type = (parseInt(class_name2 / 10) + 1).toString()\n                            let second_type = ((class_name2 % 10) + 1).toString()\n                            _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type])\n                            //console.log(\".temporal.\" + stage + \".\" + class_name1[0]+first_type)\n                            $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                        })\n\n                    svg2.append(\"path\")\n                        .datum(data1)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", _this.line_color)\n                        .attr(\"stroke-width\", function () {\n                            if (j != 0) {\n                                return 1\n                            } else {\n                                return 2\n                            }\n                        })\n                        .attr(\"opacity\", function () {\n                            if (j != 0) {\n                                return 0.3\n                            } else {\n                                return 0.5\n                            }\n                        })\n                        .attr(\"d\", lineGenerator)\n                        .attr(\"class\", \"stage\" + stage + \" \" + keys_c[i] + \" \" + cor_temp[j][0])\n                        .on('mouseenter', function () {\n                            $(this).attr('stroke', _this.stroke_color)\n                            let class_name = $(this).attr('class').split(' ')\n                            let class_name1 = class_name[1]\n                            let class_name2 = parseInt(class_name[2])\n                            let first_type = (parseInt(class_name2 / 10) + 1).toString()\n                            let second_type = ((class_name2 % 10) + 1).toString()\n                            _this.active_passive.push(class_name1[0] + first_type)\n                            _this.active_passive.push(class_name1[3] + second_type)\n                            $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                            $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        })\n                        .on('mouseleave', function () {\n                            $(this).attr('stroke', _this.line_color)\n                            let class_name = $(this).attr('class').split(' ')\n                            let class_name1 = class_name[1]\n                            let class_name2 = parseInt(class_name[2])\n                            let first_type = (parseInt(class_name2 / 10) + 1).toString()\n                            let second_type = ((class_name2 % 10) + 1).toString()\n                            _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type])\n                            //console.log(\".temporal.\" + stage + \".\" + class_name1[0]+first_type)\n                            $('.temporal.' + stage + '.' + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                                if (_this.highlight_class.includes('.temporal.' + stage + '.' + stage + \".\" + class_name1[0] + first_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                        })\n\n                }\n            }\n            //画三个一起出现的\n            const height_curve_scale2 = d3.scaleLinear()\n                .domain([80, 190])\n                .range([15, 30])\n            const border = 3\n            for (let i = 0; i < cor_temp_keys.length; i++) {\n                let cor_temp = parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[i]][0])\n                let temp0 = parseInt(cor_temp / 100).toString()\n                let temp1 = parseInt((cor_temp - parseInt(temp0) * 100) / 10).toString()\n                let temp2 = (cor_temp % 10).toString()\n                let y0 = position['0' + temp0]\n                let y1 = position['1' + temp1]\n                let y2 = position['2' + temp2]\n                let y_m = (y0 + y2) / 2\n                let x_left = x_start1 - height_curve_scale2(y2 - y0)\n                let x_right = x_start1 - 5\n                let data = [\n                    { x: x_right, y: y0 },\n                    { x: x_left + border, y: y0 },\n                    { x: x_left, y: y0 + border },\n                    { x: x_left, y: y2 - border },\n                    { x: x_left + border, y: y2 },\n                    { x: x_right, y: y2 },\n                ]\n                //开始计算co-occurence出现的情况\n                let corr_temporal = []\n                for (let p = 0; p < corr_statistics.length; p++) {\n                    let flag_temp = 0\n                    for (let q = 0; q < corr_statistics[p]['de_ac_pa'].length; q++) {\n                        if (corr_statistics[p]['de_ac_pa'][q][0] == cor_temp) {\n                            flag_temp = 1\n                            corr_temporal.push(corr_statistics[p][keys_c[i]][q][1])\n                            break\n                        }\n                    }\n                    if (flag_temp == 0) {\n                        corr_temporal.push(0)\n                    }\n                }\n\n                let yScale = d3.scaleLinear()\n                    .domain([0, 1])\n                    .range([height_scale, 0])\n\n                let area = d3.area()\n                    .x(function (d) { return d.x })\n                    .y0(height_scale)\n                    .y1(function (d) { return yScale(d.y) })\n\n                let temporal_temp = []\n                let temporal_horizon = []\n\n                for (let p = 0; p < corr_temporal.length; p++) {\n                    temporal_temp.push(\n                        { x: x_left + 5 + p * width_scale / data_statistics.length, y: corr_temporal[p] }\n                    )\n                    temporal_horizon.push(corr_temporal[p])\n                }\n\n                //开始画co-temporal\n                let svg_t = svg2.append('g').attr(\"class\", \"3_co_tem\" + stage + cor_temp).attr(\"visibility\", \"hidden\")\n                    .attr(\"transform\", \"translate(10, 0)\")\n\n                svg_t.append(\"rect\")\n                    .attr(\"x\", x_left + 5)\n                    .attr(\"y\", (y0 + y2) / 2 + 5)\n                    .attr(\"height\", height_scale)\n                    .attr(\"width\", width_scale - 5)\n                    .attr(\"fill\", 'white')\n                    .attr(\"class\", \"temporal\")\n                    .attr(\"stroke\", \"#5b5b5b\")\n\n                svg_t.append(\"rect\")\n                    .attr(\"x\", x_left + 5)\n                    .attr(\"y\", (y0 + y2) / 2 + 5)\n                    .attr(\"height\", height_scale)\n                    .attr(\"width\", width_scale - 5)\n                    .attr(\"fill\", '#5b5b5b')\n                    .attr(\"class\", \"temporal\")\n                    .attr(\"stroke\", \"black\")\n                    .attr(\"opacity\", 0.05)\n\n                let thresholds = [0.1, 0.2, 0.3, 0.4, 0.5]\n\n                let yScale2 = d3.scaleLinear()\n                    .domain([0, 0.1])\n                    .range([height_scale, 0]);\n\n                let areaGenerator = d3.area()\n                    .x(function (d, i) { return x_start1 + i * (width_scale + 10) / data_statistics.length; })\n                    .y0(height_scale)\n                    .y1(function (d) { return yScale2(d); })\n                    .curve(d3.curveBasis);\n\n                let layers = _this.splitDataByThresholds(temporal_horizon, thresholds, 0.1)\n                let svg_t_1 = svg_t.append('g')\n                    .attr(\"transform\", \"translate(\" + (x_left - 45) + \",\" + ((y0 + y2) / 2 + 5) + \")\")\n\n                svg_t_1.selectAll(\".layer_co\")\n                    .data(layers)\n                    .enter().append(\"path\")\n                    .attr(\"class\", \"layer\")\n                    .attr(\"d\", areaGenerator)\n                    .attr(\"opacity\", function (d, i) { return (i + 1) * 0.3 })\n                    .attr(\"fill\", _this.cor_temporal_color)\n                    .attr(\"class\", \"temporal\")\n                //.attr(\"visibility\", \"hidden\")\n\n                svg2.append(\"circle\")\n                    .attr(\"cx\", x_left)\n                    .attr(\"cy\", (y0 + y2) / 2)\n                    .attr(\"r\", 3)\n                    .attr(\"fill\", _this.circle_color)\n                    .attr(\"opacity\", 0.5)\n                    .attr(\"class\", \"temporal \" + \"stage\" + stage + ' de_ac_pa ' + cor_temp)\n                    .attr(\"visibility\", \"hidden\")\n                    .on('mouseenter', function () {\n                        $(\".3_co_tem\" + stage + cor_temp).attr(\"visibility\", \"visable\")\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[2]\n                        let class_name2 = parseInt(class_name[3])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.stroke_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive.push(class_name1[0] + first_type)\n                        _this.active_passive.push(class_name1[3] + second_type)\n                        _this.active_passive.push(class_name1[6] + third_type)\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', _this.stroke_color)\n                    })\n                    .on('mouseleave', function () {\n                        $(\".3_co_tem\" + stage + cor_temp).attr(\"visibility\", \"hidden\")\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[2]\n                        let class_name2 = parseInt(class_name[3])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.line_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type, class_name1[6] + third_type])\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                    })\n\n                svg2.append(\"line\")\n                    .attr(\"x1\", x_right)\n                    .attr(\"x2\", x_left)\n                    .attr(\"y1\", y1)\n                    .attr(\"y2\", (y0 + y2) / 2)\n                    .attr(\"fill\", \"none\")\n                    .attr(\"stroke\", _this.line_color)\n                    .attr(\"stroke-width\", function () {\n                        if (i > 0) {\n                            return 2\n                        } else {\n                            return 3\n                        }\n                    })\n                    .attr(\"opacity\", function () {\n                        if (i > 0) {\n                            return 0.3\n                        } else {\n                            return 0.5\n                        }\n                    })\n                    .attr(\"class\", \"stage\" + stage + ' de_ac_pa ' + cor_temp)\n                    .on('mouseenter', function () {\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[1]\n                        let class_name2 = parseInt(class_name[2])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.stroke_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive.push(class_name1[0] + first_type)\n                        _this.active_passive.push(class_name1[3] + second_type)\n                        _this.active_passive.push(class_name1[6] + third_type)\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', _this.stroke_color)\n                    })\n                    .on('mouseleave', function () {\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[1]\n                        let class_name2 = parseInt(class_name[2])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.line_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type, class_name1[6] + third_type])\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                    })\n                    .lower()\n\n                svg2.append(\"path\")\n                    .datum(data)\n                    .attr(\"fill\", \"none\")\n                    .attr(\"stroke\", _this.line_color)\n                    .attr(\"stroke-width\", function () {\n                        if (i > 0) {\n                            return 2\n                        } else {\n                            return 3\n                        }\n                    })\n                    .attr(\"opacity\", function () {\n                        if (i > 0) {\n                            return 0.3\n                        } else {\n                            return 0.5\n                        }\n                    })\n                    .attr(\"d\", lineGenerator)\n                    .attr(\"class\", \"stage\" + stage + ' de_ac_pa ' + cor_temp)\n                    .on('mouseenter', function () {\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[1]\n                        let class_name2 = parseInt(class_name[2])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.stroke_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive.push(class_name1[0] + first_type)\n                        _this.active_passive.push(class_name1[3] + second_type)\n                        _this.active_passive.push(class_name1[6] + third_type)\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', _this.stroke_color)\n                    })\n                    .on('mouseleave', function () {\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[1]\n                        let class_name2 = parseInt(class_name[2])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.line_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type, class_name1[6] + third_type])\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                    })\n                    .lower()\n            }\n        },\n        drawLegend2() {\n            const _this = this\n            const svg = d3.select(\".stageviewheader\")\n                .append(\"svg\")\n                .attr(\"width\", 200)\n                .attr(\"height\", 20)\n\n            let g_legend = svg.append('g')\n\n            g_legend.append(\"rect\")\n                .attr(\"x\", 13)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.depression_color)\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 25)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 10)\n                .text(\"depression\")\n\n            g_legend.append(\"rect\")\n                .attr(\"x\", 83)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.active_color)\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 95)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 10)\n                .text(\"active\")\n\n            g_legend.append(\"rect\")\n                .attr(\"x\", 130)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.passive_color)\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 142)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 10)\n                .text(\"passive\")\n            \n        },\n        drawStage2(stage, data, x_start, y_start, width, height, svg, active_number, passive_number, maxcor) {\n            const _this = this\n            var data_summary = new Array()\n            var data_summary_all = { \"depression\": new Array(), \"active behavior\": new Array(), \"passive behavior\": new Array() } //用来包含所有的点\n            var data_statistics = new Array()\n            var data_statistics_all = new Array() //用来包含所有的点\n            var segment_length = data.length\n            var corr_statistics = new Array()\n            var data_concat = new Array()\n            var corr_statistics_all = new Array()\n            for (let i = 0; i < segment_length; i++) {\n                data_summary[i] = { \"depression\": new Array(), \"active behavior\": new Array(), \"passive behavior\": new Array() } //存储每一个时间点关于三个的统计\n                data_statistics[i] = new Array()\n                data_concat = data_concat.concat(data[i])\n                for (let j = 0; j < data[i].length; j++) {\n                    data_summary[i][\"depression\"].push(_this.depressionThreshold(data[i][j][0]))\n                    data_summary[i][\"active behavior\"].push(data[i][j][1])\n                    data_summary[i][\"passive behavior\"].push(data[i][j][2])\n                    data_summary_all[\"depression\"].push(_this.depressionThreshold(data[i][j][0]))\n                    data_summary_all[\"active behavior\"].push(data[i][j][1])\n                    data_summary_all[\"passive behavior\"].push(data[i][j][2])\n                }\n                corr_statistics.push(_this.correlationSummarize(data[i], maxcor))\n                data_statistics[i].push(\n                    _this.getFrequency(data_summary[i][\"depression\"]),\n                    _this.getFrequency(data_summary[i][\"active behavior\"]),\n                    _this.getFrequency(data_summary[i][\"passive behavior\"])\n                )\n            }\n            corr_statistics_all = _this.correlationSummarize(data_concat, maxcor)\n            data_statistics_all.push(\n                _this.getFrequency(data_summary_all[\"depression\"]),\n                _this.getFrequency(data_summary_all[\"active behavior\"]),\n                _this.getFrequency(data_summary_all[\"passive behavior\"])\n            )\n\n            var svg_new = svg.append('g')\n                .attr('width', 100)\n                .attr('height', 100)\n                .attr('class', 'stage ' + stage)\n\n            //画seperate frequency\n            var x_start_temp = x_start + 54\n            var y_start_temp = y_start + height / 4\n            var height_temp = 50\n            var width_temp = 50\n\n            const scale_height = 25\n\n            //画correlation\n            var line = d3.line()\n                .x(function (d) { return d.x; })\n                .y(function (d) { return d.y; })\n                .curve(d3.curveBasis)\n\n            const fre_scale = d3.scaleLog()\n                .domain([0.1, 1])\n                .range([1, 4])\n\n            for (let i = 0; i < 1; i++) {\n                //加入depression-active的数据\n                for (let j = 0; j < corr_statistics_all['de_ac'].length; j++) {\n                    let data_vis = []\n                    let active_label = corr_statistics_all['de_ac'][j][0] % 10\n                    let depression_label = Math.floor(corr_statistics_all['de_ac'][j][0] / 10)\n                    let frequency = corr_statistics_all['de_ac'][j][1]\n                    data_vis.push({\n                        'x': x_start_temp + depression_label * (width_temp / 4) + 7,\n                        'y': y_start_temp,\n                        'value': frequency,\n                    })\n                    data_vis.push({\n                        'x': x_start_temp,\n                        'y': y_start + height / 4 + active_label * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2,\n                        'value': frequency\n                    })\n                    svg_new.append(\"path\")\n                        .datum(data_vis)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", _this.cor_color)\n                        .attr(\"stroke-width\", fre_scale(frequency))\n                        .attr(\"d\", line)\n                        .attr(\"opacity\", 0.6)\n                }\n                //加入depression-passive的数据\n                for (let j = 0; j < corr_statistics_all['de_pa'].length; j++) {\n                    let data_vis = []\n                    let passive_label = corr_statistics_all['de_pa'][j][0] % 10\n                    let depression_label = Math.floor(corr_statistics_all['de_pa'][j][0] / 10)\n                    let frequency = corr_statistics_all['de_pa'][j][1]\n                    data_vis.push({\n                        'x': x_start_temp + depression_label * (width_temp / 4) + 7,\n                        'y': y_start_temp,\n                        'value': frequency,\n                    })\n                    data_vis.push({\n                        'x': x_start_temp + width_temp,\n                        'y': y_start + height / 4 + passive_label * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2,\n                        'value': frequency\n                    })\n                    svg_new.append(\"path\")\n                        .datum(data_vis)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", _this.cor_color)\n                        .attr(\"stroke-width\", fre_scale(frequency))\n                        .attr(\"d\", line)\n                        .attr(\"opacity\", 0.6)\n                }\n                //加入active-passive的数据\n                for (let j = 0; j < corr_statistics_all['ac_pa'].length; j++) {\n                    let data_vis = []\n                    let passive_label = corr_statistics_all['ac_pa'][j][0] % 10\n                    //console.log(passive_label)\n                    let active_label = Math.floor(corr_statistics_all['ac_pa'][j][0] / 10)\n                    let frequency = corr_statistics_all['ac_pa'][j][1]\n                    data_vis.push({\n                        'x': x_start_temp,\n                        'y': y_start + height / 4 + active_label * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2,\n                        'value': frequency,\n                    })\n                    data_vis.push({\n                        'x': x_start_temp + width_temp,\n                        'y': y_start + height / 4 + passive_label * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2,\n                        'value': frequency\n                    })\n                    svg_new.append(\"path\")\n                        .datum(data_vis)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", _this.cor_color)\n                        .attr(\"stroke-width\", fre_scale(frequency))\n                        .attr(\"d\", line)\n                        .attr(\"opacity\", 0.6)\n                }\n                //console.log(data_vis)\n                //加入depression-active-passive的数据\n                for (let j = 0; j < corr_statistics_all['de_ac_pa'].length; j++) {\n                    let data_vis = []\n                    let passive_label = corr_statistics_all['de_ac_pa'][j][0] % 10\n                    let left = (corr_statistics_all['de_ac_pa'][j][0] - passive_label) / 10\n                    let active_label = left % 10\n                    let depression_label = Math.floor(left / 10)\n                    let frequency = corr_statistics_all['de_ac_pa'][j][1]\n                    //加入depression\n                    data_vis.push({\n                        'x': x_start_temp + depression_label * (width_temp / 4) + 7,\n                        'y': y_start_temp,\n                        'value': frequency,\n                    })\n                    //加入active\n                    data_vis.push({\n                        'x': x_start_temp,\n                        'y': y_start + height / 4 + active_label * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2,\n                        'value': frequency\n                    })\n                    //加入passive\n                    data_vis.push({\n                        'x': x_start_temp + width_temp,\n                        'y': y_start + height / 4 + passive_label * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2,\n                        'value': frequency\n                    })\n                    //加入depression\n                    data_vis.push({\n                        'x': x_start_temp + depression_label * (width_temp / 4) + 7,\n                        'y': y_start_temp,\n                        'value': frequency,\n                    })\n                    svg_new.append(\"path\")\n                        .datum(data_vis)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", \"black\")\n                        .attr(\"stroke-width\", fre_scale(frequency))\n                        .attr(\"d\", line)\n                        .attr(\"opacity\", 0.2)\n                }\n            }\n\n            for (let i = 0; i < 1; i++) {\n                //画depression的注释\n                svg_new.append(\"line\")\n                    .attr(\"x1\", x_start_temp - 10)\n                    .attr(\"x2\", x_start_temp + width_temp + 10)\n                    .attr(\"y1\", y_start)\n                    .attr(\"y2\", y_start)\n                    .attr(\"stroke\", _this.normal_color)\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"opacity\", 0.2)\n\n                svg_new.append(\"text\")\n                    .attr(\"x\", x_start_temp - 28)\n                    .attr(\"y\", y_start + 2)\n                    .attr(\"font-size\", 10)\n                    .text(\"low\")\n\n                svg_new.append(\"text\")\n                    .attr(\"x\", x_start_temp + width_temp + 13)\n                    .attr(\"y\", y_start + 2)\n                    .attr(\"font-size\", 10)\n                    .text(\"high\")\n\n                //画depression的分布\n                for (let j = 0; j < 4; j++) {\n                    //查看是否存在这个key,如果不存在则这个长度为0\n                    let key_temp = Object.keys(data_statistics_all[0])\n                    let value_temp = Object.values(data_statistics_all[0])\n                    let height_depression = 0\n                    if (key_temp.includes(j.toString())) {\n                        height_depression = scale_height * data_statistics_all[0][j] / _this.sum(value_temp)\n                    }\n                    if (data_statistics_all[0][j] / _this.sum(value_temp) > 0.1) {\n                        svg_new.append(\"line\")\n                            .attr(\"x1\", x_start_temp + j * (width_temp / 4) + 7)\n                            .attr(\"x2\", x_start_temp + j * (width_temp / 4) + 7)\n                            .attr(\"y1\", y_start + height / 4 - height_depression)\n                            .attr(\"y2\", y_start)\n                            .attr(\"stroke\", _this.normal_color)\n                            .attr(\"stroke-width\", 1)\n                            .attr(\"stroke-dasharray\", \"3, 2\")\n                    }\n                    svg_new.append(\"rect\")\n                        .attr(\"x\", x_start_temp + j * (width_temp / 4) + 2)\n                        .attr(\"y\", y_start + height / 4 - height_depression)\n                        .attr(\"fill\", _this.depression_color)\n                        .attr(\"width\", 10)\n                        .attr(\"height\", height_depression)\n                }\n\n                //画active的注释\n                svg_new.append(\"line\")\n                    .attr(\"x1\", x_start_temp - scale_height)\n                    .attr(\"x2\", x_start_temp - scale_height)\n                    .attr(\"y1\", y_start + height / 4 - 5)\n                    .attr(\"y2\", y_start + height / 4 + height_temp + 5)\n                    .attr(\"stroke\", _this.normal_color)\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"opacity\", 0.2)\n\n                //画active behavior\n                for (let j = 0; j < active_number; j++) {\n                    //查看是否存在这个key,如果不存在则这个长度为0\n                    let key_temp = Object.keys(data_statistics_all[1])\n                    let value_temp = Object.values(data_statistics_all[1])\n                    let height_active = 0\n                    if (key_temp.includes(j.toString())) {\n                        height_active = scale_height * data_statistics_all[1][j] / _this.sum(value_temp)\n                    }\n                    if (data_statistics_all[1][j] / _this.sum(value_temp) > 0.1) {\n                        svg_new.append(\"line\")\n                            .attr(\"x1\", x_start_temp - scale_height)\n                            .attr(\"x2\", x_start_temp - height_active)\n                            .attr(\"y1\", y_start + height / 4 + j * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2)\n                            .attr(\"y2\", y_start + height / 4 + j * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2)\n                            .attr(\"stroke\", _this.normal_color)\n                            .attr(\"stroke-width\", 1)\n                            .attr(\"stroke-dasharray\", \"3, 2\")\n\n                        svg_new.append(\"text\")\n                            .attr(\"x\", x_start_temp - scale_height - 13)\n                            .attr(\"y\", y_start + height / 4 + j * height_temp / active_number + 5 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2)\n                            .attr(\"font-size\", 10)\n                            .text(\"p\" + (j + 1))\n                    }\n                    svg_new.append(\"rect\")\n                        .attr(\"x\", x_start_temp - height_active)\n                        .attr(\"y\", y_start + height / 4 + j * height_temp / active_number + 2)\n                        .attr(\"fill\", _this.active_color)\n                        .attr(\"width\", height_active)\n                        .attr(\"height\", Math.floor((height_temp - 2 * active_number + 2) / active_number))\n                }\n                //画passive的注释\n                svg_new.append(\"line\")\n                    .attr(\"x1\", x_start_temp + width_temp + scale_height)\n                    .attr(\"x2\", x_start_temp + width_temp + scale_height)\n                    .attr(\"y1\", y_start + height / 4 - 5)\n                    .attr(\"y2\", y_start + height / 4 + height_temp + 5)\n                    .attr(\"stroke\", _this.normal_color)\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"opacity\", 0.2)\n\n                //画passive behavior\n                for (let j = 0; j < passive_number; j++) {\n                    //查看是否存在这个key,如果不存在则这个长度为0\n                    let key_temp = Object.keys(data_statistics_all[2])\n                    let value_temp = Object.values(data_statistics_all[2])\n                    let height_passive = 0\n                    if (key_temp.includes(j.toString())) {\n                        height_passive = scale_height * data_statistics_all[2][j] / _this.sum(value_temp)\n                    }\n                    if (data_statistics_all[2][j] / _this.sum(value_temp) > 0.1) {\n                        svg_new.append(\"line\")\n                            .attr(\"x1\", x_start_temp + width_temp)\n                            .attr(\"x2\", x_start_temp + width_temp + scale_height)\n                            .attr(\"y1\", y_start + height / 4 + j * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2)\n                            .attr(\"y2\", y_start + height / 4 + j * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2)\n                            .attr(\"stroke\", _this.normal_color)\n                            .attr(\"stroke-width\", 1)\n                            .attr(\"stroke-dasharray\", \"3, 2\")\n\n                        svg_new.append(\"text\")\n                            .attr(\"x\", x_start_temp + width_temp + scale_height + 2)\n                            .attr(\"y\", y_start + height / 4 + j * height_temp / passive_number + 5 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2)\n                            .attr(\"font-size\", 10)\n                            .text(\"p\" + (j + 1))\n                    }\n                    svg_new.append(\"rect\")\n                        .attr(\"x\", x_start_temp + width_temp)\n                        .attr(\"y\", y_start + height / 4 + j * height_temp / passive_number + 2)\n                        .attr(\"fill\", _this.passive_color)\n                        .attr(\"width\", height_passive)\n                        .attr(\"height\", Math.floor((height_temp - 2 * passive_number + 2) / passive_number))\n                }\n\n                // 画中间的连接方块区域\n                svg_new.append(\"rect\")\n                    .attr(\"x\", x_start_temp)\n                    .attr(\"y\", y_start_temp)\n                    .attr(\"fill\", \"none\")\n                    .attr(\"width\", height_temp)\n                    .attr(\"height\", width_temp)\n                    .attr(\"stroke\", _this.normal_color)\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"opacity\", 0.3)\n            }\n        },\n        depressionThreshold(depression) {\n            if (depression <= 1) {\n                return 0\n            } else if (depression <= 2) {\n                return 1\n            } else {\n                return 2\n            }\n        },\n        getFrequency(arr) {\n            var obj = {};\n            for (var i = 0, l = arr.length; i < l; i++) {\n                var item = arr[i];\n                obj[item] = (obj[item] + 1) || 1;\n            }\n            return obj\n        },\n        sum(arr) {\n            var len = arr.length;\n            if (len == 0) {\n                return 0;\n            } else if (len == 1) {\n                return arr[0];\n            } else {\n                return arr[0] + this.sum(arr.slice(1));\n            }\n        },\n        dictSum(dict) {\n            let temp = Object.keys(dict)\n            let sum = 0\n            for (let t of temp) {\n                sum += dict[t]\n            }\n            return sum\n        },\n        removeElement(list, r_list) {\n            const arr1 = list\n            const arr2 = r_list\n            const count = new Map()\n            for (const n of arr1) {\n                count.set(n, (count.get(n) || 0) + 1);\n            }\n            for (const n of arr2) {\n                count.set(n, (count.get(n) || 0) - 1);\n            }\n            const result = [];\n            for (const [n, c] of count.entries()) {\n                for (let i = 0; i < c; i++) {\n                    result.push(n);\n                }\n            }\n            return result\n        },\n        correlationSummarize(data, n) {\n            const _this = this\n            var de_ac = new Array()\n            var de_pa = new Array()\n            var ac_pa = new Array()\n            var de_ac_pa = new Array()\n            for (let i = 0; i < data.length; i++) {\n                let depression = _this.depressionThreshold(data[i][0])\n                let activeb = data[i][1]\n                let passiveb = data[i][2]\n                de_ac.push(depression * 10 + activeb)\n                de_pa.push(depression * 10 + passiveb)\n                ac_pa.push(activeb * 10 + passiveb)\n                de_ac_pa.push(depression * 100 + 10 * activeb + passiveb)\n            }\n            de_ac = _this.getFrequency(de_ac)\n            de_pa = _this.getFrequency(de_pa)\n            ac_pa = _this.getFrequency(ac_pa)\n            de_ac_pa = _this.getFrequency(de_ac_pa)\n            var result = { \"de_ac\": _this.maxnObtain(de_ac, n), \"de_pa\": _this.maxnObtain(de_pa, n), \"ac_pa\": _this.maxnObtain(ac_pa, n), \"de_ac_pa\": _this.maxnObtain(de_ac_pa, n) }\n            return result\n        },\n        maxnObtain(dict, n) {\n            const _this = this\n            const items = Object.keys(dict).map(function (key) {\n                return [key, dict[key]];\n            });\n\n            // 按照 value 的大小进行排序\n            items.sort(function (first, second) {\n                return second[1] - first[1];\n            });\n\n            const sum_values = _this.sum(Object.values(dict))\n\n            // 获取排序后的前 n 个 key 值\n            const result = [];\n            for (let i = 0; i < n; i++) {\n                result.push([items[i][0], items[i][1] / sum_values]);\n            }\n            return result\n        }\n    }\n}"]}]}