{"remainingRequest":"/Users/shengrui/Desktop/vis2023/system/EMINDS/frontend/node_modules/babel-loader/lib/index.js!/Users/shengrui/Desktop/vis2023/system/EMINDS/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/shengrui/Desktop/vis2023/system/EMINDS/frontend/src/components/StageView/StageView.js?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shengrui/Desktop/vis2023/system/EMINDS/frontend/src/components/StageView/StageView.js","mtime":1729746295529},{"path":"/Users/shengrui/Desktop/vis2023/system/EMINDS/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1729690872023},{"path":"/Users/shengrui/Desktop/vis2023/system/EMINDS/frontend/node_modules/babel-loader/lib/index.js","mtime":1729690872396},{"path":"/Users/shengrui/Desktop/vis2023/system/EMINDS/frontend/node_modules/eslint-loader/index.js","mtime":1729690872072}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9zaGVuZ3J1aS9EZXNrdG9wL3ZpczIwMjMvc3lzdGVtL0VNSU5EUy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0LnZhbHVlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5tYXRjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc2V0IjsKaW1wb3J0IHsgbGlua0hvcml6b250YWwsIHN2ZyB9IGZyb20gJ2QzJzsKaW1wb3J0IGRhdGFTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZGF0YVNlcnZpY2UuanMiOwppbXBvcnQgcGlwZVNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9waXBlU2VydmljZS5qcyI7CmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTdGFnZVZpZXcnLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7fSwKICBjb21wdXRlZDoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRleHRfY29sb3I6ICJibGFjayIsCiAgICAgIGNvbXBhcmlzb25fY29sb3I6ICcjODY4Qjk4JywKICAgICAgLy/mr5TovoPnmoTml7blgJnlvojkuI3lkIznmoTlhYPntKDkvJrooqvpq5jkuq7lh7rmnaUKICAgICAgY2lyY2xlX2NvbG9yOiAnIzlhOGM5OCcsCiAgICAgIC8v5ZyG5ZyI55qE6aKc6ImyCiAgICAgIGxpbmVfY29sb3I6ICcjZDhkYmUyJywKICAgICAgLy/mnIDlt6bovrnnur/nmoTpopzoibIKICAgICAgc3Ryb2tlX2NvbG9yOiAiI0NFQkI3RCIsCiAgICAgIC8v5p2h54q25Zu+54K55Ye75LmL5ZCOYmVoYXZpb3Igdmlld+S8muebuOW6lOWKoOa3se+8jOi/meaYr+eCueWHu+S5i+WQjueahOminOiJsgogICAgICBjb3JfdGVtcG9yYWxfY29sb3I6ICcjQ0VCQjdEJywKICAgICAgLy/lsZXnjrDlpJrnu7TluqbmlbDmja50ZW1wb3JhbOS/oeaBr+eahOiDjOaZrwogICAgICBub3RoaWdobGlnaHRfY29sb3I6ICJibGFjayIsCiAgICAgIC8v5q+P5Liqc3RhZ2XmnIDlpKfnmoTlpJbmoYYKICAgICAgaGlnaGxpZ2h0X2NvbG9yOiAnI0NFQkI3RCcsCiAgICAgIC8vcGF0dGVybiB2aWV354K55Ye75LmL5ZCO54K55Ye755qE5YWD57Sg5Lya6KKraGlnaGxpZ2h0LOS5n+WwseaYr+avj+S4qnN0YWdl6IOM5pmv6Imy5Lya6KKr5pS55Y+YCiAgICAgIGRpc3RyaWJ1dGlvbl9jb2xvcjogJyNDOUNCRDEnLAogICAgICBub3JtYWxfY29sb3I6ICcjMmYzZTQ2JywKICAgICAgc3RhZ2VfbmFtZTogJyNkNmNjYzInLAogICAgICBjb3JfY29sb3I6ICcjQzlDQkQxJywKICAgICAgYmFja2dyb3VuZF9jb2xvcjogJ3doaXRlJywKICAgICAgY291bnQ6IDAsCiAgICAgIC8vY29sb3JfbGlzdDogWyIjQjZCNkM2IiwgIiNBREI5QzEiLCAiI0FGQjVBNCIsICIjRUZFOEJEIiwgIiNlOWQxYjQiLCAiI2QyYWFhMyJdLAogICAgICBjb2xvcl9saXN0OiBbIiM3NjhmODkiLCAiI2FkYjQ5ZiIsICIjRUZFOEJEIiwgIiNlOWQxYjQiLCAiI2RkYmNhYiIsICIjZDJhYWEzIl0sCiAgICAgIC8vIGNvbG9yX2xpc3Q6IFsiI0I1QjVDNSIsICIjRTJDOUIzIiwgIiNFQ0MwQzAiLCAiI0NBRDVDMyIsICIjOUNCOENEIiwgIiNFM0M2QTkiXSwKICAgICAgc3RhZ2Vfc3RhcnQ6IDAsCiAgICAgIHN0YWdlX2ludGVydmFsOiAwLAogICAgICBzdGFnZV95X3N0YXJ0OiAwLAogICAgICBzdGFnZV9udW1iZXI6IDYsCiAgICAgIHRlbXBvcmFsOiAwLAogICAgICBoaWdobGlnaHRfbGlzdDogW10sCiAgICAgIGFjdGl2ZV9wYXNzaXZlOiBbXSwKICAgICAgc3RhZ2VzdGF0aXN0aWNzOiB7fSwKICAgICAgaGlnaGxpZ2h0X2NsYXNzOiBbXSwKICAgICAgbGFzdF9oaWdobGlnaHRfY2xhc3M6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGFjdGl2ZV9wYXNzaXZlOiBmdW5jdGlvbiBhY3RpdmVfcGFzc2l2ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHBpcGVTZXJ2aWNlLmVtaXRBUChfdGhpcy5hY3RpdmVfcGFzc2l2ZSk7CiAgICB9LAogICAgdGVtcG9yYWw6IGZ1bmN0aW9uIHRlbXBvcmFsKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLnRlbXBvcmFsID09IDEpIHsKICAgICAgICAkKCcudGVtcG9yYWwnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ3Zpc2FibGUnKTsKICAgICAgICAkKCcubm9uLXRlbXBvcmFsJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTsKICAgICAgICAkKCcudGVtcG9yYWwtY2xpY2snKS5hdHRyKCdmaWxsJywgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkKCcubm9uLXRlbXBvcmFsJykuYXR0cigndmlzaWJpbGl0eScsICd2aXNhYmxlJyk7CiAgICAgICAgJCgnLnRlbXBvcmFsJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTsKICAgICAgICAkKCcudGVtcG9yYWwtY2xpY2snKS5hdHRyKCdmaWxsJywgX3RoaXMuYmFja2dyb3VuZF9jb2xvcik7CiAgICAgIH0KICAgIH0sCiAgICBoaWdobGlnaHRfbGlzdDogZnVuY3Rpb24gaGlnaGxpZ2h0X2xpc3QoKSB7CiAgICAgIC8vY29uc29sZS5sb2codGhpcy5oaWdobGlnaHRfbGlzdCkKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMubGFzdF9oaWdobGlnaHRfY2xhc3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAkKF90aGlzLmxhc3RfaGlnaGxpZ2h0X2NsYXNzW2ldKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgfQoKICAgICAgdmFyIGRldmlhdGlvbl90aHJlc2hvbGQgPSAwLjAxOwogICAgICBfdGhpcy5oaWdobGlnaHRfY2xhc3MgPSBbXTsKICAgICAgdmFyIHN0YWdlX2hpZ2hsaWdodCA9IG5ldyBTZXQoKTsKCiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBfdGhpcy5zdGFnZV9udW1iZXI7IF9pKyspIHsKICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2xpc3QuaW5jbHVkZXMoX2kudG9TdHJpbmcoKSkpIHsKICAgICAgICAgICQoJy5zdGFnZV9iYWNrZ3JvdW5kMScgKyBfaS50b1N0cmluZygpKS5hdHRyKCJmaWxsIiwgX3RoaXMuaGlnaGxpZ2h0X2NvbG9yKS5hdHRyKCJvcGFjaXR5IiwgMC4xKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCgnLnN0YWdlX2JhY2tncm91bmQxJyArIF9pLnRvU3RyaW5nKCkpLmF0dHIoImZpbGwiLCAid2hpdGUiKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIF90aGlzLmxhc3RfaGlnaGxpZ2h0X2NsYXNzID0gX3RoaXMuaGlnaGxpZ2h0X2NsYXNzOwoKICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgX3RoaXMuaGlnaGxpZ2h0X2xpc3QubGVuZ3RoOyBfaTIrKykgewogICAgICAgIHN0YWdlX2hpZ2hsaWdodC5hZGQoX3RoaXMuaGlnaGxpZ2h0X2xpc3RbX2kyXSk7CiAgICAgIH0KCiAgICAgIHZhciB0eXBlcyA9IE9iamVjdC5rZXlzKF90aGlzLnN0YWdlc3RhdGlzdGljc1swXSk7CgogICAgICBpZiAoc3RhZ2VfaGlnaGxpZ2h0LnNpemUgPj0gMikgewogICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0eXBlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgICAgdmFyIHQgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgdmFyIHR5cGVzMiA9IE9iamVjdC5rZXlzKF90aGlzLnN0YWdlc3RhdGlzdGljc1swXVt0XSk7CgogICAgICAgICAgICBmb3IgKHZhciBfaTMgPSAwLCBfdHlwZXMgPSB0eXBlczI7IF9pMyA8IF90eXBlcy5sZW5ndGg7IF9pMysrKSB7CiAgICAgICAgICAgICAgdmFyIHQyID0gX3R5cGVzW19pM107CiAgICAgICAgICAgICAgdmFyIHRlbXBfYXJyID0gW107CiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTsKICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7CiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBzdGFnZV9oaWdobGlnaHRbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9zdGFnZSA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICAgICAgdGVtcF9hcnIucHVzaChfdGhpcy5zdGFnZXN0YXRpc3RpY3NbX3N0YWdlXVt0XVt0Ml0gLyBfdGhpcy5kaWN0U3VtKF90aGlzLnN0YWdlc3RhdGlzdGljc1tfc3RhZ2VdW3RdKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoX3RoaXMuY2FsY3VsYXRlVmFyaWFuY2UodGVtcF9hcnIpID49IGRldmlhdGlvbl90aHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgIC8v6LaF6L+H6ZiI5YC85bCx6auY5LquCiAgICAgICAgICAgICAgICB2YXIgayA9ICdkJzsKCiAgICAgICAgICAgICAgICBpZiAodCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgIGsgPSAnYSc7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHQgPT0gMikgewogICAgICAgICAgICAgICAgICBrID0gJ3AnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7CiAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBzdGFnZV9oaWdobGlnaHRbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RhZ2UgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrICsgKHBhcnNlSW50KHQyKSArIDEpKQogICAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgayArIChwYXJzZUludCh0MikgKyAxKSkuYXR0cignZmlsbCcsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrICsgJzInICsgKHBhcnNlSW50KHQyKSArIDEpKS5hdHRyKCdmaWxsJywgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZ2hsaWdodF9jbGFzcy5wdXNoKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsgKyAocGFyc2VJbnQodDIpICsgMSkpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5oaWdobGlnaHRfY2xhc3MucHVzaCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsgKyAnMicgKyAocGFyc2VJbnQodDIpICsgMSkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHsKICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgiLnN0YWdldmlld2JvZHkiKS5hcHBlbmQoInN2ZyIpLmF0dHIoIndpZHRoIiwgOTAwKS5hdHRyKCJoZWlnaHQiLCAyODApLmF0dHIoImNsYXNzIiwgInByb2dyZXNzaW9uc3RhZ2UiKTsKCiAgICBfdGhpcy5kcmF3TGVnZW5kKF90aGlzLnN0YWdlX251bWJlcik7IC8v6ZyA6KaB5Lyg6YCSc3RhZ2UgbnVtYmVy55qE5YC8CiAgICAvL+aYvuekuuS4gOS6m+aPkOekugoKCiAgICB2YXIgZ19wcm9tcHQgPSBzdmcuYXBwZW5kKCdnJykuYXR0cigid2lkdGgiLCAyNTApLmF0dHIoImhlaWdodCIsIDgwKS5hdHRyKCJjbGFzcyIsICJwcm9tcHRfMiIpLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgyMDAsIDQwKSIpOwogICAgdmFyIHJlY3QgPSBnX3Byb21wdC5hcHBlbmQoJ3JlY3QnKS5hdHRyKCd3aWR0aCcsIDYwMCkuYXR0cignaGVpZ2h0JywgMTMwKS5hdHRyKCdmaWxsJywgJ3doaXRlJykuYXR0cignc3Ryb2tlJywgJ2JsYWNrJykuYXR0cigneCcsIDApLmF0dHIoJ3knLCAwKTsKICAgIHZhciB0ZXh0ID0gZ19wcm9tcHQuYXBwZW5kKCd0ZXh0JykuYXR0cigneCcsIDEwKS5hdHRyKCd5JywgMTUpLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKS5hdHRyKCdmb250LXNpemUnLCAnMTJweCcpOwogICAgdGV4dC5hcHBlbmQoJ3RzcGFuJykudGV4dCgnRWFjaCBiZWhhdmlvciBzdGFnZSBjYXB0dXJlcyB0aGUgZHluYW1pYyBjaGFuZ2VzIGFuZCBpbnRlcmFjdGlvbnMgYW1vbmcgZGlmZmVyZW50IGJlaGF2aW9yIHR5cGVzIG92ZXIgdGltZS4nKS5hdHRyKCd4JywgMTApLmF0dHIoJ3knLCAyMCk7CiAgICB0ZXh0LmFwcGVuZCgndHNwYW4nKS50ZXh0KCdXZSBkZXNpZ25lZCB0d28gZ2x5cGggbW9kZXM6IHN0YXRpc3RpY2FsIGFuZCB0ZW1wb3JhbC4nKS5hdHRyKCd4JywgMTApLmF0dHIoJ3knLCA0NSk7CiAgICB0ZXh0LmFwcGVuZCgndHNwYW4nKS50ZXh0KCcgLSBJbiB0aGUgc3RhdGlzdGljYWwgbW9kZSwgdGhlIGxlbmd0aCBvZiB0aGUgYmFyIHJlcHJlc2VudHMgdGhlIGZyZXF1ZW5jeSBvZiB0aGUgdmFyaWFibGUgb2NjdXJyaW5nIGF0IHRoaXMgc3RhZ2UuJykuYXR0cigneCcsIDEwKS5hdHRyKCd5JywgNjApOwogICAgdGV4dC5hcHBlbmQoJ3RzcGFuJykudGV4dCgnIC0gSW4gdGhlIHRlbXBvcmFsIG1vZGUsIHRoZSBvdmVyYWxsIGZyZXF1ZW5jeSB3aWxsIGJlIHRyYW5zZm9ybWVkIGludG8gYSB0ZW1wb3JhbCBmcmVxdWVuY3kgb3ZlciB0aW1lLicpLmF0dHIoJ3gnLCAxMCkuYXR0cigneScsIDc1KTsKICAgIHRleHQuYXBwZW5kKCd0c3BhbicpLnRleHQoJ1RoZSBsaW5lcyBhcmUgdXNlZCB0byBkaXNwbGF5IHRoZSBjby1vY2N1cnJlbmNlIGZyZXF1ZW5jeSBiZXR3ZWVuIGNvcnJlc3BvbmRpbmcgYmVoYXZpb3IgdHlwZXMuJykuYXR0cigneCcsIDEwKS5hdHRyKCd5JywgMTAwKTsKICAgIHRleHQuYXBwZW5kKCd0c3BhbicpLnRleHQoJ1RoZSB0aGlja2VyIHRoZSBsaW5lLCB0aGUgaGlnaGVyIHRoZSBkZWdyZWUgb2YgY28tb2NjdXJyZW5jZS4nKS5hdHRyKCd4JywgMTApLmF0dHIoJ3knLCAxMTUpOwogICAgdmFyIGRyYWcgPSBkMy5kcmFnKCkub24oJ3N0YXJ0JywgZnVuY3Rpb24gKCkgewogICAgICBkMy5zZWxlY3QodGhpcykucmFpc2UoKS5jbGFzc2VkKCJhY3RpdmUiLCB0cnVlKTsKICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGdfcHJvbXB0LnJhaXNlKCk7CiAgICB9KS5vbignZHJhZycsIGZ1bmN0aW9uIChldmVudCwgZCkgewogICAgICBkMy5zZWxlY3QodGhpcykuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgZDMuZXZlbnQueCArICIsIiArIGQzLmV2ZW50LnkgKyAiKSIpOwogICAgICBnX3Byb21wdC5yYWlzZSgpOwogICAgfSkub24oJ2VuZCcsIGZ1bmN0aW9uIChldmVudCwgZCkgewogICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgiYWN0aXZlIiwgZmFsc2UpOwogICAgICB2YXIgYWxsR0VsZW1lbnRzID0gZDMuc2VsZWN0QWxsKCIuc3RhZ2VfZHJhZyIpOwogICAgICB2YXIgYWxsR0Nvb3JkcyA9IGFsbEdFbGVtZW50cy5ub2RlcygpLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB4OiBwYXJzZUludChkLmdldEF0dHJpYnV0ZSgidHJhbnNmb3JtIikubWF0Y2goLyhcZCspL2cpWzBdKSwKICAgICAgICAgIHk6IHBhcnNlSW50KGQuZ2V0QXR0cmlidXRlKCJ0cmFuc2Zvcm0iKS5tYXRjaCgvKFxkKykvZylbMV0pCiAgICAgICAgfTsKICAgICAgfSk7IC8vIOWwhnN0YWdl5YWD57Sg5qC55o2ueOWdkOagh+i/m+ihjOaOkuW6jwoKICAgICAgdmFyIHNvcnRlZEdFbGVtZW50cyA9IGFsbEdFbGVtZW50cy5ub2RlcygpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQoYS5nZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIpLm1hdGNoKC8oXGQrKS9nKVswXSkgLSBwYXJzZUludChiLmdldEF0dHJpYnV0ZSgidHJhbnNmb3JtIikubWF0Y2goLyhcZCspL2cpWzBdKTsKICAgICAgfSk7IC8vIOabtOaWsOavj+S4qnN0YWdl5YWD57Sg55qE5L2N572u5Lul5Y+N5pig5YW26aG65bqPCgogICAgICBzb3J0ZWRHRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZ0VsZW1lbnQsIGkpIHsKICAgICAgICB2YXIgeCA9IGkgKiBfdGhpcy5zdGFnZV9pbnRlcnZhbCArIF90aGlzLnN0YWdlX3N0YXJ0OyAvLyDorr7nva7mr4/kuKpzdGFnZeWFg+e0oOeahHjlnZDmoIcKCiAgICAgICAgdmFyIHkgPSBfdGhpcy5zdGFnZV95X3N0YXJ0OyAvLyDkv53nlZl55Z2Q5qCHCgogICAgICAgIGQzLnNlbGVjdChnRWxlbWVudCkuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgeCArICIsIiArIHkgKyAiKSIpOwogICAgICB9KTsKICAgICAgZ19wcm9tcHQucmFpc2UoKTsKICAgIH0pOwogICAgcGlwZVNlcnZpY2Uub25TdGFnZShmdW5jdGlvbiAobXNnKSB7CiAgICAgIHZhciBkYXRhID0gbXNnWzJdOwogICAgICB2YXIgYWN0aXZlX2tfbXNnID0gbXNnWzBdOwogICAgICB2YXIgcGFzc2l2ZV9rX21zZyA9IG1zZ1sxXTsKICAgICAgZGF0YSA9IGV2YWwoIigiICsgZGF0YSArICIpIik7IC8vY29uc29sZS5sb2coJyoqKioqKm9uU3RhZ2UqKioqKionLCBkYXRhKQogICAgICAvLyAqKioqKumHjeaWsG1hcCoqKioqCgogICAgICB2YXIgZGF0YV9tYXAgPSB7fTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuc3RhZ2VfbnVtYmVyOyBpKyspIHsKICAgICAgICBkYXRhX21hcFtpXSA9IGRhdGFbX3RoaXMuc3RhZ2VNYXAoaSldOwogICAgICAgIGNvbnNvbGUubG9nKCcqKioqKipvblN0YWdlKioqKioqJywgX3RoaXMuc3RhZ2VNYXAoaSksIGksIGRhdGFbX3RoaXMuc3RhZ2VNYXAoaSldLCBkYXRhX21hcFtpXSk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCcqKioqKipvblN0YWdlKioqKioqJywgZGF0YSwgZGF0YV9tYXApOwoKICAgICAgX3RoaXMuZHJhd1N0YWdlKGFjdGl2ZV9rX21zZywgcGFzc2l2ZV9rX21zZywgZGF0YV9tYXApOwoKICAgICAgZDMuc2VsZWN0QWxsKCIuc3RhZ2VfZHJhZyIpLmNhbGwoZHJhZyk7CiAgICAgIGdfcHJvbXB0LnJhaXNlKCk7CiAgICB9KTsKICAgIHBpcGVTZXJ2aWNlLm9uQ2xpY2tQYXRoKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHZhciBsaXN0X3RlbXAgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YVswXS5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh+bGlzdF90ZW1wLmluY2x1ZGVzKGRhdGFbMF1baV0pKSB7CiAgICAgICAgICBsaXN0X3RlbXAucHVzaChkYXRhWzBdW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIF90aGlzLmhpZ2hsaWdodF9saXN0ID0gbGlzdF90ZW1wOwogICAgICBnX3Byb21wdC5yYWlzZSgpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdGFnZU1hcDogZnVuY3Rpb24gc3RhZ2VNYXAoc3RhZ2UpIHsKICAgICAgaWYgKHN0YWdlID09IDIpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQoKICAgICAgaWYgKHN0YWdlID09IDQpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfQoKICAgICAgaWYgKHN0YWdlID09IDApIHsKICAgICAgICByZXR1cm4gMjsKICAgICAgfQoKICAgICAgaWYgKHN0YWdlID09IDEpIHsKICAgICAgICByZXR1cm4gMzsKICAgICAgfQoKICAgICAgaWYgKHN0YWdlID09IDMpIHsKICAgICAgICByZXR1cm4gNDsKICAgICAgfQoKICAgICAgaWYgKHN0YWdlID09IDUpIHsKICAgICAgICByZXR1cm4gNTsKICAgICAgfQogICAgfSwKICAgIGNhbGN1bGF0ZVZhcmlhbmNlOiBmdW5jdGlvbiBjYWxjdWxhdGVWYXJpYW5jZShhcnIpIHsKICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICB2YXIgbWVhbiA9IGFyci5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VycikgewogICAgICAgIHJldHVybiBhY2MgKyBjdXJyOwogICAgICB9LCAwKSAvIG47CiAgICAgIHZhciB2YXJpYW5jZSA9IGFyci5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VycikgewogICAgICAgIHJldHVybiBhY2MgKyBNYXRoLnBvdyhjdXJyIC0gbWVhbiwgMik7CiAgICAgIH0sIDApIC8gbjsKICAgICAgcmV0dXJuIHZhcmlhbmNlOwogICAgfSwKICAgIGRyYXdMZWdlbmQ6IGZ1bmN0aW9uIGRyYXdMZWdlbmQoc3RhZ2VfbnVtYmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCIuc3RhZ2V2aWV3aGVhZGVyIikuYXBwZW5kKCJzdmciKS5hdHRyKCJ3aWR0aCIsIDcwMCkuYXR0cigiaGVpZ2h0IiwgMjApOwogICAgICB2YXIgZG9tYWluX3ggPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhZ2VfbnVtYmVyOyBpKyspIHsKICAgICAgICBkb21haW5feC5wdXNoKGkpOwogICAgICB9CgogICAgICB2YXIgY29sb3IgPSBkMy5zY2FsZU9yZGluYWwoKS5kb21haW4oZG9tYWluX3gpLnJhbmdlKF90aGlzLmNvbG9yX2xpc3QpOwogICAgICB2YXIgZ19sZWdlbmQgPSBzdmcuYXBwZW5kKCdnJyk7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAxNSkuYXR0cigieSIsIDMpLmF0dHIoIndpZHRoIiwgMTApLmF0dHIoImhlaWdodCIsIDEwKS5hdHRyKCJmaWxsIiwgX3RoaXMuYmFja2dyb3VuZF9jb2xvcikuYXR0cigic3Ryb2tlIiwgImJsYWNrIikub24oImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnRlbXBvcmFsID0gMSAtIF90aGlzLnRlbXBvcmFsOwogICAgICB9KS5hdHRyKCJjbGFzcyIsICJ0ZW1wb3JhbC1jbGljayIpOwogICAgICBnX2xlZ2VuZC5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgMjkpLmF0dHIoInkiLCAxMikuYXR0cigiZm9udC1zaXplIiwgMTMpLmF0dHIoImZpbGwiLCBfdGhpcy50ZXh0X2NvbG9yKS50ZXh0KCJ0ZW1wb3JhbCIpOyAvLyoqKioqKioqKuWBh+eahOi+k+WFpeahhioqKioqKioqKioKCiAgICAgIGdfbGVnZW5kLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAyMDApLmF0dHIoInkiLCAzKS5hdHRyKCJ3aWR0aCIsIDEyKS5hdHRyKCJoZWlnaHQiLCAxMykuYXR0cigiZmlsbCIsIF90aGlzLmJhY2tncm91bmRfY29sb3IpLmF0dHIoInN0cm9rZSIsICJibGFjayIpOwogICAgICBnX2xlZ2VuZC5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgMTA5KS5hdHRyKCJ5IiwgMTQpLmF0dHIoImZvbnQtc2l6ZSIsIDEzKS5hdHRyKCJmaWxsIiwgX3RoaXMudGV4dF9jb2xvcikudGV4dCgic3RhZ2UgbnVtYmVyOiA2Iik7CgogICAgICBmb3IgKHZhciBjID0gMDsgYyA8IHN0YWdlX251bWJlcjsgYysrKSB7CiAgICAgICAgc3ZnLmFwcGVuZCgiY2lyY2xlIikuYXR0cigiY3giLCAyMjUgKyBjICogODApLmF0dHIoImN5IiwgMTApLmF0dHIoInIiLCA3KS5hdHRyKCJmaWxsIiwgY29sb3IoYykpLmF0dHIoInN0cm9rZSIsICIjNWI1YjViIik7CiAgICAgICAgc3ZnLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCAyMzggKyBjICogODApLmF0dHIoInkiLCAxNCkuYXR0cigiZm9udC1zaXplIiwgMTMpLnRleHQoInN0YWdlICIgKyAoYyArIDEpKTsKICAgICAgfQoKICAgICAgZ19sZWdlbmQuYXBwZW5kKCJjaXJjbGUiKS5hdHRyKCJjeCIsIDY5MykuYXR0cigiY3kiLCA3KS5hdHRyKCJyIiwgNSkuYXR0cigiZmlsbCIsICJ3aGl0ZSIpLmF0dHIoInN0cm9rZSIsICJyZWQiKS5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKCkgewogICAgICAgICQoIi5wcm9tcHRfMiIpLmF0dHIoInZpc2liaWxpdHkiLCAidmlzaWJsZSIpOwogICAgICB9KS5vbigibW91c2VvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgiLnByb21wdF8yIikuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKTsKICAgICAgfSk7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCA2OTApLmF0dHIoInkiLCAxMCkuYXR0cigiZm9udC1zaXplIiwgOCkudGV4dCgiPyIpLmF0dHIoImZpbGwiLCAiI2JjNGI1MSIpLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgiLnByb21wdF8yIikuYXR0cigidmlzaWJpbGl0eSIsICJ2aXNpYmxlIik7CiAgICAgIH0pLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAkKCIucHJvbXB0XzIiKS5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpOwogICAgICB9KTsKICAgIH0sCiAgICBkcmF3U3RhZ2U6IGZ1bmN0aW9uIGRyYXdTdGFnZShhY3RpdmVfaywgcGFzc2l2ZV9rLCBkYXRhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgd2lkdGggPSA4ODA7CiAgICAgIHZhciBoZWlnaHQgPSAyMDA7CiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7CiAgICAgIHZhciBkb21haW5feCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZG9tYWluX3gucHVzaChpKTsKICAgICAgfQoKICAgICAgdmFyIHhzY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBrZXlzLmxlbmd0aCAtIDFdKS5yYW5nZShbMTIwLCA4MDBdKTsKICAgICAgdmFyIGNvbG9yID0gZDMuc2NhbGVPcmRpbmFsKCkuZG9tYWluKGRvbWFpbl94KS5yYW5nZShfdGhpcy5jb2xvcl9saXN0KTsKICAgICAgX3RoaXMuc3RhZ2VfaW50ZXJ2YWwgPSB4c2NhbGUoMSkgLSB4c2NhbGUoMCk7CgogICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBrZXlzLmxlbmd0aDsgX2k0KyspIHsKICAgICAgICBfdGhpcy5kcmF3RWFjaFN0YWdlKF9pNCwgZGF0YVtfaTRdLCAzLCBjb2xvciwgeHNjYWxlKF9pNCksIHhzY2FsZSgxKSAtIHhzY2FsZSgwKSk7CiAgICAgIH0KICAgIH0sCiAgICBzcGxpdERhdGFCeVRocmVzaG9sZHM6IGZ1bmN0aW9uIHNwbGl0RGF0YUJ5VGhyZXNob2xkcyhkYXRhLCB0aHJlc2hvbGRzLCBnYXApIHsKICAgICAgLy8g5Yid5aeL5YyW5YiG5Ymy57uT5p6c5pWw57uECiAgICAgIHZhciByZXN1bHRzID0gbmV3IEFycmF5KHRocmVzaG9sZHMubGVuZ3RoICsgMSk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICByZXN1bHRzW2ldID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTsKCiAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCByZXN1bHRzW2ldLmxlbmd0aDsgcCsrKSB7CiAgICAgICAgICByZXN1bHRzW2ldW3BdID0gMDsKICAgICAgICB9CiAgICAgIH0gLy8g5a+55pWw5o2u54K56YCQ5Liq6L+b6KGM5YiG5YmyCgoKICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgZGF0YS5sZW5ndGg7IF9pNSsrKSB7CiAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtfaTVdOwogICAgICAgIHZhciBqID0gMDsKCiAgICAgICAgd2hpbGUgKGogPCB0aHJlc2hvbGRzLmxlbmd0aCAmJiB2YWx1ZSA+IHRocmVzaG9sZHNbal0pIHsKICAgICAgICAgIHJlc3VsdHNbal1bX2k1XSA9IGdhcDsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIHJlc3VsdHNbal1bX2k1XSA9IHZhbHVlIC0gZ2FwICogajsKCiAgICAgICAgZm9yICh2YXIgayA9IGogKyAxOyBrIDwgcmVzdWx0cy5sZW5ndGg7IGsrKykgewogICAgICAgICAgcmVzdWx0c1trXVtfaTVdID0gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHRzOwogICAgfSwKICAgIGRyYXdFYWNoU3RhZ2U6IGZ1bmN0aW9uIGRyYXdFYWNoU3RhZ2Uoc3RhZ2UsIGRhdGEsIG1heGNvciwgY29sb3Jfc2NhbGUsIHhfc3RhcnQsIGludGVydmFsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGF0YV9vcmlnID0gZGF0YTsKICAgICAgdmFyIGRhdGFfc3VtbWFyeSA9IG5ldyBBcnJheSgpOwogICAgICB2YXIgZGF0YV9zdW1tYXJ5X2FsbCA9IHsKICAgICAgICAiZGVwcmVzc2lvbiI6IG5ldyBBcnJheSgpLAogICAgICAgICJhY3RpdmUgYmVoYXZpb3IiOiBuZXcgQXJyYXkoKSwKICAgICAgICAicGFzc2l2ZSBiZWhhdmlvciI6IG5ldyBBcnJheSgpCiAgICAgIH07IC8v55So5p2l5YyF5ZCr5omA5pyJ55qE54K5CgogICAgICB2YXIgZGF0YV9zdGF0aXN0aWNzID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBkYXRhX3N0YXRpc3RpY3NfYWxsID0gbmV3IEFycmF5KCk7IC8v55So5p2l5YyF5ZCr5omA5pyJ55qE54K5CgogICAgICB2YXIgc2VnbWVudF9sZW5ndGggPSBkYXRhLmxlbmd0aDsKICAgICAgdmFyIGNvcnJfc3RhdGlzdGljcyA9IG5ldyBBcnJheSgpOwogICAgICB2YXIgZGF0YV9jb25jYXQgPSBuZXcgQXJyYXkoKTsKICAgICAgdmFyIGNvcnJfc3RhdGlzdGljc19hbGwgPSBuZXcgQXJyYXkoKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudF9sZW5ndGg7IGkrKykgewogICAgICAgIGRhdGFfc3VtbWFyeVtpXSA9IHsKICAgICAgICAgICJkZXByZXNzaW9uIjogbmV3IEFycmF5KCksCiAgICAgICAgICAiYWN0aXZlIGJlaGF2aW9yIjogbmV3IEFycmF5KCksCiAgICAgICAgICAicGFzc2l2ZSBiZWhhdmlvciI6IG5ldyBBcnJheSgpCiAgICAgICAgfTsgLy/lrZjlgqjmr4/kuIDkuKrml7bpl7TngrnlhbPkuo7kuInkuKrnmoTnu5/orqEKCiAgICAgICAgZGF0YV9zdGF0aXN0aWNzW2ldID0gbmV3IEFycmF5KCk7CiAgICAgICAgZGF0YV9jb25jYXQgPSBkYXRhX2NvbmNhdC5jb25jYXQoZGF0YVtpXSk7CgogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgZGF0YV9zdW1tYXJ5W2ldWyJkZXByZXNzaW9uIl0ucHVzaChfdGhpcy5kZXByZXNzaW9uVGhyZXNob2xkKGRhdGFbaV1bal1bMF0pKTsKICAgICAgICAgIGRhdGFfc3VtbWFyeVtpXVsiYWN0aXZlIGJlaGF2aW9yIl0ucHVzaChkYXRhW2ldW2pdWzFdKTsKICAgICAgICAgIGRhdGFfc3VtbWFyeVtpXVsicGFzc2l2ZSBiZWhhdmlvciJdLnB1c2goZGF0YVtpXVtqXVsyXSk7CiAgICAgICAgICBkYXRhX3N1bW1hcnlfYWxsWyJkZXByZXNzaW9uIl0ucHVzaChfdGhpcy5kZXByZXNzaW9uVGhyZXNob2xkKGRhdGFbaV1bal1bMF0pKTsKICAgICAgICAgIGRhdGFfc3VtbWFyeV9hbGxbImFjdGl2ZSBiZWhhdmlvciJdLnB1c2goZGF0YVtpXVtqXVsxXSk7CiAgICAgICAgICBkYXRhX3N1bW1hcnlfYWxsWyJwYXNzaXZlIGJlaGF2aW9yIl0ucHVzaChkYXRhW2ldW2pdWzJdKTsKICAgICAgICB9CgogICAgICAgIGNvcnJfc3RhdGlzdGljcy5wdXNoKF90aGlzLmNvcnJlbGF0aW9uU3VtbWFyaXplKGRhdGFbaV0sIG1heGNvcikpOwogICAgICAgIGRhdGFfc3RhdGlzdGljc1tpXS5wdXNoKF90aGlzLmdldEZyZXF1ZW5jeShkYXRhX3N1bW1hcnlbaV1bImRlcHJlc3Npb24iXSksIF90aGlzLmdldEZyZXF1ZW5jeShkYXRhX3N1bW1hcnlbaV1bImFjdGl2ZSBiZWhhdmlvciJdKSwgX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeVtpXVsicGFzc2l2ZSBiZWhhdmlvciJdKSk7CiAgICAgIH0KCiAgICAgIF90aGlzLnN0YWdlc3RhdGlzdGljc1tzdGFnZV0gPSBkYXRhX3N0YXRpc3RpY3NfYWxsOwogICAgICBjb3JyX3N0YXRpc3RpY3NfYWxsID0gX3RoaXMuY29ycmVsYXRpb25TdW1tYXJpemUoZGF0YV9jb25jYXQsIG1heGNvcik7CiAgICAgIGRhdGFfc3RhdGlzdGljc19hbGwucHVzaChfdGhpcy5nZXRGcmVxdWVuY3koZGF0YV9zdW1tYXJ5X2FsbFsiZGVwcmVzc2lvbiJdKSwgX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeV9hbGxbImFjdGl2ZSBiZWhhdmlvciJdKSwgX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeV9hbGxbInBhc3NpdmUgYmVoYXZpb3IiXSkpOyAvL+W8gOWni+eUu+WbvgoKICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgiLnByb2dyZXNzaW9uc3RhZ2UiKTsKICAgICAgdmFyIHN2Z19zdGFnZSA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ3aWR0aCIsIDMwMCkuYXR0cigiaGVpZ2h0IiwgMjgwKS5hdHRyKCJjbGFzcyIsICJzdGFnZV9kcmFnICIgKyBzdGFnZSkuc3R5bGUoInotaW5kZXgiLCAyKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAoeF9zdGFydCAtIDUwKSArICIsMCkiKTsKCiAgICAgIGlmIChzdGFnZSA9PSAwKSB7CiAgICAgICAgX3RoaXMuc3RhZ2Vfc3RhcnQgPSB4X3N0YXJ0IC0gNTA7CiAgICAgIH0KCiAgICAgIHZhciBzdmdfMSA9IHN2Z19zdGFnZS5hcHBlbmQoImciKS5hdHRyKCJ3aWR0aCIsIDMwMCkuYXR0cigiaGVpZ2h0IiwgMjgwKS5hdHRyKCJjbGFzcyIsICJzdGFnZV9zaW5nbGUiICsgc3RhZ2UpLmF0dHIoImlkIiwgInN0YWdlX3NpbmdsZSIgKyBzdGFnZSkuc3R5bGUoInotaW5kZXgiLCAyKTsKICAgICAgdmFyIHN2Z18zID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoIndpZHRoIiwgODgwKS5hdHRyKCJoZWlnaHQiLCAyODApLmF0dHIoImNsYXNzIiwgImxlZ2VuZCIpLnN0eWxlKCJ6LWluZGV4IiwgMikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgxMCwgMCkiKTsKICAgICAgdmFyIHlfc3RhcnQgPSAzMDsKICAgICAgdmFyIHdpZHRoX3NjYWxlID0gaW50ZXJ2YWwgLyAyOwogICAgICB2YXIgaGVpZ2h0X3NjYWxlID0gMTE7CiAgICAgIHZhciB4X3N0YXJ0MSA9IDUwOyAvLyDnlLvog4zmma8KCiAgICAgIHN2Z18xLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X3N0YXJ0MSAtIDM1KS5hdHRyKCJ5IiwgeV9zdGFydCAtIDE1KS5hdHRyKCJyeCIsIDUpLmF0dHIoInJ5IiwgNSkuYXR0cigiaGVpZ2h0IiwgMjIwKS5hdHRyKCJ3aWR0aCIsIDExMCkuYXR0cigiZmlsbCIsICJ3aGl0ZSIpLmF0dHIoInN0cm9rZSIsIF90aGlzLm5vdGhpZ2hsaWdodF9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMSkuYXR0cigib3BhY2l0eSIsIDAuMSkuYXR0cigiY2xhc3MiLCAic3RhZ2VfYmFja2dyb3VuZDEiICsgc3RhZ2UpOyAvLyDnlLtzdGFnZeagh+W/lwoKICAgICAgc3ZnXzEuYXBwZW5kKCJjaXJjbGUiKS5hdHRyKCJjeCIsIHhfc3RhcnQxIC0gMzUpLmF0dHIoImN5IiwgeV9zdGFydCAtIDE1KS5hdHRyKCJyIiwgNykuYXR0cigiZmlsbCIsIGNvbG9yX3NjYWxlKHN0YWdlKSkuYXR0cigic3Ryb2tlIiwgX3RoaXMubm90aGlnaGxpZ2h0X2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAwLjIpLmF0dHIoImNsYXNzIiwgInN0YWdlX2JhY2tncm91bmQyIiArIHN0YWdlKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9saXN0LmluY2x1ZGVzKHN0YWdlLnRvU3RyaW5nKCkpKSB7CiAgICAgICAgICB2YXIgdGVtcCA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIF9pNiA9IDA7IF9pNiA8IF90aGlzLmhpZ2hsaWdodF9saXN0Lmxlbmd0aDsgX2k2KyspIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9saXN0W19pNl0gIT0gc3RhZ2UudG9TdHJpbmcoKSkgewogICAgICAgICAgICAgIHRlbXAucHVzaChfdGhpcy5oaWdobGlnaHRfbGlzdFtfaTZdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLmhpZ2hsaWdodF9saXN0ID0gdGVtcDsgLy9jb25zb2xlLmxvZyhfdGhpcy5oaWdobGlnaHRfbGlzdCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuaGlnaGxpZ2h0X2xpc3QucHVzaChzdGFnZS50b1N0cmluZygpKTsgLy9jb25zb2xlLmxvZyhfdGhpcy5oaWdobGlnaHRfbGlzdCkKCiAgICAgICAgfQogICAgICB9KTsKICAgICAgc3ZnXzEuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIHhfc3RhcnQxIC0gMzkpLmF0dHIoInkiLCB5X3N0YXJ0IC0gMTApLmF0dHIoImZvbnQtc2l6ZSIsIDEzKS5hdHRyKCJmaWxsIiwgJ3doaXRlJykudGV4dChzdGFnZSArIDEpLmF0dHIoImNsYXNzIiwgInN0YWdlX2JhY2tncm91bmQyIiArIHN0YWdlKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9saXN0LmluY2x1ZGVzKHN0YWdlLnRvU3RyaW5nKCkpKSB7CiAgICAgICAgICB2YXIgdGVtcCA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIF9pNyA9IDA7IF9pNyA8IF90aGlzLmhpZ2hsaWdodF9saXN0Lmxlbmd0aDsgX2k3KyspIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9saXN0W19pN10gIT0gc3RhZ2UudG9TdHJpbmcoKSkgewogICAgICAgICAgICAgIHRlbXAucHVzaChfdGhpcy5oaWdobGlnaHRfbGlzdFtfaTddKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLmhpZ2hsaWdodF9saXN0ID0gdGVtcDsgLy9jb25zb2xlLmxvZyhfdGhpcy5oaWdobGlnaHRfbGlzdCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuaGlnaGxpZ2h0X2xpc3QucHVzaChzdGFnZS50b1N0cmluZygpKTsgLy9jb25zb2xlLmxvZyhfdGhpcy5oaWdobGlnaHRfbGlzdCkKCiAgICAgICAgfQogICAgICB9KTsgLy8uYXR0cigib3BhY2l0eSIsIDAuNSkKICAgICAgLy8g55S75Y2V5LiqYXR0cmlidXRlCgogICAgICB2YXIgcG9zaXRpb24gPSB7fTsgLy8g6K6w5b2V57q15Z2Q5qCH5L2N572uCgogICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaTgpIHsKICAgICAgICB2YXIgeV9zdGFydDIgPSB5X3N0YXJ0OwogICAgICAgIHZhciBrZXlzX2kgPSBPYmplY3Qua2V5cyhkYXRhX3N0YXRpc3RpY3NfYWxsW19pOF0pOwogICAgICAgIHZhciB2YWx1ZXNfaSA9IE9iamVjdC52YWx1ZXMoZGF0YV9zdGF0aXN0aWNzX2FsbFtfaThdKTsKICAgICAgICBzdmdfMy5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgMTApLmF0dHIoInkiLCB5X3N0YXJ0KS5hdHRyKCJoZWlnaHQiLCBoZWlnaHRfc2NhbGUgKiBrZXlzX2kubGVuZ3RoICsgMyAqIChrZXlzX2kubGVuZ3RoIC0gMSkpLmF0dHIoIndpZHRoIiwgMikuYXR0cigiZmlsbCIsICIjNWI1YjViIikuYXR0cigib3BhY2l0eSIsIDAuMik7CiAgICAgICAgc3ZnXzEuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfc3RhcnQxIC0gNSkuYXR0cigieSIsIHlfc3RhcnQpLmF0dHIoImhlaWdodCIsIGhlaWdodF9zY2FsZSAqIGtleXNfaS5sZW5ndGggKyAzICogKGtleXNfaS5sZW5ndGggLSAxKSkuYXR0cigid2lkdGgiLCB3aWR0aF9zY2FsZSkuYXR0cigiZmlsbCIsICIjNWI1YjViIikuYXR0cigib3BhY2l0eSIsIDAuMDUpLmF0dHIoInJ4IiwgMykuYXR0cigicnkiLCAzKTsKICAgICAgICBzdmdfMS5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9zdGFydDEgLSAzKS5hdHRyKCJ5IiwgeV9zdGFydCkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0X3NjYWxlICoga2V5c19pLmxlbmd0aCArIDMgKiAoa2V5c19pLmxlbmd0aCAtIDEpKS5hdHRyKCJ3aWR0aCIsIDMpLmF0dHIoImZpbGwiLCAiI2NiY2JjYiIpOyAvLyAuYXR0cigib3BhY2l0eSIsIDAuMykKCiAgICAgICAgdmFyIF9sb29wNCA9IGZ1bmN0aW9uIF9sb29wNChfaikgewogICAgICAgICAgLy8g55S7bGVnZW5kCiAgICAgICAgICBpZiAoX2k4ID09IDApIHsKICAgICAgICAgICAgc3ZnXzMuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIDE1KS5hdHRyKCJ5IiwgeV9zdGFydCArIGhlaWdodF9zY2FsZSAtIDIpLmF0dHIoImZvbnQtc2l6ZSIsIDEzKS50ZXh0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoX2ogPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuICdsb3cnOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2ogPT0gMSkgewogICAgICAgICAgICAgICAgcmV0dXJuICdtZWRpdW0nOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZ2gnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuYXR0cigib3BhY2l0eSIsIDAuMik7CiAgICAgICAgICB9IGVsc2UgaWYgKF9pOCA9PSAxKSB7CiAgICAgICAgICAgIHN2Z18zLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCAxNSkuYXR0cigieSIsIHlfc3RhcnQgKyBoZWlnaHRfc2NhbGUgLSAyKS5hdHRyKCJmb250LXNpemUiLCAxMykudGV4dCgicCIgKyAoX2ogKyAxKSkuYXR0cigib3BhY2l0eSIsIDAuMik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdmdfMy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgMTUpLmF0dHIoInkiLCB5X3N0YXJ0ICsgaGVpZ2h0X3NjYWxlIC0gMikuYXR0cigiZm9udC1zaXplIiwgMTMpLnRleHQoInIiICsgKF9qICsgMSkpLmF0dHIoIm9wYWNpdHkiLCAwLjIpOwogICAgICAgICAgfQoKICAgICAgICAgIHBvc2l0aW9uW19pOC50b1N0cmluZygpICsgX2oudG9TdHJpbmcoKV0gPSB5X3N0YXJ0ICsgaGVpZ2h0X3NjYWxlIC8gMjsgLy8g6L+Z6YeM5piv55S75Lit6Ze055qE5bCP5pa55Z2X77yM5rOo5oSP5pivbm9uLXRlbXBvcmFs5L+h5oGvCgogICAgICAgICAgc3ZnXzEuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfc3RhcnQxKS5hdHRyKCJ5IiwgeV9zdGFydCkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0X3NjYWxlKS5hdHRyKCJ3aWR0aCIsIGRhdGFfc3RhdGlzdGljc19hbGxbX2k4XVtfal0gLyBfdGhpcy5zdW0odmFsdWVzX2kpICogd2lkdGhfc2NhbGUpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpLmF0dHIoImNsYXNzIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX2k4ID09IDEpIHsKICAgICAgICAgICAgICByZXR1cm4gIm5vbi10ZW1wb3JhbCAiICsgc3RhZ2UgKyAnIGEnICsgKF9qICsgMSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoX2k4ID09IDIpIHsKICAgICAgICAgICAgICByZXR1cm4gIm5vbi10ZW1wb3JhbCAiICsgc3RhZ2UgKyAnIHAnICsgKF9qICsgMSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuICJub24tdGVtcG9yYWwgIiArIHN0YWdlICsgJyBkJyArIChfaiArIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5hdHRyKCJzdHJva2UiLCBfdGhpcy5zdHJva2VfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIDAuMDUpIC8vaG92ZXLlnKhiYXLkuIoKICAgICAgICAgIC5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVsyXVswXTsgLy9kIGEgcAoKICAgICAgICAgICAgdmFyIG9yZGVyID0gcGFyc2VJbnQoJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMl1bMV0pIC0gMTsgLy8gMSAyIDMgNC4uLgogICAgICAgICAgICAvL+mcgOimgeaPkOWPluWHuuaJgOacieebuOi/nueahOe6v+S7peWPimJhcgoKICAgICAgICAgICAgdmFyIGtleXNfdGVtcCA9IFsnZGVfYWMnLCAnYWNfcGEnLCAnZGVfcGEnLCAnZGVfYWNfcGEnXTsKCiAgICAgICAgICAgIGZvciAodmFyIF9pMTEgPSAwOyBfaTExIDwga2V5c190ZW1wLmxlbmd0aDsgX2kxMSsrKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgX2oyID0gMDsgX2oyIDwgY29ycl9zdGF0aXN0aWNzX2FsbFtrZXlzX3RlbXBbX2kxMV1dLmxlbmd0aDsgX2oyKyspIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lX3RlbXAgPSBrZXlzX3RlbXBbX2kxMV07CiAgICAgICAgICAgICAgICB2YXIgdmFsdWVfdGVtcCA9IHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxba2V5c190ZW1wW19pMTFdXVtfajJdWzBdKTsgLy8g6aaW5YWI55S7YmFyCgogICAgICAgICAgICAgICAgaWYgKF9pMTEgPT0gMykgewogICAgICAgICAgICAgICAgICB2YXIgdGVtcDAgPSBwYXJzZUludCh2YWx1ZV90ZW1wIC8gMTAwKTsKICAgICAgICAgICAgICAgICAgdmFyIHRlbXAyID0gdmFsdWVfdGVtcCAlIDEwOwogICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwYXJzZUludCgodmFsdWVfdGVtcCAtIHRlbXAwICogMTAwKSAvIDEwKTsKCiAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMCkgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDEpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAyKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goJ2EnICsgKHRlbXAxICsgMSkpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaCgncCcgKyAodGVtcDIgKyAxKSk7CgogICAgICAgICAgICAgICAgICAkKCcuc3RhZ2UnICsgc3RhZ2UgKyAnLmRlX2FjX3BhLicgKyB2YWx1ZV90ZW1wKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuZCcgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5hJyArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAnICsgKHRlbXAyICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5kMicgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmEyJyArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcucDInICsgKHRlbXAyICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdmFyIF90ZW1wID0gcGFyc2VJbnQodmFsdWVfdGVtcCAvIDEwKTsKCiAgICAgICAgICAgICAgICAgIHZhciBfdGVtcDIgPSB2YWx1ZV90ZW1wICUgMTA7CgogICAgICAgICAgICAgICAgICB2YXIgazAgPSAnZCc7CiAgICAgICAgICAgICAgICAgIHZhciBrMSA9ICdhJzsKICAgICAgICAgICAgICAgICAgdmFyIGtrID0gJ2RlX2FjJzsKCiAgICAgICAgICAgICAgICAgIGlmIChfaTExID09IDApIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSBfdGVtcCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IF90ZW1wMikgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoX2kxMSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSBfdGVtcDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgazAgPSAnYSc7CiAgICAgICAgICAgICAgICAgICAgazEgPSAncCc7CiAgICAgICAgICAgICAgICAgICAga2sgPSAnYWNfcGEnOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoX2kxMSA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSBfdGVtcDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgazEgPSAncCc7CiAgICAgICAgICAgICAgICAgICAga2sgPSAnZGVfcGEnOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGswICsgKF90ZW1wICsgMSkpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChrMSArIChfdGVtcDIgKyAxKSk7CgogICAgICAgICAgICAgICAgICAkKCcuc3RhZ2UnICsgc3RhZ2UgKyAnLicgKyBrayArICIuIiArIHZhbHVlX3RlbXApLmF0dHIoInN0cm9rZSIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAoX3RlbXAgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazEgKyAoX3RlbXAyICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAnMicgKyAoX3RlbXAgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArICcyJyArIChfdGVtcDIgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWVfc3BsaXQgPSB0eXBlID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJy4nOwoKICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBjbGFzc19uYW1lX3NwbGl0Lmxlbmd0aDsgYysrKSB7CiAgICAgICAgICAgICAgY2xhc3NfbmFtZSArPSBjbGFzc19uYW1lX3NwbGl0W2NdOwoKICAgICAgICAgICAgICBpZiAoYyA8IGNsYXNzX25hbWVfc3BsaXQubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgY2xhc3NfbmFtZSArPSAnLic7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKGNsYXNzX25hbWUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVsyXVswXTsgLy9kIGEgcAoKICAgICAgICAgICAgdmFyIG9yZGVyID0gcGFyc2VJbnQoJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMl1bMV0pIC0gMTsgLy8gMSAyIDMgNC4uLgogICAgICAgICAgICAvL2NvbnNvbGUubG9nKHR5cGUsIG9yZGVyKQogICAgICAgICAgICAvL+mcgOimgeaPkOWPluWHuuaJgOacieebuOi/nueahOe6v+S7peWPimJhcgoKICAgICAgICAgICAgdmFyIGtleXNfdGVtcCA9IFsnZGVfYWMnLCAnYWNfcGEnLCAnZGVfcGEnLCAnZGVfYWNfcGEnXTsKCiAgICAgICAgICAgIGZvciAodmFyIF9pMTIgPSAwOyBfaTEyIDwga2V5c190ZW1wLmxlbmd0aDsgX2kxMisrKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgX2ozID0gMDsgX2ozIDwgY29ycl9zdGF0aXN0aWNzX2FsbFtrZXlzX3RlbXBbX2kxMl1dLmxlbmd0aDsgX2ozKyspIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lX3RlbXAgPSBrZXlzX3RlbXBbX2kxMl07CiAgICAgICAgICAgICAgICB2YXIgdmFsdWVfdGVtcCA9IHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxba2V5c190ZW1wW19pMTJdXVtfajNdWzBdKTsgLy8g6aaW5YWI55S7YmFyCgogICAgICAgICAgICAgICAgaWYgKF9pMTIgPT0gMykgewogICAgICAgICAgICAgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDAgPSBwYXJzZUludCh2YWx1ZV90ZW1wIC8gMTAwKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDIgPSB2YWx1ZV90ZW1wICUgMTA7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAxID0gcGFyc2VJbnQoKHZhbHVlX3RlbXAgLSB0ZW1wMCAqIDEwMCkgLyAxMCk7CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RoaXMucmVtb3ZlRWxlbWVudChfdGhpcy5hY3RpdmVfcGFzc2l2ZSwgWydkJyArICh0ZW1wMCArIDEpLCAnYScgKyAodGVtcDEgKyAxKSwgJ3AnICsgKHRlbXAyICsgMSldKTsKICAgICAgICAgICAgICAgICAgICAkKCcuc3RhZ2UnICsgc3RhZ2UgKyAnLmRlX2FjX3BhLicgKyB2YWx1ZV90ZW1wKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5saW5lX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuZCcgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5kJyArICh0ZW1wMCArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmEnICsgKHRlbXAxICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuYScgKyAodGVtcDEgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5wJyArICh0ZW1wMiArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAnICsgKHRlbXAyICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5kMicgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmQyJyArICh0ZW1wMCArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuYTInICsgKHRlbXAxICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5hMicgKyAodGVtcDEgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAyJyArICh0ZW1wMiArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLnRlbXBvcmFsLicgKyBzdGFnZSArICcucDInICsgKHRlbXAyICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICAgICAgaWYgKF9yZXQgPT09ICJjb250aW51ZSIpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZXQyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMCA9IHBhcnNlSW50KHZhbHVlX3RlbXAgLyAxMCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAxID0gdmFsdWVfdGVtcCAlIDEwOwogICAgICAgICAgICAgICAgICAgIHZhciBrMCA9ICdkJzsKICAgICAgICAgICAgICAgICAgICB2YXIgazEgPSAnYSc7CiAgICAgICAgICAgICAgICAgICAgdmFyIGtrID0gJ2RlX2FjJzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKF9pMTIgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKF9pMTIgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGswID0gJ2EnOwogICAgICAgICAgICAgICAgICAgICAgazEgPSAncCc7CiAgICAgICAgICAgICAgICAgICAgICBrayA9ICdhY19wYSc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoX2kxMiA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgazEgPSAncCc7CiAgICAgICAgICAgICAgICAgICAgICBrayA9ICdkZV9wYSc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZSA9IF90aGlzLnJlbW92ZUVsZW1lbnQoX3RoaXMuYWN0aXZlX3Bhc3NpdmUsIFtrMCArICh0ZW1wMCArIDEpLCBrMSArICh0ZW1wMSArIDEpXSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnN0YWdlJyArIHN0YWdlICsgJy4nICsga2sgKyAiLiIgKyB2YWx1ZV90ZW1wKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAodGVtcDAgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAodGVtcDAgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazEgKyAodGVtcDEgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazEgKyAodGVtcDEgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArICcyJyArICh0ZW1wMCArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGswICsgJzInICsgKHRlbXAwICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazEgKyAnMicgKyAodGVtcDEgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArICcyJyArICh0ZW1wMSArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0oKTsKCiAgICAgICAgICAgICAgICAgIGlmIChfcmV0MiA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfaTggIT0gMCkgewogICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3N0cm9rZS13aWR0aCcpID09IDAuMDUpIHsKICAgICAgICAgICAgICAgIC8v6KGo56S66auY5LquCiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDEpOwoKICAgICAgICAgICAgICAgIGlmIChfaTggPT0gMSkgewogICAgICAgICAgICAgICAgICAvL+S7o+ihqOeCueWHu+eahGFjdGl2ZQogICAgICAgICAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgJy5hJyArIChfaiArIDEpKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5zdHJva2VfY29sb3IpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaCgnYScgKyAoX2ogKyAxKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF9pOCA9PSAyKSB7CiAgICAgICAgICAgICAgICAgIC8v5Luj6KGo54K55Ye755qEcGFzc2l2ZQogICAgICAgICAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgJy5wJyArIChfaiArIDEpKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5zdHJva2VfY29sb3IpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaCgncCcgKyAoX2ogKyAxKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8v6KGo56S65Y+W5raI54K55Ye7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuMDUpOwoKICAgICAgICAgICAgICAgIGlmIChfaTggPT0gMSkgewogICAgICAgICAgICAgICAgICAvL+S7o+ihqOeCueWHu+eahGFjdGl2ZQogICAgICAgICAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgJy5hJyArIChfaiArIDEpKS5hdHRyKCdzdHJva2UnLCAnI2U1ZTVlNScpOwogICAgICAgICAgICAgICAgICB2YXIgdGVtcF9saXN0ID0gW107CiAgICAgICAgICAgICAgICAgIHZhciBmbGFnID0gMTsKCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgX3RoaXMuYWN0aXZlX3Bhc3NpdmUubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZyA9PSAxICYmIF90aGlzLmFjdGl2ZV9wYXNzaXZlW3BdID09ICdhJyArIChfaiArIDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gMDsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGVtcF9saXN0LnB1c2goX3RoaXMuYWN0aXZlX3Bhc3NpdmVbcF0pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZSA9IHRlbXBfbGlzdDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX2k4ID09IDIpIHsKICAgICAgICAgICAgICAgICAgLy/ku6Pooajngrnlh7vnmoRwYXNzaXZlCiAgICAgICAgICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAnLnAnICsgKF9qICsgMSkpLmF0dHIoJ3N0cm9rZScsICcjZTVlNWU1Jyk7CiAgICAgICAgICAgICAgICAgIHZhciBfdGVtcF9saXN0ID0gW107CiAgICAgICAgICAgICAgICAgIHZhciBfZmxhZyA9IDE7CgogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfcCA9IDA7IF9wIDwgX3RoaXMuYWN0aXZlX3Bhc3NpdmUubGVuZ3RoOyBfcCsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9mbGFnID09IDEgJiYgX3RoaXMuYWN0aXZlX3Bhc3NpdmVbX3BdID09ICdwJyArIChfaiArIDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfZmxhZyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIF90ZW1wX2xpc3QucHVzaChfdGhpcy5hY3RpdmVfcGFzc2l2ZVtfcF0pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZSA9IF90ZW1wX2xpc3Q7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsgLy8g6L+Z5Liq5Zyw5pa56ZyA6KaB5Yqg5LiK5q+P5LiA5LiqYXRyaWJ1dGXnmoR0ZW1wb3JhbOS/oeaBrwoKICAgICAgICAgIHZhciB5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMV0pLnJhbmdlKFtoZWlnaHRfc2NhbGUsIDBdKTsKICAgICAgICAgIHZhciB5U2NhbGUyID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDAuMl0pLnJhbmdlKFtoZWlnaHRfc2NhbGUsIDBdKTsKICAgICAgICAgIHZhciBhcmVhID0gZDMuYXJlYSgpLngoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIGQueDsKICAgICAgICAgIH0pLnkwKGhlaWdodF9zY2FsZSkueTEoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIHlTY2FsZShkLnkpOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgdGVtcG9yYWxfdGVtcCA9IFtdOwogICAgICAgICAgdmFyIHRlbXBvcmFsX2hvcml6b24gPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBwID0gMDsgcCA8IGRhdGFfc3RhdGlzdGljcy5sZW5ndGg7IHArKykgewogICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFfc3RhdGlzdGljc1twXVtfaThdW19qXSAhPSAnbnVtYmVyJykgewogICAgICAgICAgICAgIGRhdGFfc3RhdGlzdGljc1twXVtfaThdW19qXSA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRlbXBvcmFsX3RlbXAucHVzaCh7CiAgICAgICAgICAgICAgeDogeF9zdGFydDEgKyBwICogd2lkdGhfc2NhbGUgLyBkYXRhX3N0YXRpc3RpY3MubGVuZ3RoLAogICAgICAgICAgICAgIHk6IGRhdGFfc3RhdGlzdGljc1twXVtfaThdW19qXSAvIGRhdGFbX2pdLmxlbmd0aAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGVtcG9yYWxfaG9yaXpvbi5wdXNoKGRhdGFfc3RhdGlzdGljc1twXVtfaThdW19qXSAvIGRhdGFbX2pdLmxlbmd0aCk7CiAgICAgICAgICB9IC8v6L+Z6YeM5piv5Yqg6YKj5Lqb5bCP5pa55Z2X77yM5L2G5piv5rOo5oSP6KaB5pivdGVtcG9yYWzkv6Hmga8KCgogICAgICAgICAgc3ZnXzEuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfc3RhcnQxKS5hdHRyKCJ5IiwgeV9zdGFydCkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0X3NjYWxlKS5hdHRyKCJ3aWR0aCIsIHdpZHRoX3NjYWxlIC0gNSkuYXR0cigiZmlsbCIsICd3aGl0ZScpLmF0dHIoInN0cm9rZSIsICIjZTVlNWU1IikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMSkuYXR0cigib3BhY2l0eSIsIDAuMikuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfaTggIT0gMCkgewogICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3N0cm9rZScpID09ICIjZTVlNWU1IikgewogICAgICAgICAgICAgICAgLy/ooajnpLrpq5jkuq7kuoYKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignc3Ryb2tlJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKCiAgICAgICAgICAgICAgICBpZiAoX2k4ID09IDEpIHsKICAgICAgICAgICAgICAgICAgLy/ku6Pooajngrnlh7vnmoRhY3RpdmUKICAgICAgICAgICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAnLmEnICsgKF9qICsgMSkpLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDEpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaCgnYScgKyAoX2ogKyAxKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF9pOCA9PSAyKSB7CiAgICAgICAgICAgICAgICAgIC8v5Luj6KGo54K55Ye755qEcGFzc2l2ZQogICAgICAgICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICcucCcgKyAoX2ogKyAxKSkuYXR0cignc3Ryb2tlLXdpZHRoJywgMSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKCdwJyArIChfaiArIDEpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy/ooajnpLrlj5bmtojngrnlh7sKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignc3Ryb2tlJywgIiNlNWU1ZTUiKTsKCiAgICAgICAgICAgICAgICBpZiAoX2k4ID09IDEpIHsKICAgICAgICAgICAgICAgICAgLy/ku6Pooajngrnlh7vnmoRhY3RpdmUKICAgICAgICAgICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAnLmEnICsgKF9qICsgMSkpLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuMDUpOwogICAgICAgICAgICAgICAgICB2YXIgdGVtcF9saXN0ID0gW107CiAgICAgICAgICAgICAgICAgIHZhciBmbGFnID0gMTsKCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9wMiA9IDA7IF9wMiA8IF90aGlzLmFjdGl2ZV9wYXNzaXZlLmxlbmd0aDsgX3AyKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZyA9PSAxICYmIF90aGlzLmFjdGl2ZV9wYXNzaXZlW19wMl0gPT0gJ2EnICsgKF9qICsgMSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSAwOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0ZW1wX2xpc3QucHVzaChfdGhpcy5hY3RpdmVfcGFzc2l2ZVtfcDJdKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUgPSB0ZW1wX2xpc3Q7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF9pOCA9PSAyKSB7CiAgICAgICAgICAgICAgICAgIC8v5Luj6KGo54K55Ye755qEcGFzc2l2ZQogICAgICAgICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICcucCcgKyAoX2ogKyAxKSkuYXR0cignc3Ryb2tlLXdpZHRoJywgMC4wNSk7CiAgICAgICAgICAgICAgICAgIHZhciBfdGVtcF9saXN0MiA9IFtdOwogICAgICAgICAgICAgICAgICB2YXIgX2ZsYWcyID0gMTsKCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9wMyA9IDA7IF9wMyA8IF90aGlzLmFjdGl2ZV9wYXNzaXZlLmxlbmd0aDsgX3AzKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX2ZsYWcyID09IDEgJiYgX3RoaXMuYWN0aXZlX3Bhc3NpdmVbX3AzXSA9PSAncCcgKyAoX2ogKyAxKSkgewogICAgICAgICAgICAgICAgICAgICAgX2ZsYWcyID0gMDsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX3RlbXBfbGlzdDIucHVzaChfdGhpcy5hY3RpdmVfcGFzc2l2ZVtfcDNdKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUgPSBfdGVtcF9saXN0MjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHRocmVzaG9sZHMgPSBbMC4yLCAwLjQsIDAuNiwgMC44XTsKICAgICAgICAgIHZhciBhcmVhR2VuZXJhdG9yID0gZDMuYXJlYSgpLngoZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIHhfc3RhcnQxICsgaSAqICh3aWR0aF9zY2FsZSArIDEwKSAvIGRhdGFfc3RhdGlzdGljcy5sZW5ndGg7CiAgICAgICAgICB9KS55MChoZWlnaHRfc2NhbGUpLnkxKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIHJldHVybiB5U2NhbGUyKGQpOwogICAgICAgICAgfSkuY3VydmUoZDMuY3VydmVCYXNpcyk7CgogICAgICAgICAgdmFyIGxheWVycyA9IF90aGlzLnNwbGl0RGF0YUJ5VGhyZXNob2xkcyh0ZW1wb3JhbF9ob3Jpem9uLCB0aHJlc2hvbGRzLCAwLjIpOwoKICAgICAgICAgIHZhciBzdmdfMV8xID0gc3ZnXzEuYXBwZW5kKCdnJykuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyB5X3N0YXJ0ICsgIikiKTsKICAgICAgICAgIHN2Z18xXzEuc2VsZWN0QWxsKCIubGF5ZXIiKS5kYXRhKGxheWVycykuZW50ZXIoKS5hcHBlbmQoInBhdGgiKS5hdHRyKCJjbGFzcyIsICJsYXllciIpLmF0dHIoImQiLCBhcmVhR2VuZXJhdG9yKS5hdHRyKCJvcGFjaXR5IiwgZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIChpICsgMSkgKiAwLjM7CiAgICAgICAgICB9KS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKS5hdHRyKCJjbGFzcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF9pOCA9PSAxKSB7CiAgICAgICAgICAgICAgcmV0dXJuICJ0ZW1wb3JhbCAiICsgc3RhZ2UgKyAnIGEyJyArIChfaiArIDEpOwogICAgICAgICAgICB9IGVsc2UgaWYgKF9pOCA9PSAyKSB7CiAgICAgICAgICAgICAgcmV0dXJuICJ0ZW1wb3JhbCAiICsgc3RhZ2UgKyAnIHAyJyArIChfaiArIDEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiAidGVtcG9yYWwgIiArIHN0YWdlICsgJyBkMicgKyAoX2ogKyAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgIHZhciB0eXBlID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMl1bMF07IC8vZCBhIHAKCiAgICAgICAgICAgIHZhciBvcmRlciA9IHBhcnNlSW50KCQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzJdWzJdKSAtIDE7IC8vIDEgMiAzIDQuLi4KICAgICAgICAgICAgLy/pnIDopoHmj5Dlj5blh7rmiYDmnInnm7jov57nmoTnur/ku6Xlj4piYXIKCiAgICAgICAgICAgIHZhciBrZXlzX3RlbXAgPSBbJ2RlX2FjJywgJ2FjX3BhJywgJ2RlX3BhJywgJ2RlX2FjX3BhJ107CgogICAgICAgICAgICBmb3IgKHZhciBfaTEzID0gMDsgX2kxMyA8IGtleXNfdGVtcC5sZW5ndGg7IF9pMTMrKykgewogICAgICAgICAgICAgIGZvciAodmFyIF9qNCA9IDA7IF9qNCA8IGNvcnJfc3RhdGlzdGljc19hbGxba2V5c190ZW1wW19pMTNdXS5sZW5ndGg7IF9qNCsrKSB7CiAgICAgICAgICAgICAgICB2YXIgbmFtZV90ZW1wID0ga2V5c190ZW1wW19pMTNdOwogICAgICAgICAgICAgICAgdmFyIHZhbHVlX3RlbXAgPSBwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsW2tleXNfdGVtcFtfaTEzXV1bX2o0XVswXSk7IC8vIOmmluWFiOeUu2JhcgoKICAgICAgICAgICAgICAgIGlmIChfaTEzID09IDMpIHsKICAgICAgICAgICAgICAgICAgdmFyIHRlbXAwID0gcGFyc2VJbnQodmFsdWVfdGVtcCAvIDEwMCk7CiAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMiA9IHZhbHVlX3RlbXAgJSAxMDsKICAgICAgICAgICAgICAgICAgdmFyIHRlbXAxID0gcGFyc2VJbnQoKHZhbHVlX3RlbXAgLSB0ZW1wMCAqIDEwMCkgLyAxMCk7CgogICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDApIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAxKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMikgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKCdhJyArICh0ZW1wMSArIDEpKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goJ3AnICsgKHRlbXAyICsgMSkpOwoKICAgICAgICAgICAgICAgICAgJCgnLnN0YWdlJyArIHN0YWdlICsgJy5kZV9hY19wYS4nICsgdmFsdWVfdGVtcCkuYXR0cigic3Ryb2tlIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmQnICsgKHRlbXAwICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuYScgKyAodGVtcDEgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5wJyArICh0ZW1wMiArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuZDInICsgKHRlbXAwICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5hMicgKyAodGVtcDEgKyAxKSkuYXR0cigiZmlsbCIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAyJyArICh0ZW1wMiArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHZhciBfdGVtcDMgPSBwYXJzZUludCh2YWx1ZV90ZW1wIC8gMTApOwoKICAgICAgICAgICAgICAgICAgdmFyIF90ZW1wNCA9IHZhbHVlX3RlbXAgJSAxMDsKCiAgICAgICAgICAgICAgICAgIHZhciBrMCA9ICdkJzsKICAgICAgICAgICAgICAgICAgdmFyIGsxID0gJ2EnOwogICAgICAgICAgICAgICAgICB2YXIga2sgPSAnZGVfYWMnOwoKICAgICAgICAgICAgICAgICAgaWYgKF9pMTMgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IF90ZW1wMykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IF90ZW1wNCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoX2kxMyA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2EnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3AnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gX3RlbXA0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGswID0gJ2EnOwogICAgICAgICAgICAgICAgICAgIGsxID0gJ3AnOwogICAgICAgICAgICAgICAgICAgIGtrID0gJ2FjX3BhJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF9pMTMgPT0gMikgewogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IF90ZW1wMykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IF90ZW1wNCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBrMSA9ICdwJzsKICAgICAgICAgICAgICAgICAgICBrayA9ICdkZV9wYSc7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goazAgKyAoX3RlbXAzICsgMSkpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChrMSArIChfdGVtcDQgKyAxKSk7CgogICAgICAgICAgICAgICAgICAkKCcuc3RhZ2UnICsgc3RhZ2UgKyAnLicgKyBrayArICIuIiArIHZhbHVlX3RlbXApLmF0dHIoInN0cm9rZSIsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAoX3RlbXAzICsgMSkpLmF0dHIoImZpbGwiLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsxICsgKF90ZW1wNCArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGswICsgJzInICsgKF90ZW1wMyArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsxICsgJzInICsgKF90ZW1wNCArIDEpKS5hdHRyKCJmaWxsIiwgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZV9zcGxpdCA9IHR5cGUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAnLic7CgogICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGNsYXNzX25hbWVfc3BsaXQubGVuZ3RoOyBjKyspIHsKICAgICAgICAgICAgICBjbGFzc19uYW1lICs9IGNsYXNzX25hbWVfc3BsaXRbY107CgogICAgICAgICAgICAgIGlmIChjIDwgY2xhc3NfbmFtZV9zcGxpdC5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICBjbGFzc19uYW1lICs9ICcuJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gLy9jb25zb2xlLmxvZyhjbGFzc19uYW1lLCBfdGhpcy5oaWdobGlnaHRfY2xhc3MpCgoKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcyhjbGFzc19uYW1lKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciB0eXBlID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMl1bMF07IC8vZCBhIHAKCiAgICAgICAgICAgIHZhciBvcmRlciA9IHBhcnNlSW50KCQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzJdWzJdKSAtIDE7IC8vIDEgMiAzIDQuLi4KICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0eXBlLCBvcmRlcikKICAgICAgICAgICAgLy/pnIDopoHmj5Dlj5blh7rmiYDmnInnm7jov57nmoTnur/ku6Xlj4piYXIKCiAgICAgICAgICAgIHZhciBrZXlzX3RlbXAgPSBbJ2RlX2FjJywgJ2FjX3BhJywgJ2RlX3BhJywgJ2RlX2FjX3BhJ107CgogICAgICAgICAgICBmb3IgKHZhciBfaTE0ID0gMDsgX2kxNCA8IGtleXNfdGVtcC5sZW5ndGg7IF9pMTQrKykgewogICAgICAgICAgICAgIGZvciAodmFyIF9qNSA9IDA7IF9qNSA8IGNvcnJfc3RhdGlzdGljc19hbGxba2V5c190ZW1wW19pMTRdXS5sZW5ndGg7IF9qNSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgbmFtZV90ZW1wID0ga2V5c190ZW1wW19pMTRdOwogICAgICAgICAgICAgICAgdmFyIHZhbHVlX3RlbXAgPSBwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsW2tleXNfdGVtcFtfaTE0XV1bX2o1XVswXSk7IC8vIOmmluWFiOeUu2JhcgoKICAgICAgICAgICAgICAgIGlmIChfaTE0ID09IDMpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZXQzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMCA9IHBhcnNlSW50KHZhbHVlX3RlbXAgLyAxMDApOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMiA9IHZhbHVlX3RlbXAgJSAxMDsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwYXJzZUludCgodmFsdWVfdGVtcCAtIHRlbXAwICogMTAwKSAvIDEwKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2QnKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlciAhPSB0ZW1wMSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUgPSBfdGhpcy5yZW1vdmVFbGVtZW50KF90aGlzLmFjdGl2ZV9wYXNzaXZlLCBbJ2EnICsgKHRlbXAxICsgMSksICdwJyArICh0ZW1wMiArIDEpXSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnN0YWdlJyArIHN0YWdlICsgJy5kZV9hY19wYS4nICsgdmFsdWVfdGVtcCkuYXR0cigic3Ryb2tlIiwgX3RoaXMubGluZV9jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmQnICsgKHRlbXAwICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcuZCcgKyAodGVtcDAgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5hJyArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmEnICsgKHRlbXAxICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcubm9uLXRlbXBvcmFsLicgKyBzdGFnZSArICcucCcgKyAodGVtcDIgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy5ub24tdGVtcG9yYWwuJyArIHN0YWdlICsgJy5wJyArICh0ZW1wMiArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuZDInICsgKHRlbXAwICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5kMicgKyAodGVtcDAgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmlzb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLmEyJyArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuYTInICsgKHRlbXAxICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJpc29uX2NvbG9yOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy5wMicgKyAodGVtcDIgKyAxKSkuYXR0cigiZmlsbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLnAyJyArICh0ZW1wMiArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcGFyaXNvbl9jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXN0cmlidXRpb25fY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0oKTsKCiAgICAgICAgICAgICAgICAgIGlmIChfcmV0MyA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB2YXIgX3JldDQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAwID0gcGFyc2VJbnQodmFsdWVfdGVtcCAvIDEwKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSB2YWx1ZV90ZW1wICUgMTA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGswID0gJ2QnOwogICAgICAgICAgICAgICAgICAgIHZhciBrMSA9ICdhJzsKICAgICAgICAgICAgICAgICAgICB2YXIga2sgPSAnZGVfYWMnOwoKICAgICAgICAgICAgICAgICAgICBpZiAoX2kxNCA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoX2kxNCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAncCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyICE9IHRlbXAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgazAgPSAnYSc7CiAgICAgICAgICAgICAgICAgICAgICBrMSA9ICdwJzsKICAgICAgICAgICAgICAgICAgICAgIGtrID0gJ2FjX3BhJzsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChfaTE0ID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdkJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdwJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gdGVtcDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBrMSA9ICdwJzsKICAgICAgICAgICAgICAgICAgICAgIGtrID0gJ2RlX3BhJzsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RoaXMucmVtb3ZlRWxlbWVudChfdGhpcy5hY3RpdmVfcGFzc2l2ZSwgW2swICsgKHRlbXAwICsgMSksIGsxICsgKHRlbXAxICsgMSldKTsKICAgICAgICAgICAgICAgICAgICAkKCcuc3RhZ2UnICsgc3RhZ2UgKyAnLicgKyBrayArICIuIiArIHZhbHVlX3RlbXApLmF0dHIoInN0cm9rZSIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArICh0ZW1wMCArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMCArICh0ZW1wMCArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLm5vbi10ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArICh0ZW1wMSArIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGswICsgJzInICsgKHRlbXAwICsgMSkpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgazAgKyAnMicgKyAodGVtcDAgKyAxKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJy50ZW1wb3JhbC4nICsgc3RhZ2UgKyAnLicgKyBrMSArICcyJyArICh0ZW1wMSArIDEpKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIGsxICsgJzInICsgKHRlbXAxICsgMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICAgICAgaWYgKF9yZXQ0ID09PSAiY29udGludWUiKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgICAgICB5X3N0YXJ0ICs9IGhlaWdodF9zY2FsZSArIDM7CiAgICAgICAgfTsKCiAgICAgICAgZm9yICh2YXIgX2ogPSAwOyBfaiA8IGtleXNfaS5sZW5ndGg7IF9qKyspIHsKICAgICAgICAgIF9sb29wNChfaik7CiAgICAgICAgfQoKICAgICAgICBzdmdfMy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgMCkuYXR0cigieSIsICh5X3N0YXJ0ICsgeV9zdGFydDIpIC8gMikuYXR0cigiZm9udC1zaXplIiwgMTQpLnRleHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF9pOCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAnZCc7CiAgICAgICAgICB9IGVsc2UgaWYgKF9pOCA9PSAxKSB7CiAgICAgICAgICAgIHJldHVybiAncCc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gJ3InOwogICAgICAgICAgfQogICAgICAgIH0pLmF0dHIoIm9wYWNpdHkiLCAwLjIpOwogICAgICAgIHlfc3RhcnQgKz0gMTA7CiAgICAgIH07CgogICAgICBmb3IgKHZhciBfaTggPSAwOyBfaTggPCBkYXRhX3N0YXRpc3RpY3NfYWxsLmxlbmd0aDsgX2k4KyspIHsKICAgICAgICBfbG9vcChfaTgpOwogICAgICB9IC8vIOeUu+WPmOmHj+S5i+mXtOeahGludGVyYWN0aW9uCgoKICAgICAgdmFyIHN2ZzIgPSBzdmdfc3RhZ2UuYXBwZW5kKCJnIikuYXR0cigid2lkdGgiLCAzMDApLmF0dHIoImhlaWdodCIsIDI4MCkuYXR0cigiY2xhc3MiLCAic3RhZ2VfaW50ZXJhY3Rpb24iICsgc3RhZ2UpLmF0dHIoImlkIiwgInN0YWdlX3NpbmdsZSIgKyBzdGFnZSkuc3R5bGUoInotaW5kZXgiLCAxKTsgLy8g5YWI55S75Lik5Liq5Lik5Liq5LiA6LW35Ye6546w55qE77yM5bm25LiU5qCH5rOo5Ye65pyA5aSn55qE6YKj5LiA5Liq77yM5YW25LuW55qEb3BhY2l0eeiwg+aVtOW+iOS9jgoKICAgICAgdmFyIGtleXNfYyA9IFsnZGVfYWMnLCAnYWNfcGEnLCAnZGVfcGEnXTsKICAgICAgdmFyIGNvcl90ZW1wX2tleXMgPSBPYmplY3Qua2V5cyhjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddKTsgLy9jb25zb2xlLmxvZyhjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddKQoKICAgICAgdmFyIGxpbmVHZW5lcmF0b3IgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLng7CiAgICAgIH0pLnkoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC55OwogICAgICB9KS5jdXJ2ZShkMy5jdXJ2ZUxpbmVhcik7CiAgICAgIHZhciBoZWlnaHRfY3VydmVfc2NhbGUxID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzYwLCAxNTBdKS5yYW5nZShbMTAsIDIwXSk7CiAgICAgIHZhciB4X2xlZnRfbGlzdCA9IFtdOwoKICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihfaTkpIHsKICAgICAgICB2YXIgY29yX3RlbXAgPSBjb3JyX3N0YXRpc3RpY3NfYWxsW2tleXNfY1tfaTldXTsKCiAgICAgICAgdmFyIF9sb29wNSA9IGZ1bmN0aW9uIF9sb29wNShfajYpIHsKICAgICAgICAgIHZhciB0ZW1wID0gcGFyc2VJbnQoY29yX3RlbXBbX2o2XVswXSk7CiAgICAgICAgICB2YXIgdGVtcDAgPSBwYXJzZUludCh0ZW1wIC8gMTApLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgdGVtcDEgPSAodGVtcCAlIDEwKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIGtleV8xID0gJyc7CiAgICAgICAgICB2YXIga2V5XzIgPSAnJzsKCiAgICAgICAgICBpZiAoX2k5ID09IDApIHsKICAgICAgICAgICAga2V5XzEgPSAnMCcgKyB0ZW1wMDsKICAgICAgICAgICAga2V5XzIgPSAnMScgKyB0ZW1wMTsKICAgICAgICAgICAgdmFyIGZsYWcgPSAwOwoKICAgICAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCBjb3JfdGVtcF9rZXlzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygiKioqIiwgKHBhcnNlSW50KGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX2FjX3BhJ11bY29yX3RlbXBfa2V5c1t0XV1bMF0pIC0gcGFyc2VJbnQoY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfYWNfcGEnXVtjb3JfdGVtcF9rZXlzW3RdXVswXSklMTApLzEwKQogICAgICAgICAgICAgIGlmIChwYXJzZUludChjb3JfdGVtcFtfajZdKSA9PSAocGFyc2VJbnQoY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfYWNfcGEnXVtjb3JfdGVtcF9rZXlzW3RdXVswXSkgLSBwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbdF1dWzBdKSAlIDEwKSAvIDEwKSB7CiAgICAgICAgICAgICAgICBmbGFnID0gMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGZsYWcgPT0gMSkgewogICAgICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKF9pOSA9PSAxKSB7CiAgICAgICAgICAgIGtleV8xID0gJzEnICsgdGVtcDA7CiAgICAgICAgICAgIGtleV8yID0gJzInICsgdGVtcDE7CiAgICAgICAgICAgIHZhciBfZmxhZzMgPSAwOwoKICAgICAgICAgICAgZm9yICh2YXIgX3QgPSAwOyBfdCA8IGNvcl90ZW1wX2tleXMubGVuZ3RoOyBfdCsrKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygiKioqIiwgcGFyc2VJbnQoY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfYWNfcGEnXVtjb3JfdGVtcF9rZXlzW3RdXVswXSkgLSBwYXJzZUludChwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbdF1dWzBdKS8xMDApICogMTAwKQogICAgICAgICAgICAgIGlmIChwYXJzZUludChjb3JfdGVtcFtfajZdKSA9PSBwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbX3RdXVswXSkgLSBwYXJzZUludChwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbX3RdXVswXSkgLyAxMDApICogMTAwKSB7CiAgICAgICAgICAgICAgICBfZmxhZzMgPSAxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoX2ZsYWczID09IDEpIHsKICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAga2V5XzEgPSAnMCcgKyB0ZW1wMDsKICAgICAgICAgICAga2V5XzIgPSAnMicgKyB0ZW1wMTsKICAgICAgICAgICAgdmFyIF9mbGFnNCA9IDA7CgogICAgICAgICAgICBmb3IgKHZhciBfdDIgPSAwOyBfdDIgPCBjb3JfdGVtcF9rZXlzLmxlbmd0aDsgX3QyKyspIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCIqKioiLCBwYXJzZUludChwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbdF1dWzBdKS8xMDApICogMTApCiAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGNvcl90ZW1wW19qNl0pID09IHBhcnNlSW50KFtjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbX3QyXV1bMF1dWzBdKSAlIDEwICsgcGFyc2VJbnQocGFyc2VJbnQoY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfYWNfcGEnXVtjb3JfdGVtcF9rZXlzW190Ml1dWzBdKSAvIDEwMCkgKiAxMCkgewogICAgICAgICAgICAgICAgX2ZsYWc0ID0gMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKF9mbGFnNCA9PSAxKSB7CiAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgeTEgPSBwb3NpdGlvbltrZXlfMV07CiAgICAgICAgICB2YXIgeTIgPSBwb3NpdGlvbltrZXlfMl07CiAgICAgICAgICB2YXIgeF9sZWZ0ID0geF9zdGFydDEgLSBoZWlnaHRfY3VydmVfc2NhbGUxKHkyIC0geTEpOwogICAgICAgICAgdmFyIGZsYWdfeGwgPSAwOwoKICAgICAgICAgIGZvciAodmFyIHhsID0gMDsgeGwgPCB4X2xlZnRfbGlzdC5sZW5ndGg7IHhsKyspIHsKICAgICAgICAgICAgaWYgKE1hdGguYWJzKHhfbGVmdF9saXN0W3hsXSAtIHhfbGVmdCkgPCAzKSB7CiAgICAgICAgICAgICAgeF9sZWZ0IC09IDM7CiAgICAgICAgICAgICAgeF9sZWZ0X2xpc3QucHVzaCh4X2xlZnQpOwogICAgICAgICAgICAgIGZsYWdfeGwgPSAxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGZsYWdfeGwgPT0gMCkgewogICAgICAgICAgICB4X2xlZnRfbGlzdC5wdXNoKHhfbGVmdCk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHhfcmlnaHQgPSB4X3N0YXJ0MSAtIDU7CiAgICAgICAgICB2YXIgZGF0YTEgPSBbewogICAgICAgICAgICB4OiB4X3JpZ2h0LAogICAgICAgICAgICB5OiB5MQogICAgICAgICAgfSwgewogICAgICAgICAgICB4OiB4X2xlZnQsCiAgICAgICAgICAgIHk6IHkxCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHg6IHhfbGVmdCwKICAgICAgICAgICAgeTogeTIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgeDogeF9yaWdodCwKICAgICAgICAgICAgeTogeTIKICAgICAgICAgIH1dOyAvL+W8gOWni+iuoeeul2NvLW9jY3VyZW5jZeWHuueOsOeahOaDheWGtQoKICAgICAgICAgIHZhciBjb3JyX3RlbXBvcmFsID0gW107CgogICAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBjb3JyX3N0YXRpc3RpY3MubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgdmFyIGZsYWdfdGVtcCA9IDA7CgogICAgICAgICAgICBmb3IgKHZhciBxID0gMDsgcSA8IGNvcnJfc3RhdGlzdGljc1twXVtrZXlzX2NbX2k5XV0ubGVuZ3RoOyBxKyspIHsKICAgICAgICAgICAgICBpZiAoY29ycl9zdGF0aXN0aWNzW3BdW2tleXNfY1tfaTldXVtxXVswXSA9PSBjb3JfdGVtcFtfajZdWzBdKSB7CiAgICAgICAgICAgICAgICBmbGFnX3RlbXAgPSAxOwogICAgICAgICAgICAgICAgY29ycl90ZW1wb3JhbC5wdXNoKGNvcnJfc3RhdGlzdGljc1twXVtrZXlzX2NbX2k5XV1bcV1bMV0pOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZmxhZ190ZW1wID09IDApIHsKICAgICAgICAgICAgICBjb3JyX3RlbXBvcmFsLnB1c2goMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDAuNV0pLnJhbmdlKFtoZWlnaHRfc2NhbGUsIDBdKTsKICAgICAgICAgIHZhciBhcmVhID0gZDMuYXJlYSgpLngoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIGQueDsKICAgICAgICAgIH0pLnkwKGhlaWdodF9zY2FsZSkueTEoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIHlTY2FsZShkLnkpOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgdGVtcG9yYWxfdGVtcCA9IFtdOwogICAgICAgICAgdmFyIHRlbXBvcmFsX2hvcml6b24gPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBfcDQgPSAwOyBfcDQgPCBjb3JyX3RlbXBvcmFsLmxlbmd0aDsgX3A0KyspIHsKICAgICAgICAgICAgdGVtcG9yYWxfdGVtcC5wdXNoKHsKICAgICAgICAgICAgICB4OiB4X2xlZnQgKyA1ICsgX3A0ICogd2lkdGhfc2NhbGUgLyBkYXRhX3N0YXRpc3RpY3MubGVuZ3RoLAogICAgICAgICAgICAgIHk6IGNvcnJfdGVtcG9yYWxbX3A0XQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGVtcG9yYWxfaG9yaXpvbi5wdXNoKGNvcnJfdGVtcG9yYWxbX3A0XSk7CiAgICAgICAgICB9IC8v5byA5aeL55S7Y28tdGVtcG9yYWwKCgogICAgICAgICAgdmFyIHN2Z190ID0gc3ZnMi5hcHBlbmQoJ2cnKS5hdHRyKCJjbGFzcyIsICJjb190ZW0iICsgc3RhZ2UgKyBfaTkgKyBjb3JfdGVtcFtfajZdWzBdKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDUsIDApIikuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKTsKICAgICAgICAgIHN2Z190LmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X2xlZnQgKyAyKS5hdHRyKCJ5IiwgKHkxICsgeTIpIC8gMiArIDUpLmF0dHIoImhlaWdodCIsIGhlaWdodF9zY2FsZSkuYXR0cigid2lkdGgiLCB3aWR0aF9zY2FsZSAtIDUpLmF0dHIoImZpbGwiLCAnd2hpdGUnKS5hdHRyKCJjbGFzcyIsICJ0ZW1wb3JhbCIpLmF0dHIoInN0cm9rZSIsICIjNWI1YjViIik7CiAgICAgICAgICBzdmdfdC5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9sZWZ0ICsgMikuYXR0cigieSIsICh5MSArIHkyKSAvIDIgKyA1KS5hdHRyKCJoZWlnaHQiLCBoZWlnaHRfc2NhbGUpLmF0dHIoIndpZHRoIiwgd2lkdGhfc2NhbGUgLSA1KS5hdHRyKCJmaWxsIiwgJyM1YjViNWInKS5hdHRyKCJjbGFzcyIsICJ0ZW1wb3JhbCIpLmF0dHIoInN0cm9rZSIsICJibGFjayIpLmF0dHIoIm9wYWNpdHkiLCAwLjA1KTsKICAgICAgICAgIHZhciB0aHJlc2hvbGRzID0gWzAuMSwgMC4yLCAwLjMsIDAuNCwgMC41XTsKICAgICAgICAgIHZhciB5U2NhbGUyID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDAuMV0pLnJhbmdlKFtoZWlnaHRfc2NhbGUsIDBdKTsKICAgICAgICAgIHZhciBhcmVhR2VuZXJhdG9yID0gZDMuYXJlYSgpLngoZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIHhfc3RhcnQxICsgaSAqICh3aWR0aF9zY2FsZSArIDEwKSAvIGRhdGFfc3RhdGlzdGljcy5sZW5ndGg7CiAgICAgICAgICB9KS55MChoZWlnaHRfc2NhbGUpLnkxKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIHJldHVybiB5U2NhbGUyKGQpOwogICAgICAgICAgfSkuY3VydmUoZDMuY3VydmVCYXNpcyk7CgogICAgICAgICAgdmFyIGxheWVycyA9IF90aGlzLnNwbGl0RGF0YUJ5VGhyZXNob2xkcyh0ZW1wb3JhbF9ob3Jpem9uLCB0aHJlc2hvbGRzLCAwLjEpOwoKICAgICAgICAgIHZhciBzdmdfdF8xID0gc3ZnX3QuYXBwZW5kKCdnJykuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgKHhfbGVmdCAtIDQ4KSArICIsIiArICgoeTEgKyB5MikgLyAyICsgNSkgKyAiKSIpOwogICAgICAgICAgc3ZnX3RfMS5zZWxlY3RBbGwoIi5sYXllcl9jbyIpLmRhdGEobGF5ZXJzKS5lbnRlcigpLmFwcGVuZCgicGF0aCIpLmF0dHIoImNsYXNzIiwgImxheWVyIikuYXR0cigiZCIsIGFyZWFHZW5lcmF0b3IpLmF0dHIoIm9wYWNpdHkiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICByZXR1cm4gKGkgKyAxKSAqIDAuMzsKICAgICAgICAgIH0pLmF0dHIoImZpbGwiLCBfdGhpcy5jb3JfdGVtcG9yYWxfY29sb3IpLmF0dHIoImNsYXNzIiwgInRlbXBvcmFsIik7IC8vLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIikKCiAgICAgICAgICBzdmcyLmFwcGVuZCgiY2lyY2xlIikuYXR0cigiY3giLCB4X2xlZnQpLmF0dHIoImN5IiwgKHkxICsgeTIpIC8gMikuYXR0cigiciIsIDIpLmF0dHIoImZpbGwiLCBfdGhpcy5jaXJjbGVfY29sb3IpLmF0dHIoIm9wYWNpdHkiLCAwLjQpLmF0dHIoImNsYXNzIiwgInRlbXBvcmFsICIgKyAic3RhZ2UiICsgc3RhZ2UgKyAiICIgKyBrZXlzX2NbX2k5XSArICIgIiArIGNvcl90ZW1wW19qNl1bMF0pLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIikub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQoJy5jb190ZW0nICsgc3RhZ2UgKyBfaTkgKyBjb3JfdGVtcFtfajZdWzBdKS5hdHRyKCJ2aXNpYmlsaXR5IiwgInZpc2FibGUiKTsKICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZSA9ICQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZTEgPSBjbGFzc19uYW1lWzJdOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZTIgPSBwYXJzZUludChjbGFzc19uYW1lWzNdKTsKICAgICAgICAgICAgdmFyIGZpcnN0X3R5cGUgPSAocGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgICB2YXIgc2Vjb25kX3R5cGUgPSAoY2xhc3NfbmFtZTIgJSAxMCArIDEpLnRvU3RyaW5nKCk7CgogICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSk7CgogICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpOwoKICAgICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgIjIiICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgfSkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQoJy5jb190ZW0nICsgc3RhZ2UgKyBfaTkgKyBjb3JfdGVtcFtfajZdWzBdKS5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpOwogICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0cm9rZScsIF90aGlzLmxpbmVfY29sb3IpOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZSA9ICQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZTEgPSBjbGFzc19uYW1lWzJdOwogICAgICAgICAgICB2YXIgY2xhc3NfbmFtZTIgPSBwYXJzZUludChjbGFzc19uYW1lWzNdKTsKICAgICAgICAgICAgdmFyIGZpcnN0X3R5cGUgPSAocGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgICB2YXIgc2Vjb25kX3R5cGUgPSAoY2xhc3NfbmFtZTIgJSAxMCArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RoaXMucmVtb3ZlRWxlbWVudChfdGhpcy5hY3RpdmVfcGFzc2l2ZSwgW2NsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSwgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZV0pOyAvL2NvbnNvbGUubG9nKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0rZmlyc3RfdHlwZSkKCiAgICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgIjIiICsgZmlyc3RfdHlwZSkpIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKSkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpKSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKSkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgc3ZnMi5hcHBlbmQoInBhdGgiKS5kYXR1bShkYXRhMSkuYXR0cigiZmlsbCIsICJub25lIikuYXR0cigic3Ryb2tlIiwgX3RoaXMubGluZV9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX2o2ICE9IDApIHsKICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gMjsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuYXR0cigib3BhY2l0eSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF9qNiAhPSAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIDAuMzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gMC41OwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5hdHRyKCJkIiwgbGluZUdlbmVyYXRvcikuYXR0cigiY2xhc3MiLCAic3RhZ2UiICsgc3RhZ2UgKyAiICIgKyBrZXlzX2NbX2k5XSArICIgIiArIGNvcl90ZW1wW19qNl1bMF0pLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0cm9rZScsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lMSA9IGNsYXNzX25hbWVbMV07CiAgICAgICAgICAgIHZhciBjbGFzc19uYW1lMiA9IHBhcnNlSW50KGNsYXNzX25hbWVbMl0pOwogICAgICAgICAgICB2YXIgZmlyc3RfdHlwZSA9IChwYXJzZUludChjbGFzc19uYW1lMiAvIDEwKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHZhciBzZWNvbmRfdHlwZSA9IChjbGFzc19uYW1lMiAlIDEwICsgMSkudG9TdHJpbmcoKTsKCiAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKTsKCiAgICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSk7CgogICAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICB9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5saW5lX2NvbG9yKTsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWUxID0gY2xhc3NfbmFtZVsxXTsKICAgICAgICAgICAgdmFyIGNsYXNzX25hbWUyID0gcGFyc2VJbnQoY2xhc3NfbmFtZVsyXSk7CiAgICAgICAgICAgIHZhciBmaXJzdF90eXBlID0gKHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgICAgdmFyIHNlY29uZF90eXBlID0gKGNsYXNzX25hbWUyICUgMTAgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZSA9IF90aGlzLnJlbW92ZUVsZW1lbnQoX3RoaXMuYWN0aXZlX3Bhc3NpdmUsIFtjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUsIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGVdKTsgLy9jb25zb2xlLmxvZygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdK2ZpcnN0X3R5cGUpCgogICAgICAgICAgICAkKCcudGVtcG9yYWwuJyArIHN0YWdlICsgJy4nICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygnLnRlbXBvcmFsLicgKyBzdGFnZSArICcuJyArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKSkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpKSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkpIHsKICAgICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpKSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgZm9yICh2YXIgX2o2ID0gMDsgX2o2IDwgY29yX3RlbXAubGVuZ3RoOyBfajYrKykgewogICAgICAgICAgdmFyIF9yZXQ1ID0gX2xvb3A1KF9qNik7CgogICAgICAgICAgaWYgKF9yZXQ1ID09PSAiY29udGludWUiKSBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCBrZXlzX2MubGVuZ3RoOyBfaTkrKykgewogICAgICAgIF9sb29wMihfaTkpOwogICAgICB9IC8v55S75LiJ5Liq5LiA6LW35Ye6546w55qECgoKICAgICAgdmFyIGhlaWdodF9jdXJ2ZV9zY2FsZTIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbODAsIDE5MF0pLnJhbmdlKFsxNSwgMzBdKTsKICAgICAgdmFyIGJvcmRlciA9IDM7CgogICAgICB2YXIgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKF9pMTApIHsKICAgICAgICB2YXIgY29yX3RlbXAgPSBwYXJzZUludChjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW2Nvcl90ZW1wX2tleXNbX2kxMF1dWzBdKTsKICAgICAgICB2YXIgdGVtcDAgPSBwYXJzZUludChjb3JfdGVtcCAvIDEwMCkudG9TdHJpbmcoKTsKICAgICAgICB2YXIgdGVtcDEgPSBwYXJzZUludCgoY29yX3RlbXAgLSBwYXJzZUludCh0ZW1wMCkgKiAxMDApIC8gMTApLnRvU3RyaW5nKCk7CiAgICAgICAgdmFyIHRlbXAyID0gKGNvcl90ZW1wICUgMTApLnRvU3RyaW5nKCk7CiAgICAgICAgdmFyIHkwID0gcG9zaXRpb25bJzAnICsgdGVtcDBdOwogICAgICAgIHZhciB5MSA9IHBvc2l0aW9uWycxJyArIHRlbXAxXTsKICAgICAgICB2YXIgeTIgPSBwb3NpdGlvblsnMicgKyB0ZW1wMl07CiAgICAgICAgdmFyIHlfbSA9ICh5MCArIHkyKSAvIDI7CiAgICAgICAgdmFyIHhfbGVmdCA9IHhfc3RhcnQxIC0gaGVpZ2h0X2N1cnZlX3NjYWxlMih5MiAtIHkwKTsKICAgICAgICB2YXIgeF9yaWdodCA9IHhfc3RhcnQxIC0gNTsKICAgICAgICB2YXIgZGF0YSA9IFt7CiAgICAgICAgICB4OiB4X3JpZ2h0LAogICAgICAgICAgeTogeTAKICAgICAgICB9LCB7CiAgICAgICAgICB4OiB4X2xlZnQgKyBib3JkZXIsCiAgICAgICAgICB5OiB5MAogICAgICAgIH0sIHsKICAgICAgICAgIHg6IHhfbGVmdCwKICAgICAgICAgIHk6IHkwICsgYm9yZGVyCiAgICAgICAgfSwgewogICAgICAgICAgeDogeF9sZWZ0LAogICAgICAgICAgeTogeTIgLSBib3JkZXIKICAgICAgICB9LCB7CiAgICAgICAgICB4OiB4X2xlZnQgKyBib3JkZXIsCiAgICAgICAgICB5OiB5MgogICAgICAgIH0sIHsKICAgICAgICAgIHg6IHhfcmlnaHQsCiAgICAgICAgICB5OiB5MgogICAgICAgIH1dOyAvL+W8gOWni+iuoeeul2NvLW9jY3VyZW5jZeWHuueOsOeahOaDheWGtQoKICAgICAgICB2YXIgY29ycl90ZW1wb3JhbCA9IFtdOwoKICAgICAgICBmb3IgKHZhciBwID0gMDsgcCA8IGNvcnJfc3RhdGlzdGljcy5sZW5ndGg7IHArKykgewogICAgICAgICAgdmFyIGZsYWdfdGVtcCA9IDA7CgogICAgICAgICAgZm9yICh2YXIgcSA9IDA7IHEgPCBjb3JyX3N0YXRpc3RpY3NbcF1bJ2RlX2FjX3BhJ10ubGVuZ3RoOyBxKyspIHsKICAgICAgICAgICAgaWYgKGNvcnJfc3RhdGlzdGljc1twXVsnZGVfYWNfcGEnXVtxXVswXSA9PSBjb3JfdGVtcCkgewogICAgICAgICAgICAgIGZsYWdfdGVtcCA9IDE7CiAgICAgICAgICAgICAgY29ycl90ZW1wb3JhbC5wdXNoKGNvcnJfc3RhdGlzdGljc1twXVtrZXlzX2NbX2kxMF1dW3FdWzFdKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChmbGFnX3RlbXAgPT0gMCkgewogICAgICAgICAgICBjb3JyX3RlbXBvcmFsLnB1c2goMCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDFdKS5yYW5nZShbaGVpZ2h0X3NjYWxlLCAwXSk7CiAgICAgICAgdmFyIGFyZWEgPSBkMy5hcmVhKCkueChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIGQueDsKICAgICAgICB9KS55MChoZWlnaHRfc2NhbGUpLnkxKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4geVNjYWxlKGQueSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHRlbXBvcmFsX3RlbXAgPSBbXTsKICAgICAgICB2YXIgdGVtcG9yYWxfaG9yaXpvbiA9IFtdOwoKICAgICAgICBmb3IgKHZhciBfcDUgPSAwOyBfcDUgPCBjb3JyX3RlbXBvcmFsLmxlbmd0aDsgX3A1KyspIHsKICAgICAgICAgIHRlbXBvcmFsX3RlbXAucHVzaCh7CiAgICAgICAgICAgIHg6IHhfbGVmdCArIDUgKyBfcDUgKiB3aWR0aF9zY2FsZSAvIGRhdGFfc3RhdGlzdGljcy5sZW5ndGgsCiAgICAgICAgICAgIHk6IGNvcnJfdGVtcG9yYWxbX3A1XQogICAgICAgICAgfSk7CiAgICAgICAgICB0ZW1wb3JhbF9ob3Jpem9uLnB1c2goY29ycl90ZW1wb3JhbFtfcDVdKTsKICAgICAgICB9IC8v5byA5aeL55S7Y28tdGVtcG9yYWwKCgogICAgICAgIHZhciBzdmdfdCA9IHN2ZzIuYXBwZW5kKCdnJykuYXR0cigiY2xhc3MiLCAiM19jb190ZW0iICsgc3RhZ2UgKyBjb3JfdGVtcCkuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDEwLCAwKSIpOwogICAgICAgIHN2Z190LmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X2xlZnQgKyA1KS5hdHRyKCJ5IiwgKHkwICsgeTIpIC8gMiArIDUpLmF0dHIoImhlaWdodCIsIGhlaWdodF9zY2FsZSkuYXR0cigid2lkdGgiLCB3aWR0aF9zY2FsZSAtIDUpLmF0dHIoImZpbGwiLCAnd2hpdGUnKS5hdHRyKCJjbGFzcyIsICJ0ZW1wb3JhbCIpLmF0dHIoInN0cm9rZSIsICIjNWI1YjViIik7CiAgICAgICAgc3ZnX3QuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfbGVmdCArIDUpLmF0dHIoInkiLCAoeTAgKyB5MikgLyAyICsgNSkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0X3NjYWxlKS5hdHRyKCJ3aWR0aCIsIHdpZHRoX3NjYWxlIC0gNSkuYXR0cigiZmlsbCIsICcjNWI1YjViJykuYXR0cigiY2xhc3MiLCAidGVtcG9yYWwiKS5hdHRyKCJzdHJva2UiLCAiYmxhY2siKS5hdHRyKCJvcGFjaXR5IiwgMC4wNSk7CiAgICAgICAgdmFyIHRocmVzaG9sZHMgPSBbMC4xLCAwLjIsIDAuMywgMC40LCAwLjVdOwogICAgICAgIHZhciB5U2NhbGUyID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDAuMV0pLnJhbmdlKFtoZWlnaHRfc2NhbGUsIDBdKTsKICAgICAgICB2YXIgYXJlYUdlbmVyYXRvciA9IGQzLmFyZWEoKS54KGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICByZXR1cm4geF9zdGFydDEgKyBpICogKHdpZHRoX3NjYWxlICsgMTApIC8gZGF0YV9zdGF0aXN0aWNzLmxlbmd0aDsKICAgICAgICB9KS55MChoZWlnaHRfc2NhbGUpLnkxKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4geVNjYWxlMihkKTsKICAgICAgICB9KS5jdXJ2ZShkMy5jdXJ2ZUJhc2lzKTsKCiAgICAgICAgdmFyIGxheWVycyA9IF90aGlzLnNwbGl0RGF0YUJ5VGhyZXNob2xkcyh0ZW1wb3JhbF9ob3Jpem9uLCB0aHJlc2hvbGRzLCAwLjEpOwoKICAgICAgICB2YXIgc3ZnX3RfMSA9IHN2Z190LmFwcGVuZCgnZycpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArICh4X2xlZnQgLSA0NSkgKyAiLCIgKyAoKHkwICsgeTIpIC8gMiArIDUpICsgIikiKTsKICAgICAgICBzdmdfdF8xLnNlbGVjdEFsbCgiLmxheWVyX2NvIikuZGF0YShsYXllcnMpLmVudGVyKCkuYXBwZW5kKCJwYXRoIikuYXR0cigiY2xhc3MiLCAibGF5ZXIiKS5hdHRyKCJkIiwgYXJlYUdlbmVyYXRvcikuYXR0cigib3BhY2l0eSIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICByZXR1cm4gKGkgKyAxKSAqIDAuMzsKICAgICAgICB9KS5hdHRyKCJmaWxsIiwgX3RoaXMuY29yX3RlbXBvcmFsX2NvbG9yKS5hdHRyKCJjbGFzcyIsICJ0ZW1wb3JhbCIpOyAvLy5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpCgogICAgICAgIHN2ZzIuYXBwZW5kKCJjaXJjbGUiKS5hdHRyKCJjeCIsIHhfbGVmdCkuYXR0cigiY3kiLCAoeTAgKyB5MikgLyAyKS5hdHRyKCJyIiwgMykuYXR0cigiZmlsbCIsIF90aGlzLmNpcmNsZV9jb2xvcikuYXR0cigib3BhY2l0eSIsIDAuNSkuYXR0cigiY2xhc3MiLCAidGVtcG9yYWwgIiArICJzdGFnZSIgKyBzdGFnZSArICcgZGVfYWNfcGEgJyArIGNvcl90ZW1wKS5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgJCgiLjNfY29fdGVtIiArIHN0YWdlICsgY29yX3RlbXApLmF0dHIoInZpc2liaWxpdHkiLCAidmlzYWJsZSIpOwogICAgICAgICAgdmFyIGNsYXNzX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgIHZhciBjbGFzc19uYW1lMSA9IGNsYXNzX25hbWVbMl07CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTIgPSBwYXJzZUludChjbGFzc19uYW1lWzNdKTsKICAgICAgICAgICQoIi5zdGFnZSIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxICsgIi4iICsgY2xhc3NfbmFtZTIpLmF0dHIoJ3N0cm9rZScsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICB2YXIgZmlyc3RfdHlwZSA9IChwYXJzZUludChjbGFzc19uYW1lMiAvIDEwMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHRoaXJkX3R5cGUgPSAoY2xhc3NfbmFtZTIgJSAxMCArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgc2Vjb25kX3R5cGUgPSAocGFyc2VJbnQoKGNsYXNzX25hbWUyIC0gcGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMDApICogMTAwKSAvIDEwKSArIDEpLnRvU3RyaW5nKCk7CgogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpOwoKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSk7CgogICAgICAgICAgX3RoaXMuYWN0aXZlX3Bhc3NpdmUucHVzaChjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpOwoKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArICIyIiArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIF90aGlzLnN0cm9rZV9jb2xvcik7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgJCgiLjNfY29fdGVtIiArIHN0YWdlICsgY29yX3RlbXApLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZSA9ICQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpOwogICAgICAgICAgdmFyIGNsYXNzX25hbWUxID0gY2xhc3NfbmFtZVsyXTsKICAgICAgICAgIHZhciBjbGFzc19uYW1lMiA9IHBhcnNlSW50KGNsYXNzX25hbWVbM10pOwogICAgICAgICAgJCgiLnN0YWdlIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTEgKyAiLiIgKyBjbGFzc19uYW1lMikuYXR0cignc3Ryb2tlJywgX3RoaXMubGluZV9jb2xvcik7CiAgICAgICAgICB2YXIgZmlyc3RfdHlwZSA9IChwYXJzZUludChjbGFzc19uYW1lMiAvIDEwMCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHRoaXJkX3R5cGUgPSAoY2xhc3NfbmFtZTIgJSAxMCArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgc2Vjb25kX3R5cGUgPSAocGFyc2VJbnQoKGNsYXNzX25hbWUyIC0gcGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMDApICogMTAwKSAvIDEwKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZSA9IF90aGlzLnJlbW92ZUVsZW1lbnQoX3RoaXMuYWN0aXZlX3Bhc3NpdmUsIFtjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUsIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUsIGNsYXNzX25hbWUxWzZdICsgdGhpcmRfdHlwZV0pOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgIjIiICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgIjIiICsgZmlyc3RfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyAiMiIgKyBzZWNvbmRfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArICIyIiArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArICIyIiArIHRoaXJkX3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpKSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuY29tcGFyaXNvbl9jb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGlzdHJpYnV0aW9uX2NvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgdGhpcmRfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBzdmcyLmFwcGVuZCgibGluZSIpLmF0dHIoIngxIiwgeF9yaWdodCkuYXR0cigieDIiLCB4X2xlZnQpLmF0dHIoInkxIiwgeTEpLmF0dHIoInkyIiwgKHkwICsgeTIpIC8gMikuYXR0cigiZmlsbCIsICJub25lIikuYXR0cigic3Ryb2tlIiwgX3RoaXMubGluZV9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF9pMTAgPiAwKSB7CiAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIDM7CiAgICAgICAgICB9CiAgICAgICAgfSkuYXR0cigib3BhY2l0eSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfaTEwID4gMCkgewogICAgICAgICAgICByZXR1cm4gMC4zOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIDAuNTsKICAgICAgICAgIH0KICAgICAgICB9KS5hdHRyKCJjbGFzcyIsICJzdGFnZSIgKyBzdGFnZSArICcgZGVfYWNfcGEgJyArIGNvcl90ZW1wKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTEgPSBjbGFzc19uYW1lWzFdOwogICAgICAgICAgdmFyIGNsYXNzX25hbWUyID0gcGFyc2VJbnQoY2xhc3NfbmFtZVsyXSk7CiAgICAgICAgICAkKCIuc3RhZ2UiICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMSArICIuIiArIGNsYXNzX25hbWUyKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgdmFyIGZpcnN0X3R5cGUgPSAocGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMDApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciB0aGlyZF90eXBlID0gKGNsYXNzX25hbWUyICUgMTAgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHNlY29uZF90eXBlID0gKHBhcnNlSW50KChjbGFzc19uYW1lMiAtIHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTAwKSAqIDEwMCkgLyAxMCkgKyAxKS50b1N0cmluZygpOwoKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKTsKCiAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpOwoKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlKTsKCiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArICIyIiArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICB9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTEgPSBjbGFzc19uYW1lWzFdOwogICAgICAgICAgdmFyIGNsYXNzX25hbWUyID0gcGFyc2VJbnQoY2xhc3NfbmFtZVsyXSk7CiAgICAgICAgICAkKCIuc3RhZ2UiICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMSArICIuIiArIGNsYXNzX25hbWUyKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5saW5lX2NvbG9yKTsKICAgICAgICAgIHZhciBmaXJzdF90eXBlID0gKHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTAwKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgdGhpcmRfdHlwZSA9IChjbGFzc19uYW1lMiAlIDEwICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciBzZWNvbmRfdHlwZSA9IChwYXJzZUludCgoY2xhc3NfbmFtZTIgLSBwYXJzZUludChjbGFzc19uYW1lMiAvIDEwMCkgKiAxMDApIC8gMTApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RoaXMucmVtb3ZlRWxlbWVudChfdGhpcy5hY3RpdmVfcGFzc2l2ZSwgW2NsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSwgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSwgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlXSk7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pLmxvd2VyKCk7CiAgICAgICAgc3ZnMi5hcHBlbmQoInBhdGgiKS5kYXR1bShkYXRhKS5hdHRyKCJmaWxsIiwgIm5vbmUiKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5saW5lX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX2kxMCA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIDI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMzsKICAgICAgICAgIH0KICAgICAgICB9KS5hdHRyKCJvcGFjaXR5IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF9pMTAgPiAwKSB7CiAgICAgICAgICAgIHJldHVybiAwLjM7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMC41OwogICAgICAgICAgfQogICAgICAgIH0pLmF0dHIoImQiLCBsaW5lR2VuZXJhdG9yKS5hdHRyKCJjbGFzcyIsICJzdGFnZSIgKyBzdGFnZSArICcgZGVfYWNfcGEgJyArIGNvcl90ZW1wKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTEgPSBjbGFzc19uYW1lWzFdOwogICAgICAgICAgdmFyIGNsYXNzX25hbWUyID0gcGFyc2VJbnQoY2xhc3NfbmFtZVsyXSk7CiAgICAgICAgICAkKCIuc3RhZ2UiICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMSArICIuIiArIGNsYXNzX25hbWUyKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgdmFyIGZpcnN0X3R5cGUgPSAocGFyc2VJbnQoY2xhc3NfbmFtZTIgLyAxMDApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciB0aGlyZF90eXBlID0gKGNsYXNzX25hbWUyICUgMTAgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHNlY29uZF90eXBlID0gKHBhcnNlSW50KChjbGFzc19uYW1lMiAtIHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTAwKSAqIDEwMCkgLyAxMCkgKyAxKS50b1N0cmluZygpOwoKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKTsKCiAgICAgICAgICBfdGhpcy5hY3RpdmVfcGFzc2l2ZS5wdXNoKGNsYXNzX25hbWUxWzNdICsgc2Vjb25kX3R5cGUpOwoKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlLnB1c2goY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlKTsKCiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICQoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArICIyIiArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVswXSArIGZpcnN0X3R5cGUpLmF0dHIoJ2ZpbGwnLCBfdGhpcy5zdHJva2VfY29sb3IpOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlKS5hdHRyKCdmaWxsJywgX3RoaXMuc3Ryb2tlX2NvbG9yKTsKICAgICAgICB9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBjbGFzc19uYW1lID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7CiAgICAgICAgICB2YXIgY2xhc3NfbmFtZTEgPSBjbGFzc19uYW1lWzFdOwogICAgICAgICAgdmFyIGNsYXNzX25hbWUyID0gcGFyc2VJbnQoY2xhc3NfbmFtZVsyXSk7CiAgICAgICAgICAkKCIuc3RhZ2UiICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMSArICIuIiArIGNsYXNzX25hbWUyKS5hdHRyKCdzdHJva2UnLCBfdGhpcy5saW5lX2NvbG9yKTsKICAgICAgICAgIHZhciBmaXJzdF90eXBlID0gKHBhcnNlSW50KGNsYXNzX25hbWUyIC8gMTAwKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgdGhpcmRfdHlwZSA9IChjbGFzc19uYW1lMiAlIDEwICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciBzZWNvbmRfdHlwZSA9IChwYXJzZUludCgoY2xhc3NfbmFtZTIgLSBwYXJzZUludChjbGFzc19uYW1lMiAvIDEwMCkgKiAxMDApIC8gMTApICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgIF90aGlzLmFjdGl2ZV9wYXNzaXZlID0gX3RoaXMucmVtb3ZlRWxlbWVudChfdGhpcy5hY3RpdmVfcGFzc2l2ZSwgW2NsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSwgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSwgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlXSk7CiAgICAgICAgICAkKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIudGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyAiMiIgKyBmaXJzdF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzNdICsgIjIiICsgc2Vjb25kX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi50ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArICIyIiArIHNlY29uZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLnRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzZdICsgIjIiICsgdGhpcmRfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbMF0gKyBmaXJzdF90eXBlKS5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMuaGlnaGxpZ2h0X2NsYXNzLmluY2x1ZGVzKCIubm9uLXRlbXBvcmFsLiIgKyBzdGFnZSArICIuIiArIGNsYXNzX25hbWUxWzBdICsgZmlyc3RfdHlwZSkpIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5jb21wYXJpc29uX2NvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoImZpbGwiLCBfdGhpcy5kaXN0cmlidXRpb25fY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICQoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbM10gKyBzZWNvbmRfdHlwZSkuYXR0cignZmlsbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLmhpZ2hsaWdodF9jbGFzcy5pbmNsdWRlcygiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVszXSArIHNlY29uZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJCgiLm5vbi10ZW1wb3JhbC4iICsgc3RhZ2UgKyAiLiIgKyBjbGFzc19uYW1lMVs2XSArIHRoaXJkX3R5cGUpLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHRfY2xhc3MuaW5jbHVkZXMoIi5ub24tdGVtcG9yYWwuIiArIHN0YWdlICsgIi4iICsgY2xhc3NfbmFtZTFbNl0gKyB0aGlyZF90eXBlKSkgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmNvbXBhcmlzb25fY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQodGhpcykuYXR0cigiZmlsbCIsIF90aGlzLmRpc3RyaWJ1dGlvbl9jb2xvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pLmxvd2VyKCk7CiAgICAgIH07CgogICAgICBmb3IgKHZhciBfaTEwID0gMDsgX2kxMCA8IGNvcl90ZW1wX2tleXMubGVuZ3RoOyBfaTEwKyspIHsKICAgICAgICBfbG9vcDMoX2kxMCk7CiAgICAgIH0KICAgIH0sCiAgICBkcmF3TGVnZW5kMjogZnVuY3Rpb24gZHJhd0xlZ2VuZDIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCIuc3RhZ2V2aWV3aGVhZGVyIikuYXBwZW5kKCJzdmciKS5hdHRyKCJ3aWR0aCIsIDIwMCkuYXR0cigiaGVpZ2h0IiwgMjApOwogICAgICB2YXIgZ19sZWdlbmQgPSBzdmcuYXBwZW5kKCdnJyk7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAxMykuYXR0cigieSIsIDMpLmF0dHIoIndpZHRoIiwgMTApLmF0dHIoImhlaWdodCIsIDEwKS5hdHRyKCJmaWxsIiwgX3RoaXMuZGVwcmVzc2lvbl9jb2xvcik7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCAyNSkuYXR0cigieSIsIDEyKS5hdHRyKCJmb250LXNpemUiLCAxMCkudGV4dCgiZGVwcmVzc2lvbiIpOwogICAgICBnX2xlZ2VuZC5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgODMpLmF0dHIoInkiLCAzKS5hdHRyKCJ3aWR0aCIsIDEwKS5hdHRyKCJoZWlnaHQiLCAxMCkuYXR0cigiZmlsbCIsIF90aGlzLmFjdGl2ZV9jb2xvcik7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCA5NSkuYXR0cigieSIsIDEyKS5hdHRyKCJmb250LXNpemUiLCAxMCkudGV4dCgiYWN0aXZlIik7CiAgICAgIGdfbGVnZW5kLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAxMzApLmF0dHIoInkiLCAzKS5hdHRyKCJ3aWR0aCIsIDEwKS5hdHRyKCJoZWlnaHQiLCAxMCkuYXR0cigiZmlsbCIsIF90aGlzLnBhc3NpdmVfY29sb3IpOwogICAgICBnX2xlZ2VuZC5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgMTQyKS5hdHRyKCJ5IiwgMTIpLmF0dHIoImZvbnQtc2l6ZSIsIDEwKS50ZXh0KCJwYXNzaXZlIik7CiAgICB9LAogICAgZHJhd1N0YWdlMjogZnVuY3Rpb24gZHJhd1N0YWdlMihzdGFnZSwgZGF0YSwgeF9zdGFydCwgeV9zdGFydCwgd2lkdGgsIGhlaWdodCwgc3ZnLCBhY3RpdmVfbnVtYmVyLCBwYXNzaXZlX251bWJlciwgbWF4Y29yKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGF0YV9zdW1tYXJ5ID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBkYXRhX3N1bW1hcnlfYWxsID0gewogICAgICAgICJkZXByZXNzaW9uIjogbmV3IEFycmF5KCksCiAgICAgICAgImFjdGl2ZSBiZWhhdmlvciI6IG5ldyBBcnJheSgpLAogICAgICAgICJwYXNzaXZlIGJlaGF2aW9yIjogbmV3IEFycmF5KCkKICAgICAgfTsgLy/nlKjmnaXljIXlkKvmiYDmnInnmoTngrkKCiAgICAgIHZhciBkYXRhX3N0YXRpc3RpY3MgPSBuZXcgQXJyYXkoKTsKICAgICAgdmFyIGRhdGFfc3RhdGlzdGljc19hbGwgPSBuZXcgQXJyYXkoKTsgLy/nlKjmnaXljIXlkKvmiYDmnInnmoTngrkKCiAgICAgIHZhciBzZWdtZW50X2xlbmd0aCA9IGRhdGEubGVuZ3RoOwogICAgICB2YXIgY29ycl9zdGF0aXN0aWNzID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBkYXRhX2NvbmNhdCA9IG5ldyBBcnJheSgpOwogICAgICB2YXIgY29ycl9zdGF0aXN0aWNzX2FsbCA9IG5ldyBBcnJheSgpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50X2xlbmd0aDsgaSsrKSB7CiAgICAgICAgZGF0YV9zdW1tYXJ5W2ldID0gewogICAgICAgICAgImRlcHJlc3Npb24iOiBuZXcgQXJyYXkoKSwKICAgICAgICAgICJhY3RpdmUgYmVoYXZpb3IiOiBuZXcgQXJyYXkoKSwKICAgICAgICAgICJwYXNzaXZlIGJlaGF2aW9yIjogbmV3IEFycmF5KCkKICAgICAgICB9OyAvL+WtmOWCqOavj+S4gOS4quaXtumXtOeCueWFs+S6juS4ieS4queahOe7n+iuoQoKICAgICAgICBkYXRhX3N0YXRpc3RpY3NbaV0gPSBuZXcgQXJyYXkoKTsKICAgICAgICBkYXRhX2NvbmNhdCA9IGRhdGFfY29uY2F0LmNvbmNhdChkYXRhW2ldKTsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkYXRhW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBkYXRhX3N1bW1hcnlbaV1bImRlcHJlc3Npb24iXS5wdXNoKF90aGlzLmRlcHJlc3Npb25UaHJlc2hvbGQoZGF0YVtpXVtqXVswXSkpOwogICAgICAgICAgZGF0YV9zdW1tYXJ5W2ldWyJhY3RpdmUgYmVoYXZpb3IiXS5wdXNoKGRhdGFbaV1bal1bMV0pOwogICAgICAgICAgZGF0YV9zdW1tYXJ5W2ldWyJwYXNzaXZlIGJlaGF2aW9yIl0ucHVzaChkYXRhW2ldW2pdWzJdKTsKICAgICAgICAgIGRhdGFfc3VtbWFyeV9hbGxbImRlcHJlc3Npb24iXS5wdXNoKF90aGlzLmRlcHJlc3Npb25UaHJlc2hvbGQoZGF0YVtpXVtqXVswXSkpOwogICAgICAgICAgZGF0YV9zdW1tYXJ5X2FsbFsiYWN0aXZlIGJlaGF2aW9yIl0ucHVzaChkYXRhW2ldW2pdWzFdKTsKICAgICAgICAgIGRhdGFfc3VtbWFyeV9hbGxbInBhc3NpdmUgYmVoYXZpb3IiXS5wdXNoKGRhdGFbaV1bal1bMl0pOwogICAgICAgIH0KCiAgICAgICAgY29ycl9zdGF0aXN0aWNzLnB1c2goX3RoaXMuY29ycmVsYXRpb25TdW1tYXJpemUoZGF0YVtpXSwgbWF4Y29yKSk7CiAgICAgICAgZGF0YV9zdGF0aXN0aWNzW2ldLnB1c2goX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeVtpXVsiZGVwcmVzc2lvbiJdKSwgX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeVtpXVsiYWN0aXZlIGJlaGF2aW9yIl0pLCBfdGhpcy5nZXRGcmVxdWVuY3koZGF0YV9zdW1tYXJ5W2ldWyJwYXNzaXZlIGJlaGF2aW9yIl0pKTsKICAgICAgfQoKICAgICAgY29ycl9zdGF0aXN0aWNzX2FsbCA9IF90aGlzLmNvcnJlbGF0aW9uU3VtbWFyaXplKGRhdGFfY29uY2F0LCBtYXhjb3IpOwogICAgICBkYXRhX3N0YXRpc3RpY3NfYWxsLnB1c2goX3RoaXMuZ2V0RnJlcXVlbmN5KGRhdGFfc3VtbWFyeV9hbGxbImRlcHJlc3Npb24iXSksIF90aGlzLmdldEZyZXF1ZW5jeShkYXRhX3N1bW1hcnlfYWxsWyJhY3RpdmUgYmVoYXZpb3IiXSksIF90aGlzLmdldEZyZXF1ZW5jeShkYXRhX3N1bW1hcnlfYWxsWyJwYXNzaXZlIGJlaGF2aW9yIl0pKTsKICAgICAgdmFyIHN2Z19uZXcgPSBzdmcuYXBwZW5kKCdnJykuYXR0cignd2lkdGgnLCAxMDApLmF0dHIoJ2hlaWdodCcsIDEwMCkuYXR0cignY2xhc3MnLCAnc3RhZ2UgJyArIHN0YWdlKTsgLy/nlLtzZXBlcmF0ZSBmcmVxdWVuY3kKCiAgICAgIHZhciB4X3N0YXJ0X3RlbXAgPSB4X3N0YXJ0ICsgNTQ7CiAgICAgIHZhciB5X3N0YXJ0X3RlbXAgPSB5X3N0YXJ0ICsgaGVpZ2h0IC8gNDsKICAgICAgdmFyIGhlaWdodF90ZW1wID0gNTA7CiAgICAgIHZhciB3aWR0aF90ZW1wID0gNTA7CiAgICAgIHZhciBzY2FsZV9oZWlnaHQgPSAyNTsgLy/nlLtjb3JyZWxhdGlvbgoKICAgICAgdmFyIGxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLng7CiAgICAgIH0pLnkoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC55OwogICAgICB9KS5jdXJ2ZShkMy5jdXJ2ZUJhc2lzKTsKICAgICAgdmFyIGZyZV9zY2FsZSA9IGQzLnNjYWxlTG9nKCkuZG9tYWluKFswLjEsIDFdKS5yYW5nZShbMSwgNF0pOwoKICAgICAgZm9yICh2YXIgX2kxNSA9IDA7IF9pMTUgPCAxOyBfaTE1KyspIHsKICAgICAgICAvL+WKoOWFpWRlcHJlc3Npb24tYWN0aXZl55qE5pWw5o2uCiAgICAgICAgZm9yICh2YXIgX2o3ID0gMDsgX2o3IDwgY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfYWMnXS5sZW5ndGg7IF9qNysrKSB7CiAgICAgICAgICB2YXIgZGF0YV92aXMgPSBbXTsKICAgICAgICAgIHZhciBhY3RpdmVfbGFiZWwgPSBjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hYyddW19qN11bMF0gJSAxMDsKICAgICAgICAgIHZhciBkZXByZXNzaW9uX2xhYmVsID0gTWF0aC5mbG9vcihjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hYyddW19qN11bMF0gLyAxMCk7CiAgICAgICAgICB2YXIgZnJlcXVlbmN5ID0gY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfYWMnXVtfajddWzFdOwogICAgICAgICAgZGF0YV92aXMucHVzaCh7CiAgICAgICAgICAgICd4JzogeF9zdGFydF90ZW1wICsgZGVwcmVzc2lvbl9sYWJlbCAqICh3aWR0aF90ZW1wIC8gNCkgKyA3LAogICAgICAgICAgICAneSc6IHlfc3RhcnRfdGVtcCwKICAgICAgICAgICAgJ3ZhbHVlJzogZnJlcXVlbmN5CiAgICAgICAgICB9KTsKICAgICAgICAgIGRhdGFfdmlzLnB1c2goewogICAgICAgICAgICAneCc6IHhfc3RhcnRfdGVtcCwKICAgICAgICAgICAgJ3knOiB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIGFjdGl2ZV9sYWJlbCAqIGhlaWdodF90ZW1wIC8gYWN0aXZlX251bWJlciArIDIgKyBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBhY3RpdmVfbnVtYmVyICsgMikgLyBhY3RpdmVfbnVtYmVyKSAvIDIsCiAgICAgICAgICAgICd2YWx1ZSc6IGZyZXF1ZW5jeQogICAgICAgICAgfSk7CiAgICAgICAgICBzdmdfbmV3LmFwcGVuZCgicGF0aCIpLmRhdHVtKGRhdGFfdmlzKS5hdHRyKCJmaWxsIiwgIm5vbmUiKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5jb3JfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIGZyZV9zY2FsZShmcmVxdWVuY3kpKS5hdHRyKCJkIiwgbGluZSkuYXR0cigib3BhY2l0eSIsIDAuNik7CiAgICAgICAgfSAvL+WKoOWFpWRlcHJlc3Npb24tcGFzc2l2ZeeahOaVsOaNrgoKCiAgICAgICAgZm9yICh2YXIgX2o4ID0gMDsgX2o4IDwgY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfcGEnXS5sZW5ndGg7IF9qOCsrKSB7CiAgICAgICAgICB2YXIgX2RhdGFfdmlzID0gW107CiAgICAgICAgICB2YXIgcGFzc2l2ZV9sYWJlbCA9IGNvcnJfc3RhdGlzdGljc19hbGxbJ2RlX3BhJ11bX2o4XVswXSAlIDEwOwoKICAgICAgICAgIHZhciBfZGVwcmVzc2lvbl9sYWJlbCA9IE1hdGguZmxvb3IoY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfcGEnXVtfajhdWzBdIC8gMTApOwoKICAgICAgICAgIHZhciBfZnJlcXVlbmN5ID0gY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfcGEnXVtfajhdWzFdOwoKICAgICAgICAgIF9kYXRhX3Zpcy5wdXNoKHsKICAgICAgICAgICAgJ3gnOiB4X3N0YXJ0X3RlbXAgKyBfZGVwcmVzc2lvbl9sYWJlbCAqICh3aWR0aF90ZW1wIC8gNCkgKyA3LAogICAgICAgICAgICAneSc6IHlfc3RhcnRfdGVtcCwKICAgICAgICAgICAgJ3ZhbHVlJzogX2ZyZXF1ZW5jeQogICAgICAgICAgfSk7CgogICAgICAgICAgX2RhdGFfdmlzLnB1c2goewogICAgICAgICAgICAneCc6IHhfc3RhcnRfdGVtcCArIHdpZHRoX3RlbXAsCiAgICAgICAgICAgICd5JzogeV9zdGFydCArIGhlaWdodCAvIDQgKyBwYXNzaXZlX2xhYmVsICogaGVpZ2h0X3RlbXAgLyBwYXNzaXZlX251bWJlciArIDIgKyBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBwYXNzaXZlX251bWJlciArIDIpIC8gcGFzc2l2ZV9udW1iZXIpIC8gMiwKICAgICAgICAgICAgJ3ZhbHVlJzogX2ZyZXF1ZW5jeQogICAgICAgICAgfSk7CgogICAgICAgICAgc3ZnX25ldy5hcHBlbmQoInBhdGgiKS5kYXR1bShfZGF0YV92aXMpLmF0dHIoImZpbGwiLCAibm9uZSIpLmF0dHIoInN0cm9rZSIsIF90aGlzLmNvcl9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgZnJlX3NjYWxlKF9mcmVxdWVuY3kpKS5hdHRyKCJkIiwgbGluZSkuYXR0cigib3BhY2l0eSIsIDAuNik7CiAgICAgICAgfSAvL+WKoOWFpWFjdGl2ZS1wYXNzaXZl55qE5pWw5o2uCgoKICAgICAgICBmb3IgKHZhciBfajkgPSAwOyBfajkgPCBjb3JyX3N0YXRpc3RpY3NfYWxsWydhY19wYSddLmxlbmd0aDsgX2o5KyspIHsKICAgICAgICAgIHZhciBfZGF0YV92aXMyID0gW107CgogICAgICAgICAgdmFyIF9wYXNzaXZlX2xhYmVsID0gY29ycl9zdGF0aXN0aWNzX2FsbFsnYWNfcGEnXVtfajldWzBdICUgMTA7IC8vY29uc29sZS5sb2cocGFzc2l2ZV9sYWJlbCkKCgogICAgICAgICAgdmFyIF9hY3RpdmVfbGFiZWwgPSBNYXRoLmZsb29yKGNvcnJfc3RhdGlzdGljc19hbGxbJ2FjX3BhJ11bX2o5XVswXSAvIDEwKTsKCiAgICAgICAgICB2YXIgX2ZyZXF1ZW5jeTIgPSBjb3JyX3N0YXRpc3RpY3NfYWxsWydhY19wYSddW19qOV1bMV07CgogICAgICAgICAgX2RhdGFfdmlzMi5wdXNoKHsKICAgICAgICAgICAgJ3gnOiB4X3N0YXJ0X3RlbXAsCiAgICAgICAgICAgICd5JzogeV9zdGFydCArIGhlaWdodCAvIDQgKyBfYWN0aXZlX2xhYmVsICogaGVpZ2h0X3RlbXAgLyBhY3RpdmVfbnVtYmVyICsgMiArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIGFjdGl2ZV9udW1iZXIgKyAyKSAvIGFjdGl2ZV9udW1iZXIpIC8gMiwKICAgICAgICAgICAgJ3ZhbHVlJzogX2ZyZXF1ZW5jeTIKICAgICAgICAgIH0pOwoKICAgICAgICAgIF9kYXRhX3ZpczIucHVzaCh7CiAgICAgICAgICAgICd4JzogeF9zdGFydF90ZW1wICsgd2lkdGhfdGVtcCwKICAgICAgICAgICAgJ3knOiB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIF9wYXNzaXZlX2xhYmVsICogaGVpZ2h0X3RlbXAgLyBwYXNzaXZlX251bWJlciArIDIgKyBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBwYXNzaXZlX251bWJlciArIDIpIC8gcGFzc2l2ZV9udW1iZXIpIC8gMiwKICAgICAgICAgICAgJ3ZhbHVlJzogX2ZyZXF1ZW5jeTIKICAgICAgICAgIH0pOwoKICAgICAgICAgIHN2Z19uZXcuYXBwZW5kKCJwYXRoIikuZGF0dW0oX2RhdGFfdmlzMikuYXR0cigiZmlsbCIsICJub25lIikuYXR0cigic3Ryb2tlIiwgX3RoaXMuY29yX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCBmcmVfc2NhbGUoX2ZyZXF1ZW5jeTIpKS5hdHRyKCJkIiwgbGluZSkuYXR0cigib3BhY2l0eSIsIDAuNik7CiAgICAgICAgfSAvL2NvbnNvbGUubG9nKGRhdGFfdmlzKQogICAgICAgIC8v5Yqg5YWlZGVwcmVzc2lvbi1hY3RpdmUtcGFzc2l2ZeeahOaVsOaNrgoKCiAgICAgICAgZm9yICh2YXIgX2oxMCA9IDA7IF9qMTAgPCBjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddLmxlbmd0aDsgX2oxMCsrKSB7CiAgICAgICAgICB2YXIgX2RhdGFfdmlzMyA9IFtdOwoKICAgICAgICAgIHZhciBfcGFzc2l2ZV9sYWJlbDIgPSBjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW19qMTBdWzBdICUgMTA7CgogICAgICAgICAgdmFyIGxlZnQgPSAoY29ycl9zdGF0aXN0aWNzX2FsbFsnZGVfYWNfcGEnXVtfajEwXVswXSAtIF9wYXNzaXZlX2xhYmVsMikgLyAxMDsKCiAgICAgICAgICB2YXIgX2FjdGl2ZV9sYWJlbDIgPSBsZWZ0ICUgMTA7CgogICAgICAgICAgdmFyIF9kZXByZXNzaW9uX2xhYmVsMiA9IE1hdGguZmxvb3IobGVmdCAvIDEwKTsKCiAgICAgICAgICB2YXIgX2ZyZXF1ZW5jeTMgPSBjb3JyX3N0YXRpc3RpY3NfYWxsWydkZV9hY19wYSddW19qMTBdWzFdOyAvL+WKoOWFpWRlcHJlc3Npb24KCiAgICAgICAgICBfZGF0YV92aXMzLnB1c2goewogICAgICAgICAgICAneCc6IHhfc3RhcnRfdGVtcCArIF9kZXByZXNzaW9uX2xhYmVsMiAqICh3aWR0aF90ZW1wIC8gNCkgKyA3LAogICAgICAgICAgICAneSc6IHlfc3RhcnRfdGVtcCwKICAgICAgICAgICAgJ3ZhbHVlJzogX2ZyZXF1ZW5jeTMKICAgICAgICAgIH0pOyAvL+WKoOWFpWFjdGl2ZQoKCiAgICAgICAgICBfZGF0YV92aXMzLnB1c2goewogICAgICAgICAgICAneCc6IHhfc3RhcnRfdGVtcCwKICAgICAgICAgICAgJ3knOiB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIF9hY3RpdmVfbGFiZWwyICogaGVpZ2h0X3RlbXAgLyBhY3RpdmVfbnVtYmVyICsgMiArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIGFjdGl2ZV9udW1iZXIgKyAyKSAvIGFjdGl2ZV9udW1iZXIpIC8gMiwKICAgICAgICAgICAgJ3ZhbHVlJzogX2ZyZXF1ZW5jeTMKICAgICAgICAgIH0pOyAvL+WKoOWFpXBhc3NpdmUKCgogICAgICAgICAgX2RhdGFfdmlzMy5wdXNoKHsKICAgICAgICAgICAgJ3gnOiB4X3N0YXJ0X3RlbXAgKyB3aWR0aF90ZW1wLAogICAgICAgICAgICAneSc6IHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgX3Bhc3NpdmVfbGFiZWwyICogaGVpZ2h0X3RlbXAgLyBwYXNzaXZlX251bWJlciArIDIgKyBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBwYXNzaXZlX251bWJlciArIDIpIC8gcGFzc2l2ZV9udW1iZXIpIC8gMiwKICAgICAgICAgICAgJ3ZhbHVlJzogX2ZyZXF1ZW5jeTMKICAgICAgICAgIH0pOyAvL+WKoOWFpWRlcHJlc3Npb24KCgogICAgICAgICAgX2RhdGFfdmlzMy5wdXNoKHsKICAgICAgICAgICAgJ3gnOiB4X3N0YXJ0X3RlbXAgKyBfZGVwcmVzc2lvbl9sYWJlbDIgKiAod2lkdGhfdGVtcCAvIDQpICsgNywKICAgICAgICAgICAgJ3knOiB5X3N0YXJ0X3RlbXAsCiAgICAgICAgICAgICd2YWx1ZSc6IF9mcmVxdWVuY3kzCiAgICAgICAgICB9KTsKCiAgICAgICAgICBzdmdfbmV3LmFwcGVuZCgicGF0aCIpLmRhdHVtKF9kYXRhX3ZpczMpLmF0dHIoImZpbGwiLCAibm9uZSIpLmF0dHIoInN0cm9rZSIsICJibGFjayIpLmF0dHIoInN0cm9rZS13aWR0aCIsIGZyZV9zY2FsZShfZnJlcXVlbmN5MykpLmF0dHIoImQiLCBsaW5lKS5hdHRyKCJvcGFjaXR5IiwgMC4yKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIF9pMTYgPSAwOyBfaTE2IDwgMTsgX2kxNisrKSB7CiAgICAgICAgLy/nlLtkZXByZXNzaW9u55qE5rOo6YeKCiAgICAgICAgc3ZnX25ldy5hcHBlbmQoImxpbmUiKS5hdHRyKCJ4MSIsIHhfc3RhcnRfdGVtcCAtIDEwKS5hdHRyKCJ4MiIsIHhfc3RhcnRfdGVtcCArIHdpZHRoX3RlbXAgKyAxMCkuYXR0cigieTEiLCB5X3N0YXJ0KS5hdHRyKCJ5MiIsIHlfc3RhcnQpLmF0dHIoInN0cm9rZSIsIF90aGlzLm5vcm1hbF9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMikuYXR0cigib3BhY2l0eSIsIDAuMik7CiAgICAgICAgc3ZnX25ldy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydF90ZW1wIC0gMjgpLmF0dHIoInkiLCB5X3N0YXJ0ICsgMikuYXR0cigiZm9udC1zaXplIiwgMTApLnRleHQoImxvdyIpOwogICAgICAgIHN2Z19uZXcuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIHhfc3RhcnRfdGVtcCArIHdpZHRoX3RlbXAgKyAxMykuYXR0cigieSIsIHlfc3RhcnQgKyAyKS5hdHRyKCJmb250LXNpemUiLCAxMCkudGV4dCgiaGlnaCIpOyAvL+eUu2RlcHJlc3Npb27nmoTliIbluIMKCiAgICAgICAgZm9yICh2YXIgX2oxMSA9IDA7IF9qMTEgPCA0OyBfajExKyspIHsKICAgICAgICAgIC8v5p+l55yL5piv5ZCm5a2Y5Zyo6L+Z5Liqa2V5LOWmguaenOS4jeWtmOWcqOWImei/meS4qumVv+W6puS4ujAKICAgICAgICAgIHZhciBrZXlfdGVtcCA9IE9iamVjdC5rZXlzKGRhdGFfc3RhdGlzdGljc19hbGxbMF0pOwogICAgICAgICAgdmFyIHZhbHVlX3RlbXAgPSBPYmplY3QudmFsdWVzKGRhdGFfc3RhdGlzdGljc19hbGxbMF0pOwogICAgICAgICAgdmFyIGhlaWdodF9kZXByZXNzaW9uID0gMDsKCiAgICAgICAgICBpZiAoa2V5X3RlbXAuaW5jbHVkZXMoX2oxMS50b1N0cmluZygpKSkgewogICAgICAgICAgICBoZWlnaHRfZGVwcmVzc2lvbiA9IHNjYWxlX2hlaWdodCAqIGRhdGFfc3RhdGlzdGljc19hbGxbMF1bX2oxMV0gLyBfdGhpcy5zdW0odmFsdWVfdGVtcCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGRhdGFfc3RhdGlzdGljc19hbGxbMF1bX2oxMV0gLyBfdGhpcy5zdW0odmFsdWVfdGVtcCkgPiAwLjEpIHsKICAgICAgICAgICAgc3ZnX25ldy5hcHBlbmQoImxpbmUiKS5hdHRyKCJ4MSIsIHhfc3RhcnRfdGVtcCArIF9qMTEgKiAod2lkdGhfdGVtcCAvIDQpICsgNykuYXR0cigieDIiLCB4X3N0YXJ0X3RlbXAgKyBfajExICogKHdpZHRoX3RlbXAgLyA0KSArIDcpLmF0dHIoInkxIiwgeV9zdGFydCArIGhlaWdodCAvIDQgLSBoZWlnaHRfZGVwcmVzc2lvbikuYXR0cigieTIiLCB5X3N0YXJ0KS5hdHRyKCJzdHJva2UiLCBfdGhpcy5ub3JtYWxfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIDEpLmF0dHIoInN0cm9rZS1kYXNoYXJyYXkiLCAiMywgMiIpOwogICAgICAgICAgfQoKICAgICAgICAgIHN2Z19uZXcuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsIHhfc3RhcnRfdGVtcCArIF9qMTEgKiAod2lkdGhfdGVtcCAvIDQpICsgMikuYXR0cigieSIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0IC0gaGVpZ2h0X2RlcHJlc3Npb24pLmF0dHIoImZpbGwiLCBfdGhpcy5kZXByZXNzaW9uX2NvbG9yKS5hdHRyKCJ3aWR0aCIsIDEwKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHRfZGVwcmVzc2lvbik7CiAgICAgICAgfSAvL+eUu2FjdGl2ZeeahOazqOmHigoKCiAgICAgICAgc3ZnX25ldy5hcHBlbmQoImxpbmUiKS5hdHRyKCJ4MSIsIHhfc3RhcnRfdGVtcCAtIHNjYWxlX2hlaWdodCkuYXR0cigieDIiLCB4X3N0YXJ0X3RlbXAgLSBzY2FsZV9oZWlnaHQpLmF0dHIoInkxIiwgeV9zdGFydCArIGhlaWdodCAvIDQgLSA1KS5hdHRyKCJ5MiIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgaGVpZ2h0X3RlbXAgKyA1KS5hdHRyKCJzdHJva2UiLCBfdGhpcy5ub3JtYWxfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIDIpLmF0dHIoIm9wYWNpdHkiLCAwLjIpOyAvL+eUu2FjdGl2ZSBiZWhhdmlvcgoKICAgICAgICBmb3IgKHZhciBfajEyID0gMDsgX2oxMiA8IGFjdGl2ZV9udW1iZXI7IF9qMTIrKykgewogICAgICAgICAgLy/mn6XnnIvmmK/lkKblrZjlnKjov5nkuKprZXks5aaC5p6c5LiN5a2Y5Zyo5YiZ6L+Z5Liq6ZW/5bqm5Li6MAogICAgICAgICAgdmFyIF9rZXlfdGVtcCA9IE9iamVjdC5rZXlzKGRhdGFfc3RhdGlzdGljc19hbGxbMV0pOwoKICAgICAgICAgIHZhciBfdmFsdWVfdGVtcCA9IE9iamVjdC52YWx1ZXMoZGF0YV9zdGF0aXN0aWNzX2FsbFsxXSk7CgogICAgICAgICAgdmFyIGhlaWdodF9hY3RpdmUgPSAwOwoKICAgICAgICAgIGlmIChfa2V5X3RlbXAuaW5jbHVkZXMoX2oxMi50b1N0cmluZygpKSkgewogICAgICAgICAgICBoZWlnaHRfYWN0aXZlID0gc2NhbGVfaGVpZ2h0ICogZGF0YV9zdGF0aXN0aWNzX2FsbFsxXVtfajEyXSAvIF90aGlzLnN1bShfdmFsdWVfdGVtcCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGRhdGFfc3RhdGlzdGljc19hbGxbMV1bX2oxMl0gLyBfdGhpcy5zdW0oX3ZhbHVlX3RlbXApID4gMC4xKSB7CiAgICAgICAgICAgIHN2Z19uZXcuYXBwZW5kKCJsaW5lIikuYXR0cigieDEiLCB4X3N0YXJ0X3RlbXAgLSBzY2FsZV9oZWlnaHQpLmF0dHIoIngyIiwgeF9zdGFydF90ZW1wIC0gaGVpZ2h0X2FjdGl2ZSkuYXR0cigieTEiLCB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIF9qMTIgKiBoZWlnaHRfdGVtcCAvIGFjdGl2ZV9udW1iZXIgKyAyICsgTWF0aC5mbG9vcigoaGVpZ2h0X3RlbXAgLSAyICogYWN0aXZlX251bWJlciArIDIpIC8gYWN0aXZlX251bWJlcikgLyAyKS5hdHRyKCJ5MiIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgX2oxMiAqIGhlaWdodF90ZW1wIC8gYWN0aXZlX251bWJlciArIDIgKyBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBhY3RpdmVfbnVtYmVyICsgMikgLyBhY3RpdmVfbnVtYmVyKSAvIDIpLmF0dHIoInN0cm9rZSIsIF90aGlzLm5vcm1hbF9jb2xvcikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMSkuYXR0cigic3Ryb2tlLWRhc2hhcnJheSIsICIzLCAyIik7CiAgICAgICAgICAgIHN2Z19uZXcuYXBwZW5kKCJ0ZXh0IikuYXR0cigieCIsIHhfc3RhcnRfdGVtcCAtIHNjYWxlX2hlaWdodCAtIDEzKS5hdHRyKCJ5IiwgeV9zdGFydCArIGhlaWdodCAvIDQgKyBfajEyICogaGVpZ2h0X3RlbXAgLyBhY3RpdmVfbnVtYmVyICsgNSArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIGFjdGl2ZV9udW1iZXIgKyAyKSAvIGFjdGl2ZV9udW1iZXIpIC8gMikuYXR0cigiZm9udC1zaXplIiwgMTApLnRleHQoInAiICsgKF9qMTIgKyAxKSk7CiAgICAgICAgICB9CgogICAgICAgICAgc3ZnX25ldy5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9zdGFydF90ZW1wIC0gaGVpZ2h0X2FjdGl2ZSkuYXR0cigieSIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgX2oxMiAqIGhlaWdodF90ZW1wIC8gYWN0aXZlX251bWJlciArIDIpLmF0dHIoImZpbGwiLCBfdGhpcy5hY3RpdmVfY29sb3IpLmF0dHIoIndpZHRoIiwgaGVpZ2h0X2FjdGl2ZSkuYXR0cigiaGVpZ2h0IiwgTWF0aC5mbG9vcigoaGVpZ2h0X3RlbXAgLSAyICogYWN0aXZlX251bWJlciArIDIpIC8gYWN0aXZlX251bWJlcikpOwogICAgICAgIH0gLy/nlLtwYXNzaXZl55qE5rOo6YeKCgoKICAgICAgICBzdmdfbmV3LmFwcGVuZCgibGluZSIpLmF0dHIoIngxIiwgeF9zdGFydF90ZW1wICsgd2lkdGhfdGVtcCArIHNjYWxlX2hlaWdodCkuYXR0cigieDIiLCB4X3N0YXJ0X3RlbXAgKyB3aWR0aF90ZW1wICsgc2NhbGVfaGVpZ2h0KS5hdHRyKCJ5MSIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0IC0gNSkuYXR0cigieTIiLCB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIGhlaWdodF90ZW1wICsgNSkuYXR0cigic3Ryb2tlIiwgX3RoaXMubm9ybWFsX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAyKS5hdHRyKCJvcGFjaXR5IiwgMC4yKTsgLy/nlLtwYXNzaXZlIGJlaGF2aW9yCgogICAgICAgIGZvciAodmFyIF9qMTMgPSAwOyBfajEzIDwgcGFzc2l2ZV9udW1iZXI7IF9qMTMrKykgewogICAgICAgICAgLy/mn6XnnIvmmK/lkKblrZjlnKjov5nkuKprZXks5aaC5p6c5LiN5a2Y5Zyo5YiZ6L+Z5Liq6ZW/5bqm5Li6MAogICAgICAgICAgdmFyIF9rZXlfdGVtcDIgPSBPYmplY3Qua2V5cyhkYXRhX3N0YXRpc3RpY3NfYWxsWzJdKTsKCiAgICAgICAgICB2YXIgX3ZhbHVlX3RlbXAyID0gT2JqZWN0LnZhbHVlcyhkYXRhX3N0YXRpc3RpY3NfYWxsWzJdKTsKCiAgICAgICAgICB2YXIgaGVpZ2h0X3Bhc3NpdmUgPSAwOwoKICAgICAgICAgIGlmIChfa2V5X3RlbXAyLmluY2x1ZGVzKF9qMTMudG9TdHJpbmcoKSkpIHsKICAgICAgICAgICAgaGVpZ2h0X3Bhc3NpdmUgPSBzY2FsZV9oZWlnaHQgKiBkYXRhX3N0YXRpc3RpY3NfYWxsWzJdW19qMTNdIC8gX3RoaXMuc3VtKF92YWx1ZV90ZW1wMik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGRhdGFfc3RhdGlzdGljc19hbGxbMl1bX2oxM10gLyBfdGhpcy5zdW0oX3ZhbHVlX3RlbXAyKSA+IDAuMSkgewogICAgICAgICAgICBzdmdfbmV3LmFwcGVuZCgibGluZSIpLmF0dHIoIngxIiwgeF9zdGFydF90ZW1wICsgd2lkdGhfdGVtcCkuYXR0cigieDIiLCB4X3N0YXJ0X3RlbXAgKyB3aWR0aF90ZW1wICsgc2NhbGVfaGVpZ2h0KS5hdHRyKCJ5MSIsIHlfc3RhcnQgKyBoZWlnaHQgLyA0ICsgX2oxMyAqIGhlaWdodF90ZW1wIC8gcGFzc2l2ZV9udW1iZXIgKyAyICsgTWF0aC5mbG9vcigoaGVpZ2h0X3RlbXAgLSAyICogcGFzc2l2ZV9udW1iZXIgKyAyKSAvIHBhc3NpdmVfbnVtYmVyKSAvIDIpLmF0dHIoInkyIiwgeV9zdGFydCArIGhlaWdodCAvIDQgKyBfajEzICogaGVpZ2h0X3RlbXAgLyBwYXNzaXZlX251bWJlciArIDIgKyBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBwYXNzaXZlX251bWJlciArIDIpIC8gcGFzc2l2ZV9udW1iZXIpIC8gMikuYXR0cigic3Ryb2tlIiwgX3RoaXMubm9ybWFsX2NvbG9yKS5hdHRyKCJzdHJva2Utd2lkdGgiLCAxKS5hdHRyKCJzdHJva2UtZGFzaGFycmF5IiwgIjMsIDIiKTsKICAgICAgICAgICAgc3ZnX25ldy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgeF9zdGFydF90ZW1wICsgd2lkdGhfdGVtcCArIHNjYWxlX2hlaWdodCArIDIpLmF0dHIoInkiLCB5X3N0YXJ0ICsgaGVpZ2h0IC8gNCArIF9qMTMgKiBoZWlnaHRfdGVtcCAvIHBhc3NpdmVfbnVtYmVyICsgNSArIE1hdGguZmxvb3IoKGhlaWdodF90ZW1wIC0gMiAqIHBhc3NpdmVfbnVtYmVyICsgMikgLyBwYXNzaXZlX251bWJlcikgLyAyKS5hdHRyKCJmb250LXNpemUiLCAxMCkudGV4dCgicCIgKyAoX2oxMyArIDEpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdmdfbmV3LmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCB4X3N0YXJ0X3RlbXAgKyB3aWR0aF90ZW1wKS5hdHRyKCJ5IiwgeV9zdGFydCArIGhlaWdodCAvIDQgKyBfajEzICogaGVpZ2h0X3RlbXAgLyBwYXNzaXZlX251bWJlciArIDIpLmF0dHIoImZpbGwiLCBfdGhpcy5wYXNzaXZlX2NvbG9yKS5hdHRyKCJ3aWR0aCIsIGhlaWdodF9wYXNzaXZlKS5hdHRyKCJoZWlnaHQiLCBNYXRoLmZsb29yKChoZWlnaHRfdGVtcCAtIDIgKiBwYXNzaXZlX251bWJlciArIDIpIC8gcGFzc2l2ZV9udW1iZXIpKTsKICAgICAgICB9IC8vIOeUu+S4remXtOeahOi/nuaOpeaWueWdl+WMuuWfnwoKCiAgICAgICAgc3ZnX25ldy5hcHBlbmQoInJlY3QiKS5hdHRyKCJ4IiwgeF9zdGFydF90ZW1wKS5hdHRyKCJ5IiwgeV9zdGFydF90ZW1wKS5hdHRyKCJmaWxsIiwgIm5vbmUiKS5hdHRyKCJ3aWR0aCIsIGhlaWdodF90ZW1wKS5hdHRyKCJoZWlnaHQiLCB3aWR0aF90ZW1wKS5hdHRyKCJzdHJva2UiLCBfdGhpcy5ub3JtYWxfY29sb3IpLmF0dHIoInN0cm9rZS13aWR0aCIsIDIpLmF0dHIoIm9wYWNpdHkiLCAwLjMpOwogICAgICB9CiAgICB9LAogICAgZGVwcmVzc2lvblRocmVzaG9sZDogZnVuY3Rpb24gZGVwcmVzc2lvblRocmVzaG9sZChkZXByZXNzaW9uKSB7CiAgICAgIGlmIChkZXByZXNzaW9uIDw9IDEpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSBlbHNlIGlmIChkZXByZXNzaW9uIDw9IDIpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMjsKICAgICAgfQogICAgfSwKICAgIGdldEZyZXF1ZW5jeTogZnVuY3Rpb24gZ2V0RnJlcXVlbmN5KGFycikgewogICAgICB2YXIgb2JqID0ge307CgogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IGFycltpXTsKICAgICAgICBvYmpbaXRlbV0gPSBvYmpbaXRlbV0gKyAxIHx8IDE7CiAgICAgIH0KCiAgICAgIHJldHVybiBvYmo7CiAgICB9LAogICAgc3VtOiBmdW5jdGlvbiBzdW0oYXJyKSB7CiAgICAgIHZhciBsZW4gPSBhcnIubGVuZ3RoOwoKICAgICAgaWYgKGxlbiA9PSAwKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0gZWxzZSBpZiAobGVuID09IDEpIHsKICAgICAgICByZXR1cm4gYXJyWzBdOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBhcnJbMF0gKyB0aGlzLnN1bShhcnIuc2xpY2UoMSkpOwogICAgICB9CiAgICB9LAogICAgZGljdFN1bTogZnVuY3Rpb24gZGljdFN1bShkaWN0KSB7CiAgICAgIHZhciB0ZW1wID0gT2JqZWN0LmtleXMoZGljdCk7CiAgICAgIHZhciBzdW0gPSAwOwoKICAgICAgZm9yICh2YXIgX2kxNyA9IDAsIF90ZW1wNSA9IHRlbXA7IF9pMTcgPCBfdGVtcDUubGVuZ3RoOyBfaTE3KyspIHsKICAgICAgICB2YXIgdCA9IF90ZW1wNVtfaTE3XTsKICAgICAgICBzdW0gKz0gZGljdFt0XTsKICAgICAgfQoKICAgICAgcmV0dXJuIHN1bTsKICAgIH0sCiAgICByZW1vdmVFbGVtZW50OiBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGxpc3QsIHJfbGlzdCkgewogICAgICB2YXIgYXJyMSA9IGxpc3Q7CiAgICAgIHZhciBhcnIyID0gcl9saXN0OwogICAgICB2YXIgY291bnQgPSBuZXcgTWFwKCk7CiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWU7CiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjQgPSBmYWxzZTsKICAgICAgdmFyIF9pdGVyYXRvckVycm9yNCA9IHVuZGVmaW5lZDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IGFycjFbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDQ7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSAoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWUpIHsKICAgICAgICAgIHZhciBuID0gX3N0ZXA0LnZhbHVlOwogICAgICAgICAgY291bnQuc2V0KG4sIChjb3VudC5nZXQobikgfHwgMCkgKyAxKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9kaWRJdGVyYXRvckVycm9yNCA9IHRydWU7CiAgICAgICAgX2l0ZXJhdG9yRXJyb3I0ID0gZXJyOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ICYmIF9pdGVyYXRvcjQucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yNC5yZXR1cm4oKTsKICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNCkgewogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSB0cnVlOwogICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I1ID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjUgPSB1bmRlZmluZWQ7CgogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjUgPSBhcnIyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA1OyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gKF9zdGVwNSA9IF9pdGVyYXRvcjUubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSB0cnVlKSB7CiAgICAgICAgICB2YXIgX24gPSBfc3RlcDUudmFsdWU7CiAgICAgICAgICBjb3VudC5zZXQoX24sIChjb3VudC5nZXQoX24pIHx8IDApIC0gMSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjUgPSB0cnVlOwogICAgICAgIF9pdGVyYXRvckVycm9yNSA9IGVycjsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSAmJiBfaXRlcmF0b3I1LnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjUucmV0dXJuKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjUpIHsKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I1OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgPSB0cnVlOwogICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I2ID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjYgPSB1bmRlZmluZWQ7CgogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjYgPSBjb3VudC5lbnRyaWVzKClbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDY7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgPSAoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IHRydWUpIHsKICAgICAgICAgIHZhciBfc3RlcDYkdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfc3RlcDYudmFsdWUsIDIpLAogICAgICAgICAgICAgIF9uMiA9IF9zdGVwNiR2YWx1ZVswXSwKICAgICAgICAgICAgICBjID0gX3N0ZXA2JHZhbHVlWzFdOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYzsgaSsrKSB7CiAgICAgICAgICAgIHJlc3VsdC5wdXNoKF9uMik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjYgPSB0cnVlOwogICAgICAgIF9pdGVyYXRvckVycm9yNiA9IGVycjsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiAmJiBfaXRlcmF0b3I2LnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjYucmV0dXJuKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjYpIHsKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I2OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBjb3JyZWxhdGlvblN1bW1hcml6ZTogZnVuY3Rpb24gY29ycmVsYXRpb25TdW1tYXJpemUoZGF0YSwgbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGRlX2FjID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBkZV9wYSA9IG5ldyBBcnJheSgpOwogICAgICB2YXIgYWNfcGEgPSBuZXcgQXJyYXkoKTsKICAgICAgdmFyIGRlX2FjX3BhID0gbmV3IEFycmF5KCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgZGVwcmVzc2lvbiA9IF90aGlzLmRlcHJlc3Npb25UaHJlc2hvbGQoZGF0YVtpXVswXSk7CgogICAgICAgIHZhciBhY3RpdmViID0gZGF0YVtpXVsxXTsKICAgICAgICB2YXIgcGFzc2l2ZWIgPSBkYXRhW2ldWzJdOwogICAgICAgIGRlX2FjLnB1c2goZGVwcmVzc2lvbiAqIDEwICsgYWN0aXZlYik7CiAgICAgICAgZGVfcGEucHVzaChkZXByZXNzaW9uICogMTAgKyBwYXNzaXZlYik7CiAgICAgICAgYWNfcGEucHVzaChhY3RpdmViICogMTAgKyBwYXNzaXZlYik7CiAgICAgICAgZGVfYWNfcGEucHVzaChkZXByZXNzaW9uICogMTAwICsgMTAgKiBhY3RpdmViICsgcGFzc2l2ZWIpOwogICAgICB9CgogICAgICBkZV9hYyA9IF90aGlzLmdldEZyZXF1ZW5jeShkZV9hYyk7CiAgICAgIGRlX3BhID0gX3RoaXMuZ2V0RnJlcXVlbmN5KGRlX3BhKTsKICAgICAgYWNfcGEgPSBfdGhpcy5nZXRGcmVxdWVuY3koYWNfcGEpOwogICAgICBkZV9hY19wYSA9IF90aGlzLmdldEZyZXF1ZW5jeShkZV9hY19wYSk7CiAgICAgIHZhciByZXN1bHQgPSB7CiAgICAgICAgImRlX2FjIjogX3RoaXMubWF4bk9idGFpbihkZV9hYywgbiksCiAgICAgICAgImRlX3BhIjogX3RoaXMubWF4bk9idGFpbihkZV9wYSwgbiksCiAgICAgICAgImFjX3BhIjogX3RoaXMubWF4bk9idGFpbihhY19wYSwgbiksCiAgICAgICAgImRlX2FjX3BhIjogX3RoaXMubWF4bk9idGFpbihkZV9hY19wYSwgbikKICAgICAgfTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBtYXhuT2J0YWluOiBmdW5jdGlvbiBtYXhuT2J0YWluKGRpY3QsIG4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpdGVtcyA9IE9iamVjdC5rZXlzKGRpY3QpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuIFtrZXksIGRpY3Rba2V5XV07CiAgICAgIH0pOyAvLyDmjInnhacgdmFsdWUg55qE5aSn5bCP6L+b6KGM5o6S5bqPCgogICAgICBpdGVtcy5zb3J0KGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7CiAgICAgICAgcmV0dXJuIHNlY29uZFsxXSAtIGZpcnN0WzFdOwogICAgICB9KTsKCiAgICAgIHZhciBzdW1fdmFsdWVzID0gX3RoaXMuc3VtKE9iamVjdC52YWx1ZXMoZGljdCkpOyAvLyDojrflj5bmjpLluo/lkI7nmoTliY0gbiDkuKoga2V5IOWAvAoKCiAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgcmVzdWx0LnB1c2goW2l0ZW1zW2ldWzBdLCBpdGVtc1tpXVsxXSAvIHN1bV92YWx1ZXNdKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/shengrui/Desktop/vis2023/system/EMINDS/frontend/src/components/StageView/StageView.js"],"names":["linkHorizontal","svg","dataService","pipeService","d3","$","name","components","props","computed","data","text_color","comparison_color","circle_color","line_color","stroke_color","cor_temporal_color","nothighlight_color","highlight_color","distribution_color","normal_color","stage_name","cor_color","background_color","count","color_list","stage_start","stage_interval","stage_y_start","stage_number","temporal","highlight_list","active_passive","stagestatistics","highlight_class","last_highlight_class","watch","_this","emitAP","attr","i","length","deviation_threshold","stage_highlight","Set","includes","toString","add","types","Object","keys","size","t","types2","t2","temp_arr","stage","push","dictSum","calculateVariance","k","parseInt","mounted","select","append","drawLegend","g_prompt","rect","text","drag","on","raise","classed","event","sourceEvent","stopPropagation","preventDefault","d","x","y","allGElements","selectAll","allGCoords","nodes","map","getAttribute","match","sortedGElements","sort","a","b","forEach","gElement","onStage","msg","active_k_msg","passive_k_msg","eval","data_map","stageMap","console","log","drawStage","call","onClickPath","list_temp","methods","arr","n","mean","reduce","acc","curr","variance","Math","pow","domain_x","color","scaleOrdinal","domain","range","g_legend","c","active_k","passive_k","width","height","xscale","scaleLinear","drawEachStage","splitDataByThresholds","thresholds","gap","results","Array","p","value","j","maxcor","color_scale","x_start","interval","data_orig","data_summary","data_summary_all","data_statistics","data_statistics_all","segment_length","corr_statistics","data_concat","corr_statistics_all","concat","depressionThreshold","correlationSummarize","getFrequency","svg_stage","style","svg_1","svg_3","y_start","width_scale","height_scale","x_start1","temp","position","y_start2","keys_i","values_i","values","sum","type","split","order","keys_temp","name_temp","value_temp","temp0","temp2","temp1","k0","k1","kk","class_name_split","class_name","removeElement","temp_list","flag","yScale","yScale2","area","y0","y1","temporal_temp","temporal_horizon","areaGenerator","curve","curveBasis","layers","svg_1_1","enter","svg2","keys_c","cor_temp_keys","lineGenerator","line","curveLinear","height_curve_scale1","x_left_list","cor_temp","key_1","key_2","y2","x_left","flag_xl","xl","abs","x_right","data1","corr_temporal","flag_temp","q","svg_t","svg_t_1","class_name1","class_name2","first_type","second_type","datum","height_curve_scale2","border","y_m","third_type","lower","drawLegend2","depression_color","active_color","passive_color","drawStage2","active_number","passive_number","svg_new","x_start_temp","y_start_temp","height_temp","width_temp","scale_height","fre_scale","scaleLog","data_vis","active_label","depression_label","floor","frequency","passive_label","left","key_temp","height_depression","height_active","height_passive","depression","obj","l","item","len","slice","dict","list","r_list","arr1","arr2","Map","set","get","result","entries","de_ac","de_pa","ac_pa","de_ac_pa","activeb","passiveb","maxnObtain","items","key","first","second","sum_values"],"mappings":"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","sourcesContent":["import { linkHorizontal, svg } from 'd3';\nimport dataService from '../../service/dataService.js'\nimport pipeService from '../../service/pipeService.js';\nimport * as d3 from 'd3'\nimport $ from 'jquery'\n\nexport default {\n    name: 'StageView',\n    components: {\n    },\n    props: {\n    },\n    computed: {\n    },\n    data() {\n        return {\n            text_color: \"black\",\n            comparison_color: '#868B98',//比较的时候很不同的元素会被高亮出来\n            circle_color: '#9a8c98', //圆圈的颜色\n            line_color: '#d8dbe2',//最左边线的颜色\n            stroke_color: \"#CEBB7D\", //条状图点击之后behavior view会相应加深，这是点击之后的颜色\n            cor_temporal_color: '#CEBB7D', //展现多维度数据temporal信息的背景\n            nothighlight_color: \"black\", //每个stage最大的外框\n            highlight_color: '#CEBB7D', //pattern view点击之后点击的元素会被highlight,也就是每个stage背景色会被改变\n            distribution_color: '#C9CBD1',\n            normal_color: '#2f3e46',\n            stage_name: '#d6ccc2',\n            cor_color: '#C9CBD1',\n            background_color: 'white',\n            count: 0,\n            //color_list: [\"#B6B6C6\", \"#ADB9C1\", \"#AFB5A4\", \"#EFE8BD\", \"#e9d1b4\", \"#d2aaa3\"],\n            color_list: [\"#768f89\", \"#adb49f\", \"#EFE8BD\", \"#e9d1b4\", \"#ddbcab\", \"#d2aaa3\"],\n            // color_list: [\"#B5B5C5\", \"#E2C9B3\", \"#ECC0C0\", \"#CAD5C3\", \"#9CB8CD\", \"#E3C6A9\"],\n            stage_start: 0,\n            stage_interval: 0,\n            stage_y_start: 0,\n            stage_number: 6,\n            temporal: 0,\n            highlight_list: [],\n            active_passive: [],\n            stagestatistics: {},\n            highlight_class: [],\n            last_highlight_class: []\n        }\n    },\n    watch: {\n        active_passive: function () {\n            const _this = this\n            pipeService.emitAP(_this.active_passive)\n        },\n        temporal: function () {\n            const _this = this\n            if (_this.temporal == 1) {\n                $('.temporal').attr('visibility', 'visable')\n                $('.non-temporal').attr('visibility', 'hidden')\n                $('.temporal-click').attr('fill', _this.distribution_color)\n            } else {\n                $('.non-temporal').attr('visibility', 'visable')\n                $('.temporal').attr('visibility', 'hidden')\n                $('.temporal-click').attr('fill', _this.background_color)\n            }\n\n        },\n        highlight_list: function () {\n            //console.log(this.highlight_list)\n            const _this = this\n            for (let i = 0; i < _this.last_highlight_class.length; i++) {\n                $(_this.last_highlight_class[i]).attr(\"fill\", _this.distribution_color)\n            }\n            const deviation_threshold = 0.01\n            _this.highlight_class = []\n            let stage_highlight = new Set()\n            for (let i = 0; i < _this.stage_number; i++) {\n                if (_this.highlight_list.includes(i.toString())) {\n                    $('.stage_background1' + i.toString()).attr(\"fill\", _this.highlight_color).attr(\"opacity\", 0.1).attr(\"stroke-width\", 0)\n                } else {\n                    $('.stage_background1' + i.toString()).attr(\"fill\", \"white\").attr(\"stroke-width\", 1)\n                }\n            }\n            _this.last_highlight_class = _this.highlight_class\n            for (let i = 0; i < _this.highlight_list.length; i++) {\n                stage_highlight.add(_this.highlight_list[i])\n            }\n            let types = Object.keys(_this.stagestatistics[0])\n            if (stage_highlight.size >= 2) {\n                for (let t of types) {\n                    let types2 = Object.keys(_this.stagestatistics[0][t])\n                    for (let t2 of types2) {\n                        let temp_arr = []\n                        for (let stage of stage_highlight) {\n                            temp_arr.push(_this.stagestatistics[stage][t][t2] / _this.dictSum(_this.stagestatistics[stage][t]))\n                        }\n                        if (_this.calculateVariance(temp_arr) >= deviation_threshold) {\n                            //超过阈值就高亮\n                            let k = 'd'\n                            if (t == 1) {\n                                k = 'a'\n                            }\n                            if (t == 2) {\n                                k = 'p'\n                            }\n                            for (let stage of stage_highlight) {\n                                //console.log('.non-temporal.' + stage + '.' + k + (parseInt(t2) + 1))\n                                $('.non-temporal.' + stage + '.' + k + (parseInt(t2) + 1)).attr('fill', _this.comparison_color)\n                                $('.temporal.' + stage + '.' + k + '2' + (parseInt(t2) + 1)).attr('fill', _this.comparison_color)\n                                _this.highlight_class.push('.non-temporal.' + stage + '.' + k  + (parseInt(t2) + 1))\n                                _this.highlight_class.push('.temporal.' + stage + '.' + k + '2' + (parseInt(t2) + 1))\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    },\n    mounted: function () {\n        const _this = this\n\n        const svg = d3.select(\".stageviewbody\")\n            .append(\"svg\")\n            .attr(\"width\", 900)\n            .attr(\"height\", 280)\n            .attr(\"class\", \"progressionstage\")\n\n        _this.drawLegend(_this.stage_number) //需要传递stage number的值\n\n        //显示一些提示\n        let g_prompt = svg.append('g')\n            .attr(\"width\", 250)\n            .attr(\"height\", 80)\n            .attr(\"class\", \"prompt_2\")\n            .attr(\"visibility\", \"hidden\")\n            .attr(\"transform\", \"translate(200, 40)\")\n        \n        let rect = g_prompt.append('rect')\n            .attr('width', 600)  \n            .attr('height', 130)  \n            .attr('fill', 'white')  \n            .attr('stroke', 'black')\n            .attr('x', 0)  \n            .attr('y', 0);\n        \n        let text = g_prompt.append('text')\n            .attr('x', 10) \n            .attr('y', 15) \n            .attr('fill', 'black')\n            .attr('font-size', '12px')\n        \n        text.append('tspan')\n            .text('Each behavior stage captures the dynamic changes and interactions among different behavior types over time.')\n            .attr('x', 10) \n            .attr('y', 20) \n        \n        text.append('tspan')\n            .text('We designed two glyph modes: statistical and temporal.')\n            .attr('x', 10) \n            .attr('y', 45) \n\n        text.append('tspan')\n            .text(' - In the statistical mode, the length of the bar represents the frequency of the variable occurring at this stage.')\n            .attr('x', 10) \n            .attr('y', 60) \n\n        text.append('tspan')\n            .text(' - In the temporal mode, the overall frequency will be transformed into a temporal frequency over time.')\n            .attr('x', 10) \n            .attr('y', 75) \n        \n        text.append('tspan')\n            .text('The lines are used to display the co-occurrence frequency between corresponding behavior types.')\n            .attr('x', 10) \n            .attr('y', 100) \n        \n        text.append('tspan')\n            .text('The thicker the line, the higher the degree of co-occurrence.')\n            .attr('x', 10) \n            .attr('y', 115) \n\n        const drag = d3.drag()\n            .on('start', function () {\n                d3.select(this).raise().classed(\"active\", true);\n                d3.event.sourceEvent.stopPropagation();\n                d3.event.sourceEvent.preventDefault();\n                g_prompt.raise()\n            })\n            .on('drag', function (event, d) {\n                d3.select(this)\n                    .attr(\"transform\", \"translate(\" + (d3.event.x) + \",\" + (d3.event.y) + \")\");\n                g_prompt.raise()\n            })\n            .on('end', function (event, d) {\n                d3.select(this).classed(\"active\", false);\n                var allGElements = d3.selectAll(\".stage_drag\");\n                var allGCoords = allGElements.nodes().map(function (d) {\n                    return {\n                        x: parseInt(d.getAttribute(\"transform\").match(/(\\d+)/g)[0]),\n                        y: parseInt(d.getAttribute(\"transform\").match(/(\\d+)/g)[1])\n                    };\n                });\n\n                // 将stage元素根据x坐标进行排序\n                var sortedGElements = allGElements.nodes().sort(function (a, b) {\n                    return parseInt(a.getAttribute(\"transform\").match(/(\\d+)/g)[0]) - parseInt(b.getAttribute(\"transform\").match(/(\\d+)/g)[0]);\n                });\n                // 更新每个stage元素的位置以反映其顺序\n                sortedGElements.forEach(function (gElement, i) {\n                    var x = i * _this.stage_interval + _this.stage_start; // 设置每个stage元素的x坐标\n                    var y = _this.stage_y_start // 保留y坐标\n\n                    d3.select(gElement).attr(\"transform\", \"translate(\" + x + \",\" + y + \")\");\n                });\n                g_prompt.raise()\n            });\n\n        pipeService.onStage(function (msg) {\n            var data = msg[2]\n            var active_k_msg = msg[0]\n            var passive_k_msg = msg[1]\n            data = eval(\"(\" + data + \")\")\n            //console.log('******onStage******', data)\n            // *****重新map*****\n            const data_map = {}\n            for (let i = 0; i < _this.stage_number; i++) {\n                data_map[i] = data[_this.stageMap(i)]\n                console.log('******onStage******', _this.stageMap(i), i, data[_this.stageMap(i)], data_map[i])\n            }\n            console.log('******onStage******', data, data_map)\n            _this.drawStage(active_k_msg, passive_k_msg, data_map)\n            d3.selectAll(\".stage_drag\").call(drag)\n            g_prompt.raise()\n        })\n\n        pipeService.onClickPath(function (data) {\n            let list_temp = []\n            for (let i = 0; i < data[0].length; i++) {\n                if (~list_temp.includes(data[0][i])) {\n                    list_temp.push(data[0][i])\n                }\n            }\n            _this.highlight_list = list_temp\n            g_prompt.raise()\n        })\n\n    },\n    methods: {\n        stageMap(stage) {\n            if (stage == 2) {\n                return 0\n            }\n            if (stage == 4) {\n                return 1\n            }\n            if (stage == 0) {\n                return 2\n            }\n            if (stage == 1) {\n                return 3\n            }\n            if (stage == 3) {\n                return 4\n            } \n            if (stage == 5) {\n                return 5\n            }\n        },\n        calculateVariance(arr) {\n            const n = arr.length;\n            const mean = arr.reduce((acc, curr) => acc + curr, 0) / n;\n            const variance = arr.reduce((acc, curr) => acc + Math.pow(curr - mean, 2), 0) / n;\n            return variance;\n        },\n        drawLegend(stage_number) {\n            const _this = this\n            const svg = d3.select(\".stageviewheader\")\n                .append(\"svg\")\n                .attr(\"width\", 700)\n                .attr(\"height\", 20)\n\n            const domain_x = []\n            for (let i = 0; i < stage_number; i++) {\n                domain_x.push(i)\n            }\n\n            const color = d3.scaleOrdinal()\n                .domain(domain_x)\n                .range(_this.color_list)\n\n            let g_legend = svg.append('g')\n            g_legend.append(\"rect\")\n                .attr(\"x\", 15)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.background_color)\n                .attr(\"stroke\", \"black\")\n                .on(\"click\", function () {\n                    _this.temporal = 1 - _this.temporal\n                })\n                .attr(\"class\", \"temporal-click\")\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 29)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 13)\n                .attr(\"fill\", _this.text_color)\n                .text(\"temporal\")\n            \n            //*********假的输入框**********\n            g_legend.append(\"rect\")\n                .attr(\"x\", 200)\n                .attr(\"y\", 3)\n                .attr(\"width\", 12)\n                .attr(\"height\", 13)\n                .attr(\"fill\", _this.background_color)\n                .attr(\"stroke\", \"black\")\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 109)\n                .attr(\"y\", 14)\n                .attr(\"font-size\", 13)\n                .attr(\"fill\", _this.text_color)\n                .text(\"stage number: 6\")\n\n            for (let c = 0; c < stage_number; c++) {\n                svg.append(\"circle\")\n                    .attr(\"cx\", 225 + c * 80)\n                    .attr(\"cy\", 10)\n                    .attr(\"r\", 7)\n                    .attr(\"fill\", color(c))\n                    .attr(\"stroke\", \"#5b5b5b\")\n\n                svg.append(\"text\")\n                    .attr(\"x\", 238 + c * 80)\n                    .attr(\"y\", 14)\n                    .attr(\"font-size\", 13)\n                    .text(\"stage \" + (c + 1))\n            }\n\n            g_legend.append(\"circle\")\n                .attr(\"cx\", 693)\n                .attr(\"cy\", 7)\n                .attr(\"r\", 5)\n                .attr(\"fill\", \"white\")\n                .attr(\"stroke\", \"red\")\n                .on(\"mouseover\", function () {\n                    $(\".prompt_2\").attr(\"visibility\", \"visible\");\n                })\n                .on(\"mouseout\", function () {\n                    $(\".prompt_2\").attr(\"visibility\", \"hidden\");\n                });\n        \n            g_legend.append(\"text\")\n                .attr(\"x\", 690)\n                .attr(\"y\", 10)\n                .attr(\"font-size\", 8)\n                .text(\"?\")\n                .attr(\"fill\", \"#bc4b51\")\n                .on(\"mouseover\", function () {\n                    $(\".prompt_2\").attr(\"visibility\", \"visible\");\n                })\n                .on(\"mouseout\", function () {\n                    $(\".prompt_2\").attr(\"visibility\", \"hidden\");\n                });\n        },\n        drawStage(active_k, passive_k, data) {\n            const _this = this\n            const width = 880\n            const height = 200\n            var keys = Object.keys(data)\n            const domain_x = []\n            for (let i = 0; i < keys.length; i++) {\n                domain_x.push(i)\n            }\n            var xscale = d3.scaleLinear()\n                .domain([0, keys.length - 1])\n                .range([120, 800])\n\n            var color = d3.scaleOrdinal()\n                .domain(domain_x)\n                .range(_this.color_list)\n\n            _this.stage_interval = xscale(1) - xscale(0)\n\n            for (let i = 0; i < keys.length; i++) {\n                _this.drawEachStage(i, data[i], 3, color, xscale(i), xscale(1) - xscale(0))\n            }\n        },\n        splitDataByThresholds(data, thresholds, gap) {\n            // 初始化分割结果数组\n            var results = new Array(thresholds.length + 1);\n            for (let i = 0; i < results.length; i++) {\n                results[i] = new Array(data.length)\n                for (let p = 0; p < results[i].length; p++) {\n                    results[i][p] = 0;\n                }\n            }\n            // 对数据点逐个进行分割\n            for (let i = 0; i < data.length; i++) {\n                let value = data[i];\n                let j = 0;\n                while (j < thresholds.length && value > thresholds[j]) {\n                    results[j][i] = gap;\n                    j++;\n                }\n                results[j][i] = value - gap * j;\n                for (let k = j + 1; k < results.length; k++) {\n                    results[k][i] = 0;\n                }\n            }\n\n            return results;\n        },\n        drawEachStage(stage, data, maxcor, color_scale, x_start, interval) {\n            const _this = this\n            const data_orig = data\n            var data_summary = new Array()\n            var data_summary_all = { \"depression\": new Array(), \"active behavior\": new Array(), \"passive behavior\": new Array() } //用来包含所有的点\n            var data_statistics = new Array()\n            var data_statistics_all = new Array() //用来包含所有的点\n            var segment_length = data.length\n            var corr_statistics = new Array()\n            var data_concat = new Array()\n            var corr_statistics_all = new Array()\n            for (let i = 0; i < segment_length; i++) {\n                data_summary[i] = { \"depression\": new Array(), \"active behavior\": new Array(), \"passive behavior\": new Array() } //存储每一个时间点关于三个的统计\n                data_statistics[i] = new Array()\n                data_concat = data_concat.concat(data[i])\n                for (let j = 0; j < data[i].length; j++) {\n                    data_summary[i][\"depression\"].push(_this.depressionThreshold(data[i][j][0]))\n                    data_summary[i][\"active behavior\"].push(data[i][j][1])\n                    data_summary[i][\"passive behavior\"].push(data[i][j][2])\n                    data_summary_all[\"depression\"].push(_this.depressionThreshold(data[i][j][0]))\n                    data_summary_all[\"active behavior\"].push(data[i][j][1])\n                    data_summary_all[\"passive behavior\"].push(data[i][j][2])\n                }\n                corr_statistics.push(_this.correlationSummarize(data[i], maxcor))\n                data_statistics[i].push(\n                    _this.getFrequency(data_summary[i][\"depression\"]),\n                    _this.getFrequency(data_summary[i][\"active behavior\"]),\n                    _this.getFrequency(data_summary[i][\"passive behavior\"])\n                )\n            }\n            _this.stagestatistics[stage] = data_statistics_all\n            corr_statistics_all = _this.correlationSummarize(data_concat, maxcor)\n            data_statistics_all.push(\n                _this.getFrequency(data_summary_all[\"depression\"]),\n                _this.getFrequency(data_summary_all[\"active behavior\"]),\n                _this.getFrequency(data_summary_all[\"passive behavior\"])\n            )\n            //开始画图\n            const svg = d3.select(\".progressionstage\")\n            const svg_stage = svg.append(\"g\")\n                .attr(\"width\", 300)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"stage_drag \" + stage)\n                .style(\"z-index\", 2)\n                .attr(\"transform\", \"translate(\" + (x_start - 50) + \",0)\")\n            if (stage == 0) {\n                _this.stage_start = x_start - 50\n            }\n            const svg_1 = svg_stage.append(\"g\")\n                .attr(\"width\", 300)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"stage_single\" + stage)\n                .attr(\"id\", \"stage_single\" + stage)\n                .style(\"z-index\", 2)\n\n            const svg_3 = svg.append(\"g\")\n                .attr(\"width\", 880)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"legend\")\n                .style(\"z-index\", 2)\n                .attr(\"transform\", \"translate(10, 0)\")\n\n            let y_start = 30\n            const width_scale = interval / 2\n            const height_scale = 11\n\n            let x_start1 = 50\n\n            // 画背景\n            svg_1.append(\"rect\")\n                .attr(\"x\", x_start1 - 35)\n                .attr(\"y\", y_start - 15)\n                .attr(\"rx\", 5)\n                .attr(\"ry\", 5)\n                .attr(\"height\", 220)\n                .attr(\"width\", 110)\n                .attr(\"fill\", \"white\")\n                .attr(\"stroke\", _this.nothighlight_color)\n                .attr(\"stroke-width\", 1)\n                .attr(\"opacity\", 0.1)\n                .attr(\"class\", \"stage_background1\" + stage)\n\n            // 画stage标志\n            svg_1.append(\"circle\")\n                .attr(\"cx\", x_start1 - 35)\n                .attr(\"cy\", y_start - 15)\n                .attr(\"r\", 7)\n                .attr(\"fill\", color_scale(stage))\n                .attr(\"stroke\", _this.nothighlight_color)\n                .attr(\"stroke-width\", 0.2)\n                .attr(\"class\", \"stage_background2\" + stage)\n                .on(\"click\", function () {\n                    if (_this.highlight_list.includes(stage.toString())) {\n                        let temp = []\n                        for (let i = 0; i < _this.highlight_list.length; i++) {\n                            if (_this.highlight_list[i] != stage.toString()) {\n                                temp.push(_this.highlight_list[i])\n                            }\n                        }\n                        _this.highlight_list = temp\n                        //console.log(_this.highlight_list)\n                    } else {\n                        _this.highlight_list.push(stage.toString())\n                        //console.log(_this.highlight_list)\n                    }\n                })\n            \n            svg_1.append(\"text\")\n                .attr(\"x\", x_start1 - 39)\n                .attr(\"y\", y_start - 10)\n                .attr(\"font-size\", 13)\n                .attr(\"fill\", 'white')\n                .text(stage + 1)\n                .attr(\"class\", \"stage_background2\" + stage)\n                .on(\"click\", function () {\n                    if (_this.highlight_list.includes(stage.toString())) {\n                        let temp = []\n                        for (let i = 0; i < _this.highlight_list.length; i++) {\n                            if (_this.highlight_list[i] != stage.toString()) {\n                                temp.push(_this.highlight_list[i])\n                            }\n                        }\n                        _this.highlight_list = temp\n                        //console.log(_this.highlight_list)\n                    } else {\n                        _this.highlight_list.push(stage.toString())\n                        //console.log(_this.highlight_list)\n                    }\n                })\n            //.attr(\"opacity\", 0.5)\n\n            // 画单个attribute\n            const position = {} // 记录纵坐标位置\n            for (let i = 0; i < data_statistics_all.length; i++) {\n                let y_start2 = y_start\n                let keys_i = Object.keys(data_statistics_all[i])\n                let values_i = Object.values(data_statistics_all[i])\n                svg_3.append(\"rect\")\n                    .attr(\"x\", 10)\n                    .attr(\"y\", y_start)\n                    .attr(\"height\", height_scale * keys_i.length + 3 * (keys_i.length - 1))\n                    .attr(\"width\", 2)\n                    .attr(\"fill\", \"#5b5b5b\")\n                    .attr(\"opacity\", 0.2)\n\n                svg_1.append(\"rect\")\n                    .attr(\"x\", x_start1 - 5)\n                    .attr(\"y\", y_start)\n                    .attr(\"height\", height_scale * keys_i.length + 3 * (keys_i.length - 1))\n                    .attr(\"width\", width_scale)\n                    .attr(\"fill\", \"#5b5b5b\")\n                    .attr(\"opacity\", 0.05)\n                    .attr(\"rx\", 3)\n                    .attr(\"ry\", 3)\n\n                svg_1.append(\"rect\")\n                    .attr(\"x\", x_start1 - 3)\n                    .attr(\"y\", y_start)\n                    .attr(\"height\", height_scale * keys_i.length + 3 * (keys_i.length - 1))\n                    .attr(\"width\", 3)\n                    .attr(\"fill\", \"#cbcbcb\")\n                    // .attr(\"opacity\", 0.3)\n                for (let j = 0; j < keys_i.length; j++) {\n                    // 画legend\n                    if (i == 0) {\n                        svg_3.append(\"text\")\n                            .attr(\"x\", 15)\n                            .attr(\"y\", y_start + height_scale - 2)\n                            .attr(\"font-size\", 13)\n                            .text(function () {\n                                if (j == 0) {\n                                    return 'low'\n                                } else if (j == 1) {\n                                    return 'medium'\n                                } else {\n                                    return 'high'\n                                }\n                            })\n                            .attr(\"opacity\", 0.2)\n                    } else if (i == 1) {\n                        svg_3.append(\"text\")\n                            .attr(\"x\", 15)\n                            .attr(\"y\", y_start + height_scale - 2)\n                            .attr(\"font-size\", 13)\n                            .text(\"p\" + (j + 1))\n                            .attr(\"opacity\", 0.2)\n                    } else {\n                        svg_3.append(\"text\")\n                            .attr(\"x\", 15)\n                            .attr(\"y\", y_start + height_scale - 2)\n                            .attr(\"font-size\", 13)\n                            .text(\"r\" + (j + 1))\n                            .attr(\"opacity\", 0.2)\n                    }\n                    position[i.toString() + j.toString()] = y_start + height_scale / 2\n                    // 这里是画中间的小方块，注意是non-temporal信息\n                    svg_1.append(\"rect\")\n                        .attr(\"x\", x_start1)\n                        .attr(\"y\", y_start)\n                        .attr(\"height\", height_scale)\n                        .attr(\"width\", data_statistics_all[i][j] / _this.sum(values_i) * width_scale)\n                        .attr(\"fill\", _this.distribution_color)\n                        .attr(\"class\", function () {\n                            if (i == 1) {\n                                return \"non-temporal \" + stage + ' a' + (j + 1)\n                            } else if (i == 2) {\n                                return \"non-temporal \" + stage + ' p' + (j + 1)\n                            } else {\n                                return \"non-temporal \" + stage + ' d' + (j + 1)\n                            }\n                        })\n                        .attr(\"stroke\", _this.stroke_color)\n                        .attr(\"stroke-width\", 0.05)\n                        //hover在bar上\n                        .on('mouseenter', function () {\n                            $(this).attr(\"fill\", _this.stroke_color)\n                            let type = $(this).attr('class').split(' ')[2][0] //d a p\n                            let order = parseInt($(this).attr('class').split(' ')[2][1]) - 1 // 1 2 3 4...\n                            //需要提取出所有相连的线以及bar\n                            let keys_temp = ['de_ac', 'ac_pa', 'de_pa', 'de_ac_pa']\n                            for (let i = 0; i < keys_temp.length; i++) {\n                                for (let j = 0; j < corr_statistics_all[keys_temp[i]].length; j++) {\n                                    let name_temp = keys_temp[i]\n                                    let value_temp = parseInt(corr_statistics_all[keys_temp[i]][j][0])\n                                    // 首先画bar\n                                    if (i == 3) {\n                                        let temp0 = parseInt(value_temp / 100)\n                                        let temp2 = value_temp % 10\n                                        let temp1 = parseInt((value_temp - temp0 * 100) / 10)\n                                        if (type == 'd') {\n                                            if (order != temp0) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'a') {\n                                            if (order != temp1) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'p') {\n                                            if (order != temp2) {\n                                                continue\n                                            }\n                                        }\n                                        _this.active_passive.push('a' + (temp1 + 1))\n                                        _this.active_passive.push('p' + (temp2 + 1))\n                                        $('.stage' + stage + '.de_ac_pa.' + value_temp).attr(\"stroke\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.d' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.a' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.p' + (temp2 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.d2' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.a2' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.p2' + (temp2 + 1)).attr(\"fill\", _this.stroke_color)\n                                    } else {\n                                        let temp0 = parseInt(value_temp / 10)\n                                        let temp1 = value_temp % 10\n                                        let k0 = 'd'\n                                        let k1 = 'a'\n                                        let kk = 'de_ac'\n                                        if (i == 0) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                continue\n                                            }\n                                        }\n                                        if (i == 1) {\n                                            if (type == 'a') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'd') {\n                                                continue\n                                            }\n                                            k0 = 'a'\n                                            k1 = 'p'\n                                            kk = 'ac_pa'\n                                        }\n                                        if (i == 2) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                continue\n                                            }\n                                            k1 = 'p'\n                                            kk = 'de_pa'\n                                        }\n                                        _this.active_passive.push(k0 + (temp0 + 1))\n                                        _this.active_passive.push(k1 + (temp1 + 1))\n                                        $('.stage' + stage + '.' + kk + \".\" + value_temp).attr(\"stroke\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.' + k0 + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.' + k1 + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                    }\n                                }\n                            }\n                        })\n                        .on('mouseleave', function () {\n                            let class_name_split = type = $(this).attr('class').split(' ')\n                            let class_name = '.'\n                            for (let c = 0; c < class_name_split.length; c++) {\n                                class_name += class_name_split[c]\n                                if (c < class_name_split.length - 1) {\n                                    class_name += '.'\n                                }\n                            }\n                            if (_this.highlight_class.includes(class_name)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                            let type = $(this).attr('class').split(' ')[2][0] //d a p\n                            let order = parseInt($(this).attr('class').split(' ')[2][1]) - 1 // 1 2 3 4...\n                            //console.log(type, order)\n                            //需要提取出所有相连的线以及bar\n                            let keys_temp = ['de_ac', 'ac_pa', 'de_pa', 'de_ac_pa']\n                            for (let i = 0; i < keys_temp.length; i++) {\n                                for (let j = 0; j < corr_statistics_all[keys_temp[i]].length; j++) {\n                                    let name_temp = keys_temp[i]\n                                    let value_temp = parseInt(corr_statistics_all[keys_temp[i]][j][0])\n                                    // 首先画bar\n                                    if (i == 3) {\n                                        let temp0 = parseInt(value_temp / 100)\n                                        let temp2 = value_temp % 10\n                                        let temp1 = parseInt((value_temp - temp0 * 100) / 10)\n                                        if (type == 'd') {\n                                            if (order != temp0) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'a') {\n                                            if (order != temp1) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'p') {\n                                            if (order != temp2) {\n                                                continue\n                                            }\n                                        }\n                                        _this.active_passive = _this.removeElement(_this.active_passive, ['d' + (temp0 + 1), 'a' + (temp1 + 1), 'p' + (temp2 + 1)])\n                                        $('.stage' + stage + '.de_ac_pa.' + value_temp).attr(\"stroke\", _this.line_color)\n                                        $('.non-temporal.' + stage + '.d' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.d' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.a' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.a' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.p' + (temp2 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.p' + (temp2 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.d2' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.d2' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.a2' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.a2' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.p2' + (temp2 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.p2' + (temp2 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                    } else {\n                                        let temp0 = parseInt(value_temp / 10)\n                                        let temp1 = value_temp % 10\n                                        let k0 = 'd'\n                                        let k1 = 'a'\n                                        let kk = 'de_ac'\n                                        if (i == 0) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                continue\n                                            }\n                                        }\n                                        if (i == 1) {\n                                            if (type == 'a') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'd') {\n                                                continue\n                                            }\n                                            k0 = 'a'\n                                            k1 = 'p'\n                                            kk = 'ac_pa'\n                                        }\n                                        if (i == 2) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                continue\n                                            }\n                                            k1 = 'p'\n                                            kk = 'de_pa'\n                                        }\n                                        _this.active_passive = _this.removeElement(_this.active_passive, [k0 + (temp0 + 1), k1 + (temp1 + 1)])\n                                        $('.stage' + stage + '.' + kk + \".\" + value_temp).attr(\"stroke\", _this.distribution_color)\n                                        $('.non-temporal.' + stage + '.' + k0 + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.' + k0 + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.' + k1 + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.' + k1 + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                    }\n                                }\n                            }\n                        })\n                        .on(\"click\", function () {\n                            if (i != 0) {\n                                if ($(this).attr('stroke-width') == 0.05) {\n                                    //表示高亮\n                                    $(this).attr('stroke-width', 1)\n                                    if (i == 1) {\n                                        //代表点击的active\n                                        $(\".temporal.\" + stage + '.a' + (j + 1)).attr('stroke', _this.stroke_color)\n                                        _this.active_passive.push('a' + (j + 1))\n                                    }\n                                    if (i == 2) {\n                                        //代表点击的passive\n                                        $(\".temporal.\" + stage + '.p' + (j + 1)).attr('stroke', _this.stroke_color)\n                                        _this.active_passive.push('p' + (j + 1))\n                                    }\n                                } else {\n                                    //表示取消点击\n                                    $(this).attr('stroke-width', 0.05)\n                                    if (i == 1) {\n                                        //代表点击的active\n                                        $(\".temporal.\" + stage + '.a' + (j + 1)).attr('stroke', '#e5e5e5')\n                                        let temp_list = []\n                                        let flag = 1\n                                        for (let p = 0; p < _this.active_passive.length; p++) {\n                                            if (flag == 1 && _this.active_passive[p] == 'a' + (j + 1)) {\n                                                flag = 0\n                                                continue\n                                            }\n                                            temp_list.push(_this.active_passive[p])\n                                        }\n                                        _this.active_passive = temp_list\n                                    }\n                                    if (i == 2) {\n                                        //代表点击的passive\n                                        $(\".temporal.\" + stage + '.p' + (j + 1)).attr('stroke', '#e5e5e5')\n                                        let temp_list = []\n                                        let flag = 1\n                                        for (let p = 0; p < _this.active_passive.length; p++) {\n                                            if (flag == 1 && _this.active_passive[p] == 'p' + (j + 1)) {\n                                                flag = 0\n                                                continue\n                                            }\n                                            temp_list.push(_this.active_passive[p])\n                                        }\n                                        _this.active_passive = temp_list\n                                    }\n                                }\n                            }\n                        })\n                    // 这个地方需要加上每一个atribute的temporal信息\n                    let yScale = d3.scaleLinear()\n                        .domain([0, 1])\n                        .range([height_scale, 0]);\n                    let yScale2 = d3.scaleLinear()\n                        .domain([0, 0.2])\n                        .range([height_scale, 0]);\n                    let area = d3.area()\n                        .x(function (d) { return d.x })\n                        .y0(height_scale)\n                        .y1(function (d) { return yScale(d.y) })\n                    let temporal_temp = []\n                    let temporal_horizon = []\n                    for (let p = 0; p < data_statistics.length; p++) {\n                        if (typeof data_statistics[p][i][j] != 'number') {\n                            data_statistics[p][i][j] = 0\n                        }\n                        temporal_temp.push(\n                            { x: x_start1 + p * width_scale / data_statistics.length, y: data_statistics[p][i][j] / data[j].length }\n                        )\n                        temporal_horizon.push(data_statistics[p][i][j] / data[j].length)\n                    }\n\n                    //这里是加那些小方块，但是注意要是temporal信息\n                    svg_1.append(\"rect\")\n                        .attr(\"x\", x_start1)\n                        .attr(\"y\", y_start)\n                        .attr(\"height\", height_scale)\n                        .attr(\"width\", width_scale - 5)\n                        .attr(\"fill\", 'white')\n                        .attr(\"stroke\", \"#e5e5e5\")\n                        .attr(\"stroke-width\", 1)\n                        .attr(\"opacity\", 0.2)\n                        .attr(\"visibility\", \"hidden\")\n                        .on(\"click\", function () {\n                            if (i != 0) {\n                                if ($(this).attr('stroke') == \"#e5e5e5\") {\n                                    //表示高亮了\n                                    $(this).attr('stroke', _this.stroke_color)\n                                    if (i == 1) {\n                                        //代表点击的active\n                                        $(\".non-temporal.\" + stage + '.a' + (j + 1)).attr('stroke-width', 1)\n                                        _this.active_passive.push('a' + (j + 1))\n                                    }\n                                    if (i == 2) {\n                                        //代表点击的passive\n                                        $(\".non-temporal.\" + stage + '.p' + (j + 1)).attr('stroke-width', 1)\n                                        _this.active_passive.push('p' + (j + 1))\n                                    }\n                                } else {\n                                    //表示取消点击\n                                    $(this).attr('stroke', \"#e5e5e5\")\n                                    if (i == 1) {\n                                        //代表点击的active\n                                        $(\".non-temporal.\" + stage + '.a' + (j + 1)).attr('stroke-width', 0.05)\n                                        let temp_list = []\n                                        let flag = 1\n                                        for (let p = 0; p < _this.active_passive.length; p++) {\n                                            if (flag == 1 && _this.active_passive[p] == 'a' + (j + 1)) {\n                                                flag = 0\n                                                continue\n                                            }\n                                            temp_list.push(_this.active_passive[p])\n                                        }\n                                        _this.active_passive = temp_list\n                                    }\n                                    if (i == 2) {\n                                        //代表点击的passive\n                                        $(\".non-temporal.\" + stage + '.p' + (j + 1)).attr('stroke-width', 0.05)\n                                        let temp_list = []\n                                        let flag = 1\n                                        for (let p = 0; p < _this.active_passive.length; p++) {\n                                            if (flag == 1 && _this.active_passive[p] == 'p' + (j + 1)) {\n                                                flag = 0\n                                                continue\n                                            }\n                                            temp_list.push(_this.active_passive[p])\n                                        }\n                                        _this.active_passive = temp_list\n                                    }\n                                }\n                            }\n                        })\n                    const thresholds = [0.2, 0.4, 0.6, 0.8]\n\n                    let areaGenerator = d3.area()\n                        .x(function (d, i) { return x_start1 + i * (width_scale + 10) / data_statistics.length; })\n                        .y0(height_scale)\n                        .y1(function (d) { return yScale2(d); })\n                        .curve(d3.curveBasis);\n\n                    let layers = _this.splitDataByThresholds(temporal_horizon, thresholds, 0.2)\n                    let svg_1_1 = svg_1.append('g')\n                        .attr(\"transform\", \"translate(0,\" + y_start + \")\")\n\n                    svg_1_1.selectAll(\".layer\")\n                        .data(layers)\n                        .enter().append(\"path\")\n                        .attr(\"class\", \"layer\")\n                        .attr(\"d\", areaGenerator)\n                        .attr(\"opacity\", function (d, i) { return (i + 1) * 0.3 })\n                        .attr(\"fill\", _this.distribution_color)\n                        .attr(\"class\", function () {\n                            if (i == 1) {\n                                return \"temporal \" + stage + ' a2' + (j + 1)\n                            } else if (i == 2) {\n                                return \"temporal \" + stage + ' p2' + (j + 1)\n                            } else {\n                                return \"temporal \" + stage + ' d2' + (j + 1)\n                            }\n                        })\n                        .on('mouseenter', function () {\n                            $(this).attr(\"fill\", _this.stroke_color)\n                            let type = $(this).attr('class').split(' ')[2][0] //d a p\n                            let order = parseInt($(this).attr('class').split(' ')[2][2]) - 1 // 1 2 3 4...\n                            //需要提取出所有相连的线以及bar\n                            let keys_temp = ['de_ac', 'ac_pa', 'de_pa', 'de_ac_pa']\n                            for (let i = 0; i < keys_temp.length; i++) {\n                                for (let j = 0; j < corr_statistics_all[keys_temp[i]].length; j++) {\n                                    let name_temp = keys_temp[i]\n                                    let value_temp = parseInt(corr_statistics_all[keys_temp[i]][j][0])\n                                    // 首先画bar\n                                    if (i == 3) {\n                                        let temp0 = parseInt(value_temp / 100)\n                                        let temp2 = value_temp % 10\n                                        let temp1 = parseInt((value_temp - temp0 * 100) / 10)\n                                        if (type == 'd') {\n                                            if (order != temp0) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'a') {\n                                            if (order != temp1) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'p') {\n                                            if (order != temp2) {\n                                                continue\n                                            }\n                                        }\n                                        _this.active_passive.push('a' + (temp1 + 1))\n                                        _this.active_passive.push('p' + (temp2 + 1))\n                                        $('.stage' + stage + '.de_ac_pa.' + value_temp).attr(\"stroke\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.d' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.a' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.p' + (temp2 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.d2' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.a2' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.p2' + (temp2 + 1)).attr(\"fill\", _this.stroke_color)\n                                    } else {\n                                        let temp0 = parseInt(value_temp / 10)\n                                        let temp1 = value_temp % 10\n                                        let k0 = 'd'\n                                        let k1 = 'a'\n                                        let kk = 'de_ac'\n                                        if (i == 0) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                continue\n                                            }\n                                        }\n                                        if (i == 1) {\n                                            if (type == 'a') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'd') {\n                                                continue\n                                            }\n                                            k0 = 'a'\n                                            k1 = 'p'\n                                            kk = 'ac_pa'\n                                        }\n                                        if (i == 2) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                continue\n                                            }\n                                            k1 = 'p'\n                                            kk = 'de_pa'\n                                        }\n                                        _this.active_passive.push(k0 + (temp0 + 1))\n                                        _this.active_passive.push(k1 + (temp1 + 1))\n                                        $('.stage' + stage + '.' + kk + \".\" + value_temp).attr(\"stroke\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.' + k0 + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.non-temporal.' + stage + '.' + k1 + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1)).attr(\"fill\", _this.stroke_color)\n                                        $('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1)).attr(\"fill\", _this.stroke_color)\n                                    }\n                                }\n                            }\n                        })\n                        .on('mouseleave', function () {\n                            let class_name_split = type = $(this).attr('class').split(' ')\n                            let class_name = '.'\n                            for (let c = 0; c < class_name_split.length; c++) {\n                                class_name += class_name_split[c]\n                                if (c < class_name_split.length - 1) {\n                                    class_name += '.'\n                                }\n                            }\n                            //console.log(class_name, _this.highlight_class)\n                            if (_this.highlight_class.includes(class_name)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                            let type = $(this).attr('class').split(' ')[2][0] //d a p\n                            let order = parseInt($(this).attr('class').split(' ')[2][2]) - 1 // 1 2 3 4...\n                            //console.log(type, order)\n                            //需要提取出所有相连的线以及bar\n                            let keys_temp = ['de_ac', 'ac_pa', 'de_pa', 'de_ac_pa']\n                            for (let i = 0; i < keys_temp.length; i++) {\n                                for (let j = 0; j < corr_statistics_all[keys_temp[i]].length; j++) {\n                                    let name_temp = keys_temp[i]\n                                    let value_temp = parseInt(corr_statistics_all[keys_temp[i]][j][0])\n                                    // 首先画bar\n                                    if (i == 3) {\n                                        let temp0 = parseInt(value_temp / 100)\n                                        let temp2 = value_temp % 10\n                                        let temp1 = parseInt((value_temp - temp0 * 100) / 10)\n                                        if (type == 'd') {\n                                            if (order != temp0) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'a') {\n                                            if (order != temp1) {\n                                                continue\n                                            }\n                                        }\n                                        if (type == 'p') {\n                                            if (order != temp2) {\n                                                continue\n                                            }\n                                        }\n                                        _this.active_passive = _this.removeElement(_this.active_passive, ['a' + (temp1 + 1), 'p' + (temp2 + 1)])\n                                        $('.stage' + stage + '.de_ac_pa.' + value_temp).attr(\"stroke\", _this.line_color)\n                                        $('.non-temporal.' + stage + '.d' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.d' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.a' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.a' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.p' + (temp2 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.p' + (temp2 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.d2' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.d2' + (temp0 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.a2' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.a2' + (temp1 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.p2' + (temp2 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.p2' + (temp2 + 1))) {\n                                                return _this.comparison_color\n                                            } else {\n                                                return _this.distribution_color\n                                            }\n                                        })\n                                    } else {\n                                        let temp0 = parseInt(value_temp / 10)\n                                        let temp1 = value_temp % 10\n                                        let k0 = 'd'\n                                        let k1 = 'a'\n                                        let kk = 'de_ac'\n                                        if (i == 0) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                continue\n                                            }\n                                        }\n                                        if (i == 1) {\n                                            if (type == 'a') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'd') {\n                                                continue\n                                            }\n                                            k0 = 'a'\n                                            k1 = 'p'\n                                            kk = 'ac_pa'\n                                        }\n                                        if (i == 2) {\n                                            if (type == 'd') {\n                                                if (order != temp0) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'p') {\n                                                if (order != temp1) {\n                                                    continue\n                                                }\n                                            }\n                                            if (type == 'a') {\n                                                continue\n                                            }\n                                            k1 = 'p'\n                                            kk = 'de_pa'\n                                        }\n                                        _this.active_passive = _this.removeElement(_this.active_passive, [k0 + (temp0 + 1), k1 + (temp1 + 1)])\n                                        $('.stage' + stage + '.' + kk + \".\" + value_temp).attr(\"stroke\", _this.distribution_color)\n                                        $('.non-temporal.' + stage + '.' + k0 + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.' + k0 + (temp0 + 1))) {\n                                                $(this).attr(\"fill\", _this.comparison_color)\n                                            } else {\n                                                $(this).attr(\"fill\", _this.distribution_color)\n                                            }\n                                        })\n                                        $('.non-temporal.' + stage + '.' + k1 + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.non-temporal.' + stage + '.' + k1 + (temp1 + 1))) {\n                                                $(this).attr(\"fill\", _this.comparison_color)\n                                            } else {\n                                                $(this).attr(\"fill\", _this.distribution_color)\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.' + k0 + '2' + (temp0 + 1))) {\n                                                $(this).attr(\"fill\", _this.comparison_color)\n                                            } else {\n                                                $(this).attr(\"fill\", _this.distribution_color)\n                                            }\n                                        })\n                                        $('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1)).attr(\"fill\", function () {\n                                            if (_this.highlight_class.includes('.temporal.' + stage + '.' + k1 + '2' + (temp1 + 1))) {\n                                                $(this).attr(\"fill\", _this.comparison_color)\n                                            } else {\n                                                $(this).attr(\"fill\", _this.distribution_color)\n                                            }\n                                        })\n                                    }\n                                }\n                            }\n                        })\n                        .attr(\"visibility\", \"hidden\")\n\n                    y_start += height_scale + 3\n                }\n                svg_3.append(\"text\")\n                    .attr(\"x\", 0)\n                    .attr(\"y\", (y_start + y_start2) / 2)\n                    .attr(\"font-size\", 14)\n                    .text(function () {\n                        if (i == 0) {\n                            return 'd'\n                        } else if (i == 1) {\n                            return 'p'\n                        } else {\n                            return 'r'\n                        }\n                    })\n                    .attr(\"opacity\", 0.2)\n                y_start += 10\n            }\n\n            // 画变量之间的interaction\n            const svg2 = svg_stage.append(\"g\")\n                .attr(\"width\", 300)\n                .attr(\"height\", 280)\n                .attr(\"class\", \"stage_interaction\" + stage)\n                .attr(\"id\", \"stage_single\" + stage)\n                .style(\"z-index\", 1)\n                \n            // 先画两个两个一起出现的，并且标注出最大的那一个，其他的opacity调整很低\n            let keys_c = ['de_ac', 'ac_pa', 'de_pa']\n            let cor_temp_keys = Object.keys(corr_statistics_all['de_ac_pa'])\n            //console.log(corr_statistics_all['de_ac_pa'])\n            const lineGenerator = d3.line()\n                .x(function (d) { return d.x; })\n                .y(function (d) { return d.y; })\n                .curve(d3.curveLinear)\n            const height_curve_scale1 = d3.scaleLinear()\n                .domain([60, 150])\n                .range([10, 20])\n\n            var x_left_list = []\n            for (let i = 0; i < keys_c.length; i++) {\n                let cor_temp = corr_statistics_all[keys_c[i]]\n                for (let j = 0; j < cor_temp.length; j++) {\n                    let temp = parseInt(cor_temp[j][0])\n                    let temp0 = parseInt(temp / 10).toString()\n                    let temp1 = (temp % 10).toString()\n                    let key_1 = ''\n                    let key_2 = ''\n                    if (i == 0) {\n                        key_1 = '0' + temp0\n                        key_2 = '1' + temp1\n                        let flag = 0\n                        for (let t = 0; t < cor_temp_keys.length; t++) {\n                            //console.log(\"***\", (parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) - parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0])%10)/10)\n                            if (parseInt(cor_temp[j]) == (parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) - parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) % 10) / 10) {\n                                flag = 1\n                                break;\n                            }\n                        }\n                        if (flag == 1) {\n                            continue\n                        }\n                    } else if (i == 1) {\n                        key_1 = '1' + temp0\n                        key_2 = '2' + temp1\n                        let flag = 0\n                        for (let t = 0; t < cor_temp_keys.length; t++) {\n                            //console.log(\"***\", parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) - parseInt(parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0])/100) * 100)\n                            if (parseInt(cor_temp[j]) == parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) - parseInt(parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) / 100) * 100) {\n                                flag = 1\n                                break;\n                            }\n                        }\n                        if (flag == 1) {\n                            continue\n                        }\n                    } else {\n                        key_1 = '0' + temp0\n                        key_2 = '2' + temp1\n                        let flag = 0\n                        for (let t = 0; t < cor_temp_keys.length; t++) {\n                            //console.log(\"***\", parseInt(parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0])/100) * 10)\n                            if (parseInt(cor_temp[j]) == parseInt([corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]][0]) % 10 + parseInt(parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[t]][0]) / 100) * 10) {\n                                flag = 1\n                                break;\n                            }\n                        }\n                        if (flag == 1) {\n                            continue\n                        }\n                    }\n                    let y1 = position[key_1]\n                    let y2 = position[key_2]\n                    let x_left = x_start1 - height_curve_scale1(y2 - y1)\n                    let flag_xl = 0\n                    for (let xl = 0; xl < x_left_list.length; xl++) {\n                        if (Math.abs(x_left_list[xl] - x_left) < 3) {\n                            x_left -= 3\n                            x_left_list.push(x_left)\n                            flag_xl = 1\n                            break\n                        }\n                    }\n                    if (flag_xl == 0) {\n                        x_left_list.push(x_left)\n                    }\n                    let x_right = x_start1 - 5\n                    let data1 = [\n                        { x: x_right, y: y1 },\n                        { x: x_left, y: y1 },\n                        { x: x_left, y: y2 },\n                        { x: x_right, y: y2 }\n                    ]\n                    //开始计算co-occurence出现的情况\n                    let corr_temporal = []\n                    for (let p = 0; p < corr_statistics.length; p++) {\n                        let flag_temp = 0\n                        for (let q = 0; q < corr_statistics[p][keys_c[i]].length; q++) {\n                            if (corr_statistics[p][keys_c[i]][q][0] == cor_temp[j][0]) {\n                                flag_temp = 1\n                                corr_temporal.push(corr_statistics[p][keys_c[i]][q][1])\n                                break\n                            }\n                        }\n                        if (flag_temp == 0) {\n                            corr_temporal.push(0)\n                        }\n                    }\n\n                    let yScale = d3.scaleLinear()\n                        .domain([0, 0.5])\n                        .range([height_scale, 0])\n\n                    let area = d3.area()\n                        .x(function (d) { return d.x })\n                        .y0(height_scale)\n                        .y1(function (d) { return yScale(d.y) })\n\n                    let temporal_temp = []\n                    let temporal_horizon = []\n\n                    for (let p = 0; p < corr_temporal.length; p++) {\n                        temporal_temp.push(\n                            { x: x_left + 5 + p * width_scale / data_statistics.length, y: corr_temporal[p] }\n                        )\n                        temporal_horizon.push(corr_temporal[p])\n                    }\n\n                    //开始画co-temporal\n                    let svg_t = svg2.append('g').attr(\"class\", \"co_tem\" + stage + i + cor_temp[j][0])\n                        .attr(\"transform\", \"translate(5, 0)\")\n                        .attr(\"visibility\", \"hidden\")\n                        \n                    svg_t.append(\"rect\")\n                        .attr(\"x\", x_left + 2)\n                        .attr(\"y\", (y1 + y2) / 2 + 5)\n                        .attr(\"height\", height_scale)\n                        .attr(\"width\", width_scale - 5)\n                        .attr(\"fill\", 'white')\n                        .attr(\"class\", \"temporal\")\n                        .attr(\"stroke\", \"#5b5b5b\")\n\n                    svg_t.append(\"rect\")\n                        .attr(\"x\", x_left + 2)\n                        .attr(\"y\", (y1 + y2) / 2 + 5)\n                        .attr(\"height\", height_scale)\n                        .attr(\"width\", width_scale - 5)\n                        .attr(\"fill\", '#5b5b5b')\n                        .attr(\"class\", \"temporal\")\n                        .attr(\"stroke\", \"black\")\n                        .attr(\"opacity\", 0.05)\n\n                    let thresholds = [0.1, 0.2, 0.3, 0.4, 0.5]\n\n                    let yScale2 = d3.scaleLinear()\n                        .domain([0, 0.1])\n                        .range([height_scale, 0]);\n\n                    let areaGenerator = d3.area()\n                        .x(function (d, i) { return x_start1 + i * (width_scale + 10) / data_statistics.length; })\n                        .y0(height_scale)\n                        .y1(function (d) { return yScale2(d); })\n                        .curve(d3.curveBasis);\n\n                    let layers = _this.splitDataByThresholds(temporal_horizon, thresholds, 0.1)\n                    let svg_t_1 = svg_t.append('g')\n                        .attr(\"transform\", \"translate(\" + (x_left - 48) + \",\" + ((y1 + y2) / 2 + 5) + \")\")\n\n                    svg_t_1.selectAll(\".layer_co\")\n                        .data(layers)\n                        .enter().append(\"path\")\n                        .attr(\"class\", \"layer\")\n                        .attr(\"d\", areaGenerator)\n                        .attr(\"opacity\", function (d, i) { return (i + 1) * 0.3 })\n                        .attr(\"fill\", _this.cor_temporal_color)\n                        .attr(\"class\", \"temporal\")\n                    //.attr(\"visibility\", \"hidden\")\n\n                    svg2.append(\"circle\")\n                        .attr(\"cx\", x_left)\n                        .attr(\"cy\", (y1 + y2) / 2)\n                        .attr(\"r\", 2)\n                        .attr(\"fill\", _this.circle_color)\n                        .attr(\"opacity\", 0.4)\n                        .attr(\"class\", \"temporal \" + \"stage\" + stage + \" \" + keys_c[i] + \" \" + cor_temp[j][0])\n                        .attr(\"visibility\", \"hidden\")\n                        .on('mouseenter', function () {\n                            $('.co_tem' + stage + i + cor_temp[j][0]).attr(\"visibility\", \"visable\")\n                            $(this).attr('stroke', _this.stroke_color)\n                            let class_name = $(this).attr('class').split(' ')\n                            let class_name1 = class_name[2]\n                            let class_name2 = parseInt(class_name[3])\n                            let first_type = (parseInt(class_name2 / 10) + 1).toString()\n                            let second_type = ((class_name2 % 10) + 1).toString()\n                            _this.active_passive.push(class_name1[0] + first_type)\n                            _this.active_passive.push(class_name1[3] + second_type)\n                            $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                            $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        })\n                        .on('mouseleave', function () {\n                            $('.co_tem' + stage + i + cor_temp[j][0]).attr(\"visibility\", \"hidden\")\n                            $(this).attr('stroke', _this.line_color)\n                            let class_name = $(this).attr('class').split(' ')\n                            let class_name1 = class_name[2]\n                            let class_name2 = parseInt(class_name[3])\n                            let first_type = (parseInt(class_name2 / 10) + 1).toString()\n                            let second_type = ((class_name2 % 10) + 1).toString()\n                            _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type])\n                            //console.log(\".temporal.\" + stage + \".\" + class_name1[0]+first_type)\n                            $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                        })\n\n                    svg2.append(\"path\")\n                        .datum(data1)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", _this.line_color)\n                        .attr(\"stroke-width\", function () {\n                            if (j != 0) {\n                                return 1\n                            } else {\n                                return 2\n                            }\n                        })\n                        .attr(\"opacity\", function () {\n                            if (j != 0) {\n                                return 0.3\n                            } else {\n                                return 0.5\n                            }\n                        })\n                        .attr(\"d\", lineGenerator)\n                        .attr(\"class\", \"stage\" + stage + \" \" + keys_c[i] + \" \" + cor_temp[j][0])\n                        .on('mouseenter', function () {\n                            $(this).attr('stroke', _this.stroke_color)\n                            let class_name = $(this).attr('class').split(' ')\n                            let class_name1 = class_name[1]\n                            let class_name2 = parseInt(class_name[2])\n                            let first_type = (parseInt(class_name2 / 10) + 1).toString()\n                            let second_type = ((class_name2 % 10) + 1).toString()\n                            _this.active_passive.push(class_name1[0] + first_type)\n                            _this.active_passive.push(class_name1[3] + second_type)\n                            $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                            $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        })\n                        .on('mouseleave', function () {\n                            $(this).attr('stroke', _this.line_color)\n                            let class_name = $(this).attr('class').split(' ')\n                            let class_name1 = class_name[1]\n                            let class_name2 = parseInt(class_name[2])\n                            let first_type = (parseInt(class_name2 / 10) + 1).toString()\n                            let second_type = ((class_name2 % 10) + 1).toString()\n                            _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type])\n                            //console.log(\".temporal.\" + stage + \".\" + class_name1[0]+first_type)\n                            $('.temporal.' + stage + '.' + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                                if (_this.highlight_class.includes('.temporal.' + stage + '.' + stage + \".\" + class_name1[0] + first_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                            $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                                if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                    $(this).attr(\"fill\", _this.comparison_color)\n                                } else {\n                                    $(this).attr(\"fill\", _this.distribution_color)\n                                }\n                            })\n                        })\n\n                }\n            }\n            //画三个一起出现的\n            const height_curve_scale2 = d3.scaleLinear()\n                .domain([80, 190])\n                .range([15, 30])\n            const border = 3\n            for (let i = 0; i < cor_temp_keys.length; i++) {\n                let cor_temp = parseInt(corr_statistics_all['de_ac_pa'][cor_temp_keys[i]][0])\n                let temp0 = parseInt(cor_temp / 100).toString()\n                let temp1 = parseInt((cor_temp - parseInt(temp0) * 100) / 10).toString()\n                let temp2 = (cor_temp % 10).toString()\n                let y0 = position['0' + temp0]\n                let y1 = position['1' + temp1]\n                let y2 = position['2' + temp2]\n                let y_m = (y0 + y2) / 2\n                let x_left = x_start1 - height_curve_scale2(y2 - y0)\n                let x_right = x_start1 - 5\n                let data = [\n                    { x: x_right, y: y0 },\n                    { x: x_left + border, y: y0 },\n                    { x: x_left, y: y0 + border },\n                    { x: x_left, y: y2 - border },\n                    { x: x_left + border, y: y2 },\n                    { x: x_right, y: y2 },\n                ]\n                //开始计算co-occurence出现的情况\n                let corr_temporal = []\n                for (let p = 0; p < corr_statistics.length; p++) {\n                    let flag_temp = 0\n                    for (let q = 0; q < corr_statistics[p]['de_ac_pa'].length; q++) {\n                        if (corr_statistics[p]['de_ac_pa'][q][0] == cor_temp) {\n                            flag_temp = 1\n                            corr_temporal.push(corr_statistics[p][keys_c[i]][q][1])\n                            break\n                        }\n                    }\n                    if (flag_temp == 0) {\n                        corr_temporal.push(0)\n                    }\n                }\n\n                let yScale = d3.scaleLinear()\n                    .domain([0, 1])\n                    .range([height_scale, 0])\n\n                let area = d3.area()\n                    .x(function (d) { return d.x })\n                    .y0(height_scale)\n                    .y1(function (d) { return yScale(d.y) })\n\n                let temporal_temp = []\n                let temporal_horizon = []\n\n                for (let p = 0; p < corr_temporal.length; p++) {\n                    temporal_temp.push(\n                        { x: x_left + 5 + p * width_scale / data_statistics.length, y: corr_temporal[p] }\n                    )\n                    temporal_horizon.push(corr_temporal[p])\n                }\n\n                //开始画co-temporal\n                let svg_t = svg2.append('g').attr(\"class\", \"3_co_tem\" + stage + cor_temp).attr(\"visibility\", \"hidden\")\n                    .attr(\"transform\", \"translate(10, 0)\")\n\n                svg_t.append(\"rect\")\n                    .attr(\"x\", x_left + 5)\n                    .attr(\"y\", (y0 + y2) / 2 + 5)\n                    .attr(\"height\", height_scale)\n                    .attr(\"width\", width_scale - 5)\n                    .attr(\"fill\", 'white')\n                    .attr(\"class\", \"temporal\")\n                    .attr(\"stroke\", \"#5b5b5b\")\n\n                svg_t.append(\"rect\")\n                    .attr(\"x\", x_left + 5)\n                    .attr(\"y\", (y0 + y2) / 2 + 5)\n                    .attr(\"height\", height_scale)\n                    .attr(\"width\", width_scale - 5)\n                    .attr(\"fill\", '#5b5b5b')\n                    .attr(\"class\", \"temporal\")\n                    .attr(\"stroke\", \"black\")\n                    .attr(\"opacity\", 0.05)\n\n                let thresholds = [0.1, 0.2, 0.3, 0.4, 0.5]\n\n                let yScale2 = d3.scaleLinear()\n                    .domain([0, 0.1])\n                    .range([height_scale, 0]);\n\n                let areaGenerator = d3.area()\n                    .x(function (d, i) { return x_start1 + i * (width_scale + 10) / data_statistics.length; })\n                    .y0(height_scale)\n                    .y1(function (d) { return yScale2(d); })\n                    .curve(d3.curveBasis);\n\n                let layers = _this.splitDataByThresholds(temporal_horizon, thresholds, 0.1)\n                let svg_t_1 = svg_t.append('g')\n                    .attr(\"transform\", \"translate(\" + (x_left - 45) + \",\" + ((y0 + y2) / 2 + 5) + \")\")\n\n                svg_t_1.selectAll(\".layer_co\")\n                    .data(layers)\n                    .enter().append(\"path\")\n                    .attr(\"class\", \"layer\")\n                    .attr(\"d\", areaGenerator)\n                    .attr(\"opacity\", function (d, i) { return (i + 1) * 0.3 })\n                    .attr(\"fill\", _this.cor_temporal_color)\n                    .attr(\"class\", \"temporal\")\n                //.attr(\"visibility\", \"hidden\")\n\n                svg2.append(\"circle\")\n                    .attr(\"cx\", x_left)\n                    .attr(\"cy\", (y0 + y2) / 2)\n                    .attr(\"r\", 3)\n                    .attr(\"fill\", _this.circle_color)\n                    .attr(\"opacity\", 0.5)\n                    .attr(\"class\", \"temporal \" + \"stage\" + stage + ' de_ac_pa ' + cor_temp)\n                    .attr(\"visibility\", \"hidden\")\n                    .on('mouseenter', function () {\n                        $(\".3_co_tem\" + stage + cor_temp).attr(\"visibility\", \"visable\")\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[2]\n                        let class_name2 = parseInt(class_name[3])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.stroke_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive.push(class_name1[0] + first_type)\n                        _this.active_passive.push(class_name1[3] + second_type)\n                        _this.active_passive.push(class_name1[6] + third_type)\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', _this.stroke_color)\n                    })\n                    .on('mouseleave', function () {\n                        $(\".3_co_tem\" + stage + cor_temp).attr(\"visibility\", \"hidden\")\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[2]\n                        let class_name2 = parseInt(class_name[3])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.line_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type, class_name1[6] + third_type])\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                    })\n\n                svg2.append(\"line\")\n                    .attr(\"x1\", x_right)\n                    .attr(\"x2\", x_left)\n                    .attr(\"y1\", y1)\n                    .attr(\"y2\", (y0 + y2) / 2)\n                    .attr(\"fill\", \"none\")\n                    .attr(\"stroke\", _this.line_color)\n                    .attr(\"stroke-width\", function () {\n                        if (i > 0) {\n                            return 2\n                        } else {\n                            return 3\n                        }\n                    })\n                    .attr(\"opacity\", function () {\n                        if (i > 0) {\n                            return 0.3\n                        } else {\n                            return 0.5\n                        }\n                    })\n                    .attr(\"class\", \"stage\" + stage + ' de_ac_pa ' + cor_temp)\n                    .on('mouseenter', function () {\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[1]\n                        let class_name2 = parseInt(class_name[2])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.stroke_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive.push(class_name1[0] + first_type)\n                        _this.active_passive.push(class_name1[3] + second_type)\n                        _this.active_passive.push(class_name1[6] + third_type)\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', _this.stroke_color)\n                    })\n                    .on('mouseleave', function () {\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[1]\n                        let class_name2 = parseInt(class_name[2])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.line_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type, class_name1[6] + third_type])\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                    })\n                    .lower()\n\n                svg2.append(\"path\")\n                    .datum(data)\n                    .attr(\"fill\", \"none\")\n                    .attr(\"stroke\", _this.line_color)\n                    .attr(\"stroke-width\", function () {\n                        if (i > 0) {\n                            return 2\n                        } else {\n                            return 3\n                        }\n                    })\n                    .attr(\"opacity\", function () {\n                        if (i > 0) {\n                            return 0.3\n                        } else {\n                            return 0.5\n                        }\n                    })\n                    .attr(\"d\", lineGenerator)\n                    .attr(\"class\", \"stage\" + stage + ' de_ac_pa ' + cor_temp)\n                    .on('mouseenter', function () {\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[1]\n                        let class_name2 = parseInt(class_name[2])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.stroke_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive.push(class_name1[0] + first_type)\n                        _this.active_passive.push(class_name1[3] + second_type)\n                        _this.active_passive.push(class_name1[6] + third_type)\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', _this.stroke_color)\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', _this.stroke_color)\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', _this.stroke_color)\n                    })\n                    .on('mouseleave', function () {\n                        let class_name = $(this).attr('class').split(' ')\n                        let class_name1 = class_name[1]\n                        let class_name2 = parseInt(class_name[2])\n                        $(\".stage\" + stage + \".\" + class_name1 + \".\" + class_name2).attr('stroke', _this.line_color)\n                        let first_type = (parseInt(class_name2 / 100) + 1).toString()\n                        let third_type = ((class_name2 % 10) + 1).toString()\n                        let second_type = (parseInt((class_name2 - parseInt(class_name2 / 100) * 100) / 10) + 1).toString()\n                        _this.active_passive = _this.removeElement(_this.active_passive, [class_name1[0] + first_type, class_name1[3] + second_type, class_name1[6] + third_type])\n                        $(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[0] + \"2\" + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[3] + \"2\" + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".temporal.\" + stage + \".\" + class_name1[6] + \"2\" + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[0] + first_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[3] + second_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                        $(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type).attr('fill', function () {\n                            if (_this.highlight_class.includes(\".non-temporal.\" + stage + \".\" + class_name1[6] + third_type)) {\n                                $(this).attr(\"fill\", _this.comparison_color)\n                            } else {\n                                $(this).attr(\"fill\", _this.distribution_color)\n                            }\n                        })\n                    })\n                    .lower()\n            }\n        },\n        drawLegend2() {\n            const _this = this\n            const svg = d3.select(\".stageviewheader\")\n                .append(\"svg\")\n                .attr(\"width\", 200)\n                .attr(\"height\", 20)\n\n            let g_legend = svg.append('g')\n\n            g_legend.append(\"rect\")\n                .attr(\"x\", 13)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.depression_color)\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 25)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 10)\n                .text(\"depression\")\n\n            g_legend.append(\"rect\")\n                .attr(\"x\", 83)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.active_color)\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 95)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 10)\n                .text(\"active\")\n\n            g_legend.append(\"rect\")\n                .attr(\"x\", 130)\n                .attr(\"y\", 3)\n                .attr(\"width\", 10)\n                .attr(\"height\", 10)\n                .attr(\"fill\", _this.passive_color)\n\n            g_legend.append(\"text\")\n                .attr(\"x\", 142)\n                .attr(\"y\", 12)\n                .attr(\"font-size\", 10)\n                .text(\"passive\")\n            \n        },\n        drawStage2(stage, data, x_start, y_start, width, height, svg, active_number, passive_number, maxcor) {\n            const _this = this\n            var data_summary = new Array()\n            var data_summary_all = { \"depression\": new Array(), \"active behavior\": new Array(), \"passive behavior\": new Array() } //用来包含所有的点\n            var data_statistics = new Array()\n            var data_statistics_all = new Array() //用来包含所有的点\n            var segment_length = data.length\n            var corr_statistics = new Array()\n            var data_concat = new Array()\n            var corr_statistics_all = new Array()\n            for (let i = 0; i < segment_length; i++) {\n                data_summary[i] = { \"depression\": new Array(), \"active behavior\": new Array(), \"passive behavior\": new Array() } //存储每一个时间点关于三个的统计\n                data_statistics[i] = new Array()\n                data_concat = data_concat.concat(data[i])\n                for (let j = 0; j < data[i].length; j++) {\n                    data_summary[i][\"depression\"].push(_this.depressionThreshold(data[i][j][0]))\n                    data_summary[i][\"active behavior\"].push(data[i][j][1])\n                    data_summary[i][\"passive behavior\"].push(data[i][j][2])\n                    data_summary_all[\"depression\"].push(_this.depressionThreshold(data[i][j][0]))\n                    data_summary_all[\"active behavior\"].push(data[i][j][1])\n                    data_summary_all[\"passive behavior\"].push(data[i][j][2])\n                }\n                corr_statistics.push(_this.correlationSummarize(data[i], maxcor))\n                data_statistics[i].push(\n                    _this.getFrequency(data_summary[i][\"depression\"]),\n                    _this.getFrequency(data_summary[i][\"active behavior\"]),\n                    _this.getFrequency(data_summary[i][\"passive behavior\"])\n                )\n            }\n            corr_statistics_all = _this.correlationSummarize(data_concat, maxcor)\n            data_statistics_all.push(\n                _this.getFrequency(data_summary_all[\"depression\"]),\n                _this.getFrequency(data_summary_all[\"active behavior\"]),\n                _this.getFrequency(data_summary_all[\"passive behavior\"])\n            )\n\n            var svg_new = svg.append('g')\n                .attr('width', 100)\n                .attr('height', 100)\n                .attr('class', 'stage ' + stage)\n\n            //画seperate frequency\n            var x_start_temp = x_start + 54\n            var y_start_temp = y_start + height / 4\n            var height_temp = 50\n            var width_temp = 50\n\n            const scale_height = 25\n\n            //画correlation\n            var line = d3.line()\n                .x(function (d) { return d.x; })\n                .y(function (d) { return d.y; })\n                .curve(d3.curveBasis)\n\n            const fre_scale = d3.scaleLog()\n                .domain([0.1, 1])\n                .range([1, 4])\n\n            for (let i = 0; i < 1; i++) {\n                //加入depression-active的数据\n                for (let j = 0; j < corr_statistics_all['de_ac'].length; j++) {\n                    let data_vis = []\n                    let active_label = corr_statistics_all['de_ac'][j][0] % 10\n                    let depression_label = Math.floor(corr_statistics_all['de_ac'][j][0] / 10)\n                    let frequency = corr_statistics_all['de_ac'][j][1]\n                    data_vis.push({\n                        'x': x_start_temp + depression_label * (width_temp / 4) + 7,\n                        'y': y_start_temp,\n                        'value': frequency,\n                    })\n                    data_vis.push({\n                        'x': x_start_temp,\n                        'y': y_start + height / 4 + active_label * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2,\n                        'value': frequency\n                    })\n                    svg_new.append(\"path\")\n                        .datum(data_vis)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", _this.cor_color)\n                        .attr(\"stroke-width\", fre_scale(frequency))\n                        .attr(\"d\", line)\n                        .attr(\"opacity\", 0.6)\n                }\n                //加入depression-passive的数据\n                for (let j = 0; j < corr_statistics_all['de_pa'].length; j++) {\n                    let data_vis = []\n                    let passive_label = corr_statistics_all['de_pa'][j][0] % 10\n                    let depression_label = Math.floor(corr_statistics_all['de_pa'][j][0] / 10)\n                    let frequency = corr_statistics_all['de_pa'][j][1]\n                    data_vis.push({\n                        'x': x_start_temp + depression_label * (width_temp / 4) + 7,\n                        'y': y_start_temp,\n                        'value': frequency,\n                    })\n                    data_vis.push({\n                        'x': x_start_temp + width_temp,\n                        'y': y_start + height / 4 + passive_label * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2,\n                        'value': frequency\n                    })\n                    svg_new.append(\"path\")\n                        .datum(data_vis)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", _this.cor_color)\n                        .attr(\"stroke-width\", fre_scale(frequency))\n                        .attr(\"d\", line)\n                        .attr(\"opacity\", 0.6)\n                }\n                //加入active-passive的数据\n                for (let j = 0; j < corr_statistics_all['ac_pa'].length; j++) {\n                    let data_vis = []\n                    let passive_label = corr_statistics_all['ac_pa'][j][0] % 10\n                    //console.log(passive_label)\n                    let active_label = Math.floor(corr_statistics_all['ac_pa'][j][0] / 10)\n                    let frequency = corr_statistics_all['ac_pa'][j][1]\n                    data_vis.push({\n                        'x': x_start_temp,\n                        'y': y_start + height / 4 + active_label * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2,\n                        'value': frequency,\n                    })\n                    data_vis.push({\n                        'x': x_start_temp + width_temp,\n                        'y': y_start + height / 4 + passive_label * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2,\n                        'value': frequency\n                    })\n                    svg_new.append(\"path\")\n                        .datum(data_vis)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", _this.cor_color)\n                        .attr(\"stroke-width\", fre_scale(frequency))\n                        .attr(\"d\", line)\n                        .attr(\"opacity\", 0.6)\n                }\n                //console.log(data_vis)\n                //加入depression-active-passive的数据\n                for (let j = 0; j < corr_statistics_all['de_ac_pa'].length; j++) {\n                    let data_vis = []\n                    let passive_label = corr_statistics_all['de_ac_pa'][j][0] % 10\n                    let left = (corr_statistics_all['de_ac_pa'][j][0] - passive_label) / 10\n                    let active_label = left % 10\n                    let depression_label = Math.floor(left / 10)\n                    let frequency = corr_statistics_all['de_ac_pa'][j][1]\n                    //加入depression\n                    data_vis.push({\n                        'x': x_start_temp + depression_label * (width_temp / 4) + 7,\n                        'y': y_start_temp,\n                        'value': frequency,\n                    })\n                    //加入active\n                    data_vis.push({\n                        'x': x_start_temp,\n                        'y': y_start + height / 4 + active_label * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2,\n                        'value': frequency\n                    })\n                    //加入passive\n                    data_vis.push({\n                        'x': x_start_temp + width_temp,\n                        'y': y_start + height / 4 + passive_label * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2,\n                        'value': frequency\n                    })\n                    //加入depression\n                    data_vis.push({\n                        'x': x_start_temp + depression_label * (width_temp / 4) + 7,\n                        'y': y_start_temp,\n                        'value': frequency,\n                    })\n                    svg_new.append(\"path\")\n                        .datum(data_vis)\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", \"black\")\n                        .attr(\"stroke-width\", fre_scale(frequency))\n                        .attr(\"d\", line)\n                        .attr(\"opacity\", 0.2)\n                }\n            }\n\n            for (let i = 0; i < 1; i++) {\n                //画depression的注释\n                svg_new.append(\"line\")\n                    .attr(\"x1\", x_start_temp - 10)\n                    .attr(\"x2\", x_start_temp + width_temp + 10)\n                    .attr(\"y1\", y_start)\n                    .attr(\"y2\", y_start)\n                    .attr(\"stroke\", _this.normal_color)\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"opacity\", 0.2)\n\n                svg_new.append(\"text\")\n                    .attr(\"x\", x_start_temp - 28)\n                    .attr(\"y\", y_start + 2)\n                    .attr(\"font-size\", 10)\n                    .text(\"low\")\n\n                svg_new.append(\"text\")\n                    .attr(\"x\", x_start_temp + width_temp + 13)\n                    .attr(\"y\", y_start + 2)\n                    .attr(\"font-size\", 10)\n                    .text(\"high\")\n\n                //画depression的分布\n                for (let j = 0; j < 4; j++) {\n                    //查看是否存在这个key,如果不存在则这个长度为0\n                    let key_temp = Object.keys(data_statistics_all[0])\n                    let value_temp = Object.values(data_statistics_all[0])\n                    let height_depression = 0\n                    if (key_temp.includes(j.toString())) {\n                        height_depression = scale_height * data_statistics_all[0][j] / _this.sum(value_temp)\n                    }\n                    if (data_statistics_all[0][j] / _this.sum(value_temp) > 0.1) {\n                        svg_new.append(\"line\")\n                            .attr(\"x1\", x_start_temp + j * (width_temp / 4) + 7)\n                            .attr(\"x2\", x_start_temp + j * (width_temp / 4) + 7)\n                            .attr(\"y1\", y_start + height / 4 - height_depression)\n                            .attr(\"y2\", y_start)\n                            .attr(\"stroke\", _this.normal_color)\n                            .attr(\"stroke-width\", 1)\n                            .attr(\"stroke-dasharray\", \"3, 2\")\n                    }\n                    svg_new.append(\"rect\")\n                        .attr(\"x\", x_start_temp + j * (width_temp / 4) + 2)\n                        .attr(\"y\", y_start + height / 4 - height_depression)\n                        .attr(\"fill\", _this.depression_color)\n                        .attr(\"width\", 10)\n                        .attr(\"height\", height_depression)\n                }\n\n                //画active的注释\n                svg_new.append(\"line\")\n                    .attr(\"x1\", x_start_temp - scale_height)\n                    .attr(\"x2\", x_start_temp - scale_height)\n                    .attr(\"y1\", y_start + height / 4 - 5)\n                    .attr(\"y2\", y_start + height / 4 + height_temp + 5)\n                    .attr(\"stroke\", _this.normal_color)\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"opacity\", 0.2)\n\n                //画active behavior\n                for (let j = 0; j < active_number; j++) {\n                    //查看是否存在这个key,如果不存在则这个长度为0\n                    let key_temp = Object.keys(data_statistics_all[1])\n                    let value_temp = Object.values(data_statistics_all[1])\n                    let height_active = 0\n                    if (key_temp.includes(j.toString())) {\n                        height_active = scale_height * data_statistics_all[1][j] / _this.sum(value_temp)\n                    }\n                    if (data_statistics_all[1][j] / _this.sum(value_temp) > 0.1) {\n                        svg_new.append(\"line\")\n                            .attr(\"x1\", x_start_temp - scale_height)\n                            .attr(\"x2\", x_start_temp - height_active)\n                            .attr(\"y1\", y_start + height / 4 + j * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2)\n                            .attr(\"y2\", y_start + height / 4 + j * height_temp / active_number + 2 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2)\n                            .attr(\"stroke\", _this.normal_color)\n                            .attr(\"stroke-width\", 1)\n                            .attr(\"stroke-dasharray\", \"3, 2\")\n\n                        svg_new.append(\"text\")\n                            .attr(\"x\", x_start_temp - scale_height - 13)\n                            .attr(\"y\", y_start + height / 4 + j * height_temp / active_number + 5 + Math.floor((height_temp - 2 * active_number + 2) / active_number) / 2)\n                            .attr(\"font-size\", 10)\n                            .text(\"p\" + (j + 1))\n                    }\n                    svg_new.append(\"rect\")\n                        .attr(\"x\", x_start_temp - height_active)\n                        .attr(\"y\", y_start + height / 4 + j * height_temp / active_number + 2)\n                        .attr(\"fill\", _this.active_color)\n                        .attr(\"width\", height_active)\n                        .attr(\"height\", Math.floor((height_temp - 2 * active_number + 2) / active_number))\n                }\n                //画passive的注释\n                svg_new.append(\"line\")\n                    .attr(\"x1\", x_start_temp + width_temp + scale_height)\n                    .attr(\"x2\", x_start_temp + width_temp + scale_height)\n                    .attr(\"y1\", y_start + height / 4 - 5)\n                    .attr(\"y2\", y_start + height / 4 + height_temp + 5)\n                    .attr(\"stroke\", _this.normal_color)\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"opacity\", 0.2)\n\n                //画passive behavior\n                for (let j = 0; j < passive_number; j++) {\n                    //查看是否存在这个key,如果不存在则这个长度为0\n                    let key_temp = Object.keys(data_statistics_all[2])\n                    let value_temp = Object.values(data_statistics_all[2])\n                    let height_passive = 0\n                    if (key_temp.includes(j.toString())) {\n                        height_passive = scale_height * data_statistics_all[2][j] / _this.sum(value_temp)\n                    }\n                    if (data_statistics_all[2][j] / _this.sum(value_temp) > 0.1) {\n                        svg_new.append(\"line\")\n                            .attr(\"x1\", x_start_temp + width_temp)\n                            .attr(\"x2\", x_start_temp + width_temp + scale_height)\n                            .attr(\"y1\", y_start + height / 4 + j * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2)\n                            .attr(\"y2\", y_start + height / 4 + j * height_temp / passive_number + 2 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2)\n                            .attr(\"stroke\", _this.normal_color)\n                            .attr(\"stroke-width\", 1)\n                            .attr(\"stroke-dasharray\", \"3, 2\")\n\n                        svg_new.append(\"text\")\n                            .attr(\"x\", x_start_temp + width_temp + scale_height + 2)\n                            .attr(\"y\", y_start + height / 4 + j * height_temp / passive_number + 5 + Math.floor((height_temp - 2 * passive_number + 2) / passive_number) / 2)\n                            .attr(\"font-size\", 10)\n                            .text(\"p\" + (j + 1))\n                    }\n                    svg_new.append(\"rect\")\n                        .attr(\"x\", x_start_temp + width_temp)\n                        .attr(\"y\", y_start + height / 4 + j * height_temp / passive_number + 2)\n                        .attr(\"fill\", _this.passive_color)\n                        .attr(\"width\", height_passive)\n                        .attr(\"height\", Math.floor((height_temp - 2 * passive_number + 2) / passive_number))\n                }\n\n                // 画中间的连接方块区域\n                svg_new.append(\"rect\")\n                    .attr(\"x\", x_start_temp)\n                    .attr(\"y\", y_start_temp)\n                    .attr(\"fill\", \"none\")\n                    .attr(\"width\", height_temp)\n                    .attr(\"height\", width_temp)\n                    .attr(\"stroke\", _this.normal_color)\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"opacity\", 0.3)\n            }\n        },\n        depressionThreshold(depression) {\n            if (depression <= 1) {\n                return 0\n            } else if (depression <= 2) {\n                return 1\n            } else {\n                return 2\n            }\n        },\n        getFrequency(arr) {\n            var obj = {};\n            for (var i = 0, l = arr.length; i < l; i++) {\n                var item = arr[i];\n                obj[item] = (obj[item] + 1) || 1;\n            }\n            return obj\n        },\n        sum(arr) {\n            var len = arr.length;\n            if (len == 0) {\n                return 0;\n            } else if (len == 1) {\n                return arr[0];\n            } else {\n                return arr[0] + this.sum(arr.slice(1));\n            }\n        },\n        dictSum(dict) {\n            let temp = Object.keys(dict)\n            let sum = 0\n            for (let t of temp) {\n                sum += dict[t]\n            }\n            return sum\n        },\n        removeElement(list, r_list) {\n            const arr1 = list\n            const arr2 = r_list\n            const count = new Map()\n            for (const n of arr1) {\n                count.set(n, (count.get(n) || 0) + 1);\n            }\n            for (const n of arr2) {\n                count.set(n, (count.get(n) || 0) - 1);\n            }\n            const result = [];\n            for (const [n, c] of count.entries()) {\n                for (let i = 0; i < c; i++) {\n                    result.push(n);\n                }\n            }\n            return result\n        },\n        correlationSummarize(data, n) {\n            const _this = this\n            var de_ac = new Array()\n            var de_pa = new Array()\n            var ac_pa = new Array()\n            var de_ac_pa = new Array()\n            for (let i = 0; i < data.length; i++) {\n                let depression = _this.depressionThreshold(data[i][0])\n                let activeb = data[i][1]\n                let passiveb = data[i][2]\n                de_ac.push(depression * 10 + activeb)\n                de_pa.push(depression * 10 + passiveb)\n                ac_pa.push(activeb * 10 + passiveb)\n                de_ac_pa.push(depression * 100 + 10 * activeb + passiveb)\n            }\n            de_ac = _this.getFrequency(de_ac)\n            de_pa = _this.getFrequency(de_pa)\n            ac_pa = _this.getFrequency(ac_pa)\n            de_ac_pa = _this.getFrequency(de_ac_pa)\n            var result = { \"de_ac\": _this.maxnObtain(de_ac, n), \"de_pa\": _this.maxnObtain(de_pa, n), \"ac_pa\": _this.maxnObtain(ac_pa, n), \"de_ac_pa\": _this.maxnObtain(de_ac_pa, n) }\n            return result\n        },\n        maxnObtain(dict, n) {\n            const _this = this\n            const items = Object.keys(dict).map(function (key) {\n                return [key, dict[key]];\n            });\n\n            // 按照 value 的大小进行排序\n            items.sort(function (first, second) {\n                return second[1] - first[1];\n            });\n\n            const sum_values = _this.sum(Object.values(dict))\n\n            // 获取排序后的前 n 个 key 值\n            const result = [];\n            for (let i = 0; i < n; i++) {\n                result.push([items[i][0], items[i][1] / sum_values]);\n            }\n            return result\n        }\n    }\n}"]}]}